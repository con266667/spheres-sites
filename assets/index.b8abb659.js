function Df(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function Gt(){}function si(n,t){for(const e in t)n[e]=t[e];return n}function Dl(n){return n()}function nu(){return Object.create(null)}function er(n){n.forEach(Dl)}function xf(n){return typeof n=="function"}function Ye(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}let mr;function iu(n,t){return mr||(mr=document.createElement("a")),mr.href=t,n===mr.href}function kf(n){return Object.keys(n).length===0}function Y(n,t){n.appendChild(t)}function Ie(n,t,e){n.insertBefore(t,e||null)}function ve(n){n.parentNode.removeChild(n)}function xl(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function ut(n){return document.createElement(n)}function ye(n){return document.createTextNode(n)}function pn(){return ye(" ")}function Rf(){return ye("")}function R(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function Of(n){return Array.from(n.childNodes)}function Oe(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function Cs(n,t,e,i){e===null?n.style.removeProperty(t):n.style.setProperty(t,e,i?"important":"")}function Vt(n,t,e){n.classList[e?"add":"remove"](t)}let Pi;function Si(n){Pi=n}function Nf(){if(!Pi)throw new Error("Function called outside component initialization");return Pi}function Go(n){Nf().$$.on_mount.push(n)}const _i=[],ru=[],Cr=[],su=[],Pf=Promise.resolve();let Zs=!1;function Mf(){Zs||(Zs=!0,Pf.then(kl))}function to(n){Cr.push(n)}const As=new Set;let yr=0;function kl(){const n=Pi;do{for(;yr<_i.length;){const t=_i[yr];yr++,Si(t),Lf(t.$$)}for(Si(null),_i.length=0,yr=0;ru.length;)ru.pop()();for(let t=0;t<Cr.length;t+=1){const e=Cr[t];As.has(e)||(As.add(e),e())}Cr.length=0}while(_i.length);for(;su.length;)su.pop()();Zs=!1,As.clear(),Si(n)}function Lf(n){if(n.fragment!==null){n.update(),er(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(to)}}const Ar=new Set;let ln;function Ho(){ln={r:0,c:[],p:ln}}function Ko(){ln.r||er(ln.c),ln=ln.p}function Ht(n,t){n&&n.i&&(Ar.delete(n),n.i(t))}function se(n,t,e,i){if(n&&n.o){if(Ar.has(n))return;Ar.add(n),ln.c.push(()=>{Ar.delete(n),i&&(e&&n.d(1),i())}),n.o(t)}else i&&i()}function oi(n,t){const e={},i={},r={$$scope:1};let s=n.length;for(;s--;){const o=n[s],a=t[s];if(a){for(const u in o)u in a||(i[u]=1);for(const u in a)r[u]||(e[u]=a[u],r[u]=1);n[s]=a}else for(const u in o)r[u]=1}for(const o in i)o in e||(e[o]=void 0);return e}function ai(n){return typeof n=="object"&&n!==null?n:{}}function xn(n){n&&n.c()}function Qe(n,t,e,i){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=n.$$;r&&r.m(t,e),i||to(()=>{const u=s.map(Dl).filter(xf);o?o.push(...u):er(u),n.$$.on_mount=[]}),a.forEach(to)}function Je(n,t){const e=n.$$;e.fragment!==null&&(er(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Ff(n,t){n.$$.dirty[0]===-1&&(_i.push(n),Mf(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Ze(n,t,e,i,r,s,o,a=[-1]){const u=Pi;Si(n);const l=n.$$={fragment:null,ctx:null,props:s,update:Gt,not_equal:r,bound:nu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:nu(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=e?e(n,t.props||{},(h,d,...f)=>{const g=f.length?f[0]:d;return l.ctx&&r(l.ctx[h],l.ctx[h]=g)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](g),c&&Ff(n,h)),d}):[],l.update(),c=!0,er(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const h=Of(t.target);l.fragment&&l.fragment.l(h),h.forEach(ve)}else l.fragment&&l.fragment.c();t.intro&&Ht(n.$$.fragment),Qe(n,t.target,t.anchor,t.customElement),kl()}Si(u)}class tn{$destroy(){Je(this,1),this.$destroy=Gt}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const r=i.indexOf(e);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!kf(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Vf=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[e++],o=n[e++],a=n[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,u=r+2<n.length,l=u?n[r+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;u||(f=64,o||(d=64)),i.push(e[c],e[h],e[d],e[f])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Rl(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Vf(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=e[n.charAt(r++)],a=r<n.length?e[n.charAt(r)]:0;++r;const l=r<n.length?e[n.charAt(r)]:64;++r;const h=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||h==null)throw Error();const d=s<<2|a>>4;if(i.push(d),l!==64){const f=a<<4&240|l>>2;if(i.push(f),h!==64){const g=l<<6&192|h;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},$f=function(n){const t=Rl(n);return Bf.encodeByteArray(t,!0)},Ol=function(n){return $f(n).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ts())}function jf(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gf(){return ts().indexOf("Electron/")>=0}function Hf(){const n=ts();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Kf(){return ts().indexOf("MSAppHost/")>=0}function Wf(){return typeof indexedDB=="object"}function Xf(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="FirebaseError";class ui extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Yf,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Qf(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ui(r,a,i)}}function Qf(n,t){return n.replace(Jf,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Jf=/\{\$([^}]+)}/g;function eo(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const s=n[r],o=t[r];if(ou(s)&&ou(o)){if(!eo(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function ou(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n){return n&&n._delegate?n._delegate:n}class Mi{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Uf;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(nd(t))try{this.getOrInitializeService({instanceIdentifier:an})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=an){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=an){return this.instances.has(t)}getOptions(t=an){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(!!i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ed(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=an){return this.component?this.component.multipleInstances?t:an:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ed(n){return n===an?void 0:n}function nd(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new td(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const rd={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},sd=nt.INFO,od={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},ad=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=od[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Pl{constructor(t){this.name=t,this._logLevel=sd,this._logHandler=ad,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?rd[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...t),this._logHandler(this,nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...t),this._logHandler(this,nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...t),this._logHandler(this,nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...t),this._logHandler(this,nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...t),this._logHandler(this,nt.ERROR,...t)}}const ud=(n,t)=>t.some(e=>n instanceof e);let au,uu;function ld(){return au||(au=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cd(){return uu||(uu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ml=new WeakMap,no=new WeakMap,Ll=new WeakMap,Is=new WeakMap,Wo=new WeakMap;function hd(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(je(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Ml.set(e,n)}).catch(()=>{}),Wo.set(t,n),t}function fd(n){if(no.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});no.set(n,t)}let io={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return no.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ll.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return je(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function dd(n){io=n(io)}function pd(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Ds(this),t,...e);return Ll.set(i,t.sort?t.sort():[t]),je(i)}:cd().includes(n)?function(...t){return n.apply(Ds(this),t),je(Ml.get(this))}:function(...t){return je(n.apply(Ds(this),t))}}function gd(n){return typeof n=="function"?pd(n):(n instanceof IDBTransaction&&fd(n),ud(n,ld())?new Proxy(n,io):n)}function je(n){if(n instanceof IDBRequest)return hd(n);if(Is.has(n))return Is.get(n);const t=gd(n);return t!==n&&(Is.set(n,t),Wo.set(t,n)),t}const Ds=n=>Wo.get(n);function md(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,t),a=je(o);return i&&o.addEventListener("upgradeneeded",u=>{i(je(o.result),u.oldVersion,u.newVersion,je(o.transaction))}),e&&o.addEventListener("blocked",()=>e()),a.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const yd=["get","getKey","getAll","getAllKeys","count"],_d=["put","add","delete","clear"],xs=new Map;function lu(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(xs.get(t))return xs.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=_d.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||yd.includes(e)))return;const s=async function(o,...a){const u=this.transaction(o,r?"readwrite":"readonly");let l=u.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[e](...a),r&&u.done]))[0]};return xs.set(t,s),s}dd(n=>({...n,get:(t,e,i)=>lu(t,e)||n.get(t,e,i),has:(t,e)=>!!lu(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(wd(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function wd(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ro="@firebase/app",cu="0.7.31";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Pl("@firebase/app"),Ed="@firebase/app-compat",Td="@firebase/analytics-compat",Sd="@firebase/analytics",bd="@firebase/app-check-compat",Cd="@firebase/app-check",Ad="@firebase/auth",Id="@firebase/auth-compat",Dd="@firebase/database",xd="@firebase/database-compat",kd="@firebase/functions",Rd="@firebase/functions-compat",Od="@firebase/installations",Nd="@firebase/installations-compat",Pd="@firebase/messaging",Md="@firebase/messaging-compat",Ld="@firebase/performance",Fd="@firebase/performance-compat",Vd="@firebase/remote-config",Bd="@firebase/remote-config-compat",$d="@firebase/storage",Ud="@firebase/storage-compat",zd="@firebase/firestore",jd="@firebase/firestore-compat",qd="firebase",Gd="9.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="[DEFAULT]",Hd={[ro]:"fire-core",[Ed]:"fire-core-compat",[Sd]:"fire-analytics",[Td]:"fire-analytics-compat",[Cd]:"fire-app-check",[bd]:"fire-app-check-compat",[Ad]:"fire-auth",[Id]:"fire-auth-compat",[Dd]:"fire-rtdb",[xd]:"fire-rtdb-compat",[kd]:"fire-fn",[Rd]:"fire-fn-compat",[Od]:"fire-iid",[Nd]:"fire-iid-compat",[Pd]:"fire-fcm",[Md]:"fire-fcm-compat",[Ld]:"fire-perf",[Fd]:"fire-perf-compat",[Vd]:"fire-rc",[Bd]:"fire-rc-compat",[$d]:"fire-gcs",[Ud]:"fire-gcs-compat",[zd]:"fire-fst",[jd]:"fire-fst-compat","fire-js":"fire-js",[qd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Map,so=new Map;function Kd(n,t){try{n.container.addComponent(t)}catch(e){Tn.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Or(n){const t=n.name;if(so.has(t))return Tn.debug(`There were multiple attempts to register component ${t}.`),!1;so.set(t,n);for(const e of Rr.values())Kd(e,n);return!0}function Wd(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Sn=new Nl("app","Firebase",Xd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=Gd;function Jd(n,t={}){typeof t!="object"&&(t={name:t});const e=Object.assign({name:Fl,automaticDataCollectionEnabled:!1},t),i=e.name;if(typeof i!="string"||!i)throw Sn.create("bad-app-name",{appName:String(i)});const r=Rr.get(i);if(r){if(eo(n,r.options)&&eo(e,r.config))return r;throw Sn.create("duplicate-app",{appName:i})}const s=new id(i);for(const a of so.values())s.addComponent(a);const o=new Yd(n,e,s);return Rr.set(i,o),o}function Zd(n=Fl){const t=Rr.get(n);if(!t)throw Sn.create("no-app",{appName:n});return t}function Bn(n,t,e){var i;let r=(i=Hd[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tn.warn(a.join(" "));return}Or(new Mi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="firebase-heartbeat-database",ep=1,Li="firebase-heartbeat-store";let ks=null;function Vl(){return ks||(ks=md(tp,ep,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Li)}}}).catch(n=>{throw Sn.create("idb-open",{originalErrorMessage:n.message})})),ks}async function np(n){var t;try{return(await Vl()).transaction(Li).objectStore(Li).get(Bl(n))}catch(e){if(e instanceof ui)Tn.warn(e.message);else{const i=Sn.create("idb-get",{originalErrorMessage:(t=e)===null||t===void 0?void 0:t.message});Tn.warn(i.message)}}}async function hu(n,t){var e;try{const r=(await Vl()).transaction(Li,"readwrite");return await r.objectStore(Li).put(t,Bl(n)),r.done}catch(i){if(i instanceof ui)Tn.warn(i.message);else{const r=Sn.create("idb-set",{originalErrorMessage:(e=i)===null||e===void 0?void 0:e.message});Tn.warn(r.message)}}}function Bl(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=1024,rp=30*24*60*60*1e3;class sp{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ap(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fu();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=rp}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fu(),{heartbeatsToSend:e,unsentEntries:i}=op(this._heartbeatsCache.heartbeats),r=Ol(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function fu(){return new Date().toISOString().substring(0,10)}function op(n,t=ip){const e=[];let i=n.slice();for(const r of n){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),du(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),du(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class ap{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wf()?Xf().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await np(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return hu(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return hu(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function du(n){return Ol(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n){Or(new Mi("platform-logger",t=>new vd(t),"PRIVATE")),Or(new Mi("heartbeat",t=>new sp(t),"PRIVATE")),Bn(ro,cu,n),Bn(ro,cu,"esm2017"),Bn("fire-js","")}up("");var lp="firebase",cp="9.9.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(lp,cp,"app");var hp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,Xo=Xo||{},B=hp||self;function Nr(){}function oo(n){var t=typeof n;return t=t!="object"?t:n?Array.isArray(n)?"array":t:"null",t=="array"||t=="object"&&typeof n.length=="number"}function nr(n){var t=typeof n;return t=="object"&&n!=null||t=="function"}function fp(n){return Object.prototype.hasOwnProperty.call(n,Rs)&&n[Rs]||(n[Rs]=++dp)}var Rs="closure_uid_"+(1e9*Math.random()>>>0),dp=0;function pp(n,t,e){return n.call.apply(n.bind,arguments)}function gp(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Nt(n,t,e){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Nt=pp:Nt=gp,Nt.apply(null,arguments)}function _r(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Lt(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[r].apply(i,o)}}function en(){this.s=this.s,this.o=this.o}var mp=0;en.prototype.s=!1;en.prototype.na=function(){!this.s&&(this.s=!0,this.M(),mp!=0)&&fp(this)};en.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $l=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if(typeof n=="string")return typeof t!="string"||t.length!=1?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},Ul=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r=typeof n=="string"?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function yp(n){t:{var t=ug;const e=n.length,i=typeof n=="string"?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break t}t=-1}return 0>t?null:typeof n=="string"?n.charAt(t):n[t]}function pu(n){return Array.prototype.concat.apply([],arguments)}function Yo(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function Pr(n){return/^[\s\xa0]*$/.test(n)}var gu=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zt(n,t){return n.indexOf(t)!=-1}function Os(n,t){return n<t?-1:n>t?1:0}var jt;t:{var mu=B.navigator;if(mu){var yu=mu.userAgent;if(yu){jt=yu;break t}}jt=""}function Qo(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function zl(n){const t={};for(const e in n)t[e]=n[e];return t}var _u="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jl(n,t){let e,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(e in i)n[e]=i[e];for(let s=0;s<_u.length;s++)e=_u[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Jo(n){return Jo[" "](n),n}Jo[" "]=Nr;function _p(n){var t=Ep;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}var vp=zt(jt,"Opera"),Gn=zt(jt,"Trident")||zt(jt,"MSIE"),ql=zt(jt,"Edge"),ao=ql||Gn,Gl=zt(jt,"Gecko")&&!(zt(jt.toLowerCase(),"webkit")&&!zt(jt,"Edge"))&&!(zt(jt,"Trident")||zt(jt,"MSIE"))&&!zt(jt,"Edge"),wp=zt(jt.toLowerCase(),"webkit")&&!zt(jt,"Edge");function Hl(){var n=B.document;return n?n.documentMode:void 0}var Mr;t:{var Ns="",Ps=function(){var n=jt;if(Gl)return/rv:([^\);]+)(\)|;)/.exec(n);if(ql)return/Edge\/([\d\.]+)/.exec(n);if(Gn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(wp)return/WebKit\/(\S+)/.exec(n);if(vp)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Ps&&(Ns=Ps?Ps[1]:""),Gn){var Ms=Hl();if(Ms!=null&&Ms>parseFloat(Ns)){Mr=String(Ms);break t}}Mr=Ns}var Ep={};function Tp(){return _p(function(){let n=0;const t=gu(String(Mr)).split("."),e=gu("9").split("."),i=Math.max(t.length,e.length);for(let o=0;n==0&&o<i;o++){var r=t[o]||"",s=e[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;n=Os(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||Os(r[2].length==0,s[2].length==0)||Os(r[2],s[2]),r=r[3],s=s[3]}while(n==0)}return 0<=n})}var uo;if(B.document&&Gn){var vu=Hl();uo=vu||parseInt(Mr,10)||void 0}else uo=void 0;var Sp=uo,bp=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{B.addEventListener("test",Nr,t),B.removeEventListener("test",Nr,t)}catch{}return n}();function $t(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};function Fi(n,t){if($t.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Gl){t:{try{Jo(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else e=="mouseover"?t=n.fromElement:e=="mouseout"&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:Cp[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fi.Z.h.call(this)}}Lt(Fi,$t);var Cp={2:"touch",3:"pen",4:"mouse"};Fi.prototype.h=function(){Fi.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Ap=0;function Ip(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++Ap,this.ca=this.fa=!1}function es(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ns(n){this.src=n,this.g={},this.h=0}ns.prototype.add=function(n,t,e,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=co(n,t,i,r);return-1<o?(t=n[o],e||(t.fa=!1)):(t=new Ip(t,this.src,s,!!i,r),t.fa=e,n.push(t)),t};function lo(n,t){var e=t.type;if(e in n.g){var i=n.g[e],r=$l(i,t),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(es(t),n.g[e].length==0&&(delete n.g[e],n.h--))}}function co(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}var Zo="closure_lm_"+(1e6*Math.random()|0),Ls={};function Kl(n,t,e,i,r){if(i&&i.once)return Xl(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Kl(n,t[s],e,i,r);return null}return e=na(e),n&&n[ir]?n.N(t,e,nr(i)?!!i.capture:!!i,r):Wl(n,t,e,!1,i,r)}function Wl(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var o=nr(r)?!!r.capture:!!r,a=ea(n);if(a||(n[Zo]=a=new ns(n)),e=a.add(t,e,i,o,s),e.proxy)return e;if(i=Dp(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)bp||(r=o),r===void 0&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(Ql(t.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return e}function Dp(){function n(e){return t.call(n.src,n.listener,e)}var t=xp;return n}function Xl(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Xl(n,t[s],e,i,r);return null}return e=na(e),n&&n[ir]?n.O(t,e,nr(i)?!!i.capture:!!i,r):Wl(n,t,e,!0,i,r)}function Yl(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Yl(n,t[s],e,i,r);else i=nr(i)?!!i.capture:!!i,e=na(e),n&&n[ir]?(n=n.i,t=String(t).toString(),t in n.g&&(s=n.g[t],e=co(s,e,i,r),-1<e&&(es(s[e]),Array.prototype.splice.call(s,e,1),s.length==0&&(delete n.g[t],n.h--)))):n&&(n=ea(n))&&(t=n.g[t.toString()],n=-1,t&&(n=co(t,e,i,r)),(e=-1<n?t[n]:null)&&ta(e))}function ta(n){if(typeof n!="number"&&n&&!n.ca){var t=n.src;if(t&&t[ir])lo(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(Ql(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=ea(t))?(lo(e,n),e.h==0&&(e.src=null,t[Zo]=null)):es(n)}}}function Ql(n){return n in Ls?Ls[n]:Ls[n]="on"+n}function xp(n,t){if(n.ca)n=!0;else{t=new Fi(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&ta(n),n=e.call(i,t)}return n}function ea(n){return n=n[Zo],n instanceof ns?n:null}var Fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function na(n){return typeof n=="function"?n:(n[Fs]||(n[Fs]=function(t){return n.handleEvent(t)}),n[Fs])}function At(){en.call(this),this.i=new ns(this),this.P=this,this.I=null}Lt(At,en);At.prototype[ir]=!0;At.prototype.removeEventListener=function(n,t,e,i){Yl(this,n,t,e,i)};function Pt(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,typeof t=="string")t=new $t(t,n);else if(t instanceof $t)t.target=t.target||n;else{var r=t;t=new $t(i,n),jl(t,r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.g=e[s];r=vr(o,i,!0,t)&&r}if(o=t.g=n,r=vr(o,i,!0,t)&&r,r=vr(o,i,!1,t)&&r,e)for(s=0;s<e.length;s++)o=t.g=e[s],r=vr(o,i,!1,t)&&r}At.prototype.M=function(){if(At.Z.M.call(this),this.i){var n=this.i,t;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)es(e[i]);delete n.g[t],n.h--}}this.I=null};At.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)};At.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};function vr(n,t,e,i){if(t=n.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==e){var a=o.listener,u=o.ia||o.src;o.fa&&lo(n.i,o),r=a.call(u,i)!==!1&&r}}return r&&!i.defaultPrevented}var ia=B.JSON.stringify;function kp(){var n=Zl;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}class Rp{constructor(){this.h=this.g=null}add(t,e){const i=Jl.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}}var Jl=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Op,n=>n.reset());class Op{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Np(n){B.setTimeout(()=>{throw n},0)}function ra(n,t){ho||Pp(),fo||(ho(),fo=!0),Zl.add(n,t)}var ho;function Pp(){var n=B.Promise.resolve(void 0);ho=function(){n.then(Mp)}}var fo=!1,Zl=new Rp;function Mp(){for(var n;n=kp();){try{n.h.call(n.g)}catch(e){Np(e)}var t=Jl;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}fo=!1}function is(n,t){At.call(this),this.h=n||1,this.g=t||B,this.j=Nt(this.kb,this),this.l=Date.now()}Lt(is,At);N=is.prototype;N.da=!1;N.S=null;N.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Pt(this,"tick"),this.da&&(sa(this),this.start()))}};N.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function sa(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}N.M=function(){is.Z.M.call(this),sa(this),delete this.g};function oa(n,t,e){if(typeof n=="function")e&&(n=Nt(n,e));else if(n&&typeof n.handleEvent=="function")n=Nt(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:B.setTimeout(n,t||0)}function tc(n){n.g=oa(()=>{n.g=null,n.i&&(n.i=!1,tc(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}class Lp extends en{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:tc(this)}M(){super.M(),this.g&&(B.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(n){en.call(this),this.h=n,this.g={}}Lt(Vi,en);var wu=[];function ec(n,t,e,i){Array.isArray(e)||(e&&(wu[0]=e.toString()),e=wu);for(var r=0;r<e.length;r++){var s=Kl(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function nc(n){Qo(n.g,function(t,e){this.g.hasOwnProperty(e)&&ta(t)},n),n.g={}}Vi.prototype.M=function(){Vi.Z.M.call(this),nc(this)};Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rs(){this.g=!0}rs.prototype.Aa=function(){this.g=!1};function Fp(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+`
`+e+`
`+o})}function Vp(n,t,e,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+`
`+e+`
`+s+" "+o})}function Mn(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+$p(n,e)+(i?" "+i:"")})}function Bp(n,t){n.info(function(){return"TIMEOUT: "+t})}rs.prototype.info=function(){};function $p(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e){for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return ia(e)}catch{return t}}var kn={},Eu=null;function ss(){return Eu=Eu||new At}kn.Ma="serverreachability";function ic(n){$t.call(this,kn.Ma,n)}Lt(ic,$t);function Bi(n){const t=ss();Pt(t,new ic(t))}kn.STAT_EVENT="statevent";function rc(n,t){$t.call(this,kn.STAT_EVENT,n),this.stat=t}Lt(rc,$t);function qt(n){const t=ss();Pt(t,new rc(t,n))}kn.Na="timingevent";function sc(n,t){$t.call(this,kn.Na,n),this.size=t}Lt(sc,$t);function rr(n,t){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){n()},t)}var os={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},oc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function aa(){}aa.prototype.h=null;function Tu(n){return n.h||(n.h=n.i())}function ac(){}var sr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ua(){$t.call(this,"d")}Lt(ua,$t);function la(){$t.call(this,"c")}Lt(la,$t);var po;function as(){}Lt(as,aa);as.prototype.g=function(){return new XMLHttpRequest};as.prototype.i=function(){return{}};po=new as;function or(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new Vi(this),this.P=Up,n=ao?125:void 0,this.W=new is(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new uc}function uc(){this.i=null,this.g="",this.h=!1}var Up=45e3,go={},Lr={};N=or.prototype;N.setTimeout=function(n){this.P=n};function mo(n,t,e){n.K=1,n.v=ls(Pe(t)),n.s=e,n.U=!0,lc(n,null)}function lc(n,t){n.F=Date.now(),ar(n),n.A=Pe(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),mc(e.h,"t",i),n.C=0,e=n.l.H,n.h=new uc,n.g=Lc(n.l,e?t:null,!n.s),0<n.O&&(n.L=new Lp(Nt(n.Ia,n,n.g),n.O)),ec(n.V,n.g,"readystatechange",n.gb),t=n.H?zl(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Bi(),Fp(n.j,n.u,n.A,n.m,n.X,n.s)}N.gb=function(n){n=n.target;const t=this.L;t&&ke(n)==3?t.l():this.Ia(n)};N.Ia=function(n){try{if(n==this.g)t:{const c=ke(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||ao||this.g&&(this.h.h||this.g.ga()||Au(this.g)))){this.I||c!=4||t==7||(t==8||0>=h?Bi(3):Bi(2)),us(this);var e=this.g.ba();this.N=e;e:if(cc(this)){var i=Au(this.g);n="";var r=i.length,s=ke(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),bi(this);var o="";break e}this.h.i=new B.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=e==200,Vp(this.j,this.u,this.A,this.m,this.X,c,e),this.i){if(this.$&&!this.J){e:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pr(a)){var l=a;break e}}l=null}if(e=l)Mn(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yo(this,e);else{this.i=!1,this.o=3,qt(12),cn(this),bi(this);break t}}this.U?(hc(this,c,o),ao&&this.i&&c==3&&(ec(this.V,this.W,"tick",this.fb),this.W.start())):(Mn(this.j,this.m,o,null),yo(this,o)),c==4&&cn(this),this.i&&!this.I&&(c==4?Oc(this.l,this):(this.i=!1,ar(this)))}else e==400&&0<o.indexOf("Unknown SID")?(this.o=3,qt(12)):(this.o=0,qt(13)),cn(this),bi(this)}}}catch{}finally{}};function cc(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Ba:!1}function hc(n,t,e){let i=!0,r;for(;!n.I&&n.C<e.length;)if(r=zp(n,e),r==Lr){t==4&&(n.o=4,qt(14),i=!1),Mn(n.j,n.m,null,"[Incomplete Response]");break}else if(r==go){n.o=4,qt(15),Mn(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}else Mn(n.j,n.m,r,null),yo(n,r);cc(n)&&r!=Lr&&r!=go&&(n.h.g="",n.C=0),t!=4||e.length!=0||n.h.h||(n.o=1,qt(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,t=n.l,t.g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),_a(t),t.L=!0,qt(11))):(Mn(n.j,n.m,e,"[Invalid Chunked Response]"),cn(n),bi(n))}N.fb=function(){if(this.g){var n=ke(this.g),t=this.g.ga();this.C<t.length&&(us(this),hc(this,n,t),this.i&&n!=4&&ar(this))}};function zp(n,t){var e=n.C,i=t.indexOf(`
`,e);return i==-1?Lr:(e=Number(t.substring(e,i)),isNaN(e)?go:(i+=1,i+e>t.length?Lr:(t=t.substr(i,e),n.C=i+e,t)))}N.cancel=function(){this.I=!0,cn(this)};function ar(n){n.Y=Date.now()+n.P,fc(n,n.P)}function fc(n,t){if(n.B!=null)throw Error("WatchDog timer not null");n.B=rr(Nt(n.eb,n),t)}function us(n){n.B&&(B.clearTimeout(n.B),n.B=null)}N.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(Bp(this.j,this.A),this.K!=2&&(Bi(),qt(17)),cn(this),this.o=2,bi(this)):fc(this,this.Y-n)};function bi(n){n.l.G==0||n.I||Oc(n.l,n)}function cn(n){us(n);var t=n.L;t&&typeof t.na=="function"&&t.na(),n.L=null,sa(n.W),nc(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function yo(n,t){try{var e=n.l;if(e.G!=0&&(e.g==n||_o(e.i,n))){if(e.I=n.N,!n.J&&_o(e.i,n)&&e.G==3){try{var i=e.Ca.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){t:if(!e.u){if(e.g)if(e.g.F+3e3<n.F)$r(e),fs(e);else break t;ya(e),qt(18)}}else e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&e.A==0&&!e.v&&(e.v=rr(Nt(e.ab,e),6e3));if(1>=vc(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else hn(e,11)}else if((n.J||e.g==n)&&$r(e),!Pr(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(e.U=l[0],l=l[1],e.G==2)if(l[0]=="c"){e.J=l[1],e.la=l[2];const c=l[3];c!=null&&(e.ma=c,e.h.info("VER="+e.ma));const h=l[4];h!=null&&(e.za=h,e.h.info("SVER="+e.za));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,e.K=i,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const f=n.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=i.i;!s.g&&(zt(g,"spdy")||zt(g,"quic")||zt(g,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(fa(s,s.h),s.h=null))}if(i.D){const p=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(i.sa=p,lt(i.F,i.D,p))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms")),i=e;var o=n;if(i.oa=Mc(i,i.H?i.la:null,i.W),o.J){wc(i.i,o);var a=o,u=i.K;u&&a.setTimeout(u),a.B&&(us(a),ar(a)),i.g=o}else kc(i);0<e.l.length&&ds(e)}else l[0]!="stop"&&l[0]!="close"||hn(e,7);else e.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?hn(e,7):ma(e):l[0]!="noop"&&e.j&&e.j.wa(l),e.A=0)}}Bi(4)}catch{}}function jp(n){if(n.R&&typeof n.R=="function")return n.R();if(typeof n=="string")return n.split("");if(oo(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}t=[],e=0;for(i in n)t[e++]=n[i];return t}function ca(n,t){if(n.forEach&&typeof n.forEach=="function")n.forEach(t,void 0);else if(oo(n)||typeof n=="string")Ul(n,t,void 0);else{if(n.T&&typeof n.T=="function")var e=n.T();else if(n.R&&typeof n.R=="function")e=void 0;else if(oo(n)||typeof n=="string"){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=jp(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function li(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof li)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}N=li.prototype;N.R=function(){ha(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n};N.T=function(){return ha(this),this.g.concat()};function ha(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];bn(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)i=n.g[t],bn(r,i)||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}N.get=function(n,t){return bn(this.h,n)?this.h[n]:t};N.set=function(n,t){bn(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t};N.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};function bn(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var dc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qp(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Cn(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Cn){this.g=t!==void 0?t:n.g,Fr(this,n.j),this.s=n.s,Vr(this,n.i),Br(this,n.m),this.l=n.l,t=n.h;var e=new $i;e.i=t.i,t.g&&(e.g=new li(t.g),e.h=t.h),Su(this,e),this.o=n.o}else n&&(e=String(n).match(dc))?(this.g=!!t,Fr(this,e[1]||"",!0),this.s=Ci(e[2]||""),Vr(this,e[3]||"",!0),Br(this,e[4]),this.l=Ci(e[5]||"",!0),Su(this,e[6]||"",!0),this.o=Ci(e[7]||"")):(this.g=!!t,this.h=new $i(null,this.g))}Cn.prototype.toString=function(){var n=[],t=this.j;t&&n.push(vi(t,bu,!0),":");var e=this.i;return(e||t=="file")&&(n.push("//"),(t=this.s)&&n.push(vi(t,bu,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e=this.m,e!=null&&n.push(":",String(e))),(e=this.l)&&(this.i&&e.charAt(0)!="/"&&n.push("/"),n.push(vi(e,e.charAt(0)=="/"?Xp:Wp,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",vi(e,Qp)),n.join("")};function Pe(n){return new Cn(n)}function Fr(n,t,e){n.j=e?Ci(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Vr(n,t,e){n.i=e?Ci(t,!0):t}function Br(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Su(n,t,e){t instanceof $i?(n.h=t,Jp(n.h,n.g)):(e||(t=vi(t,Yp)),n.h=new $i(t,n.g))}function lt(n,t,e){n.h.set(t,e)}function ls(n){return lt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Gp(n){return n instanceof Cn?Pe(n):new Cn(n,void 0)}function Hp(n,t,e,i){var r=new Cn(null,void 0);return n&&Fr(r,n),t&&Vr(r,t),e&&Br(r,e),i&&(r.l=i),r}function Ci(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vi(n,t,e){return typeof n=="string"?(n=encodeURI(n).replace(t,Kp),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kp(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var bu=/[#\/\?@]/g,Wp=/[#\?:]/g,Xp=/[#\?]/g,Yp=/[#\?@]/g,Qp=/#/g;function $i(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function nn(n){n.g||(n.g=new li,n.h=0,n.i&&qp(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}N=$i.prototype;N.add=function(n,t){nn(this),this.i=null,n=ci(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this};function pc(n,t){nn(n),t=ci(n,t),bn(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,n=n.g,bn(n.h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&ha(n)))}function gc(n,t){return nn(n),t=ci(n,t),bn(n.g.h,t)}N.forEach=function(n,t){nn(this),this.g.forEach(function(e,i){Ul(e,function(r){n.call(t,r,i,this)},this)},this)};N.T=function(){nn(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e};N.R=function(n){nn(this);var t=[];if(typeof n=="string")gc(this,n)&&(t=pu(t,this.g.get(ci(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=pu(t,n[e])}return t};N.set=function(n,t){return nn(this),this.i=null,n=ci(this,n),gc(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this};N.get=function(n,t){return n?(n=this.R(n),0<n.length?String(n[0]):t):t};function mc(n,t,e){pc(n,t),0<e.length&&(n.i=null,n.g.set(ci(n,t),Yo(e)),n.h+=e.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;i[s]!==""&&(o+="="+encodeURIComponent(String(i[s]))),n.push(o)}}return this.i=n.join("&")};function ci(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function Jp(n,t){t&&!n.j&&(nn(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(pc(this,i),mc(this,r,e))},n)),n.j=t}var Zp=class{constructor(n,t){this.h=n,this.g=t}};function yc(n){this.l=n||tg,B.PerformanceNavigationTiming?(n=B.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(B.g&&B.g.Ea&&B.g.Ea()&&B.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tg=10;function _c(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function vc(n){return n.h?1:n.g?n.g.size:0}function _o(n,t){return n.h?n.h==t:n.g?n.g.has(t):!1}function fa(n,t){n.g?n.g.add(t):n.h=t}function wc(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}yc.prototype.cancel=function(){if(this.i=Ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function Ec(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return Yo(n.i)}function da(){}da.prototype.stringify=function(n){return B.JSON.stringify(n,void 0)};da.prototype.parse=function(n){return B.JSON.parse(n,void 0)};function eg(){this.g=new da}function ng(n,t,e){const i=e||"";try{ca(n,function(r,s){let o=r;nr(r)&&(o=ia(r)),t.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function ig(n,t){const e=new rs;if(B.Image){const i=new Image;i.onload=_r(wr,e,i,"TestLoadImage: loaded",!0,t),i.onerror=_r(wr,e,i,"TestLoadImage: error",!1,t),i.onabort=_r(wr,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=_r(wr,e,i,"TestLoadImage: timeout",!1,t),B.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}function wr(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function ur(n){this.l=n.$b||null,this.j=n.ib||!1}Lt(ur,aa);ur.prototype.g=function(){return new cs(this.l,this.j)};ur.prototype.i=function(n){return function(){return n}}({});function cs(n,t){At.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=pa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lt(cs,At);var pa=0;N=cs.prototype;N.open=function(n,t){if(this.readyState!=pa)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Ui(this)};N.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||B).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=pa};N.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof B.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tc(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))};function Tc(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}N.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?lr(this):Ui(this),this.readyState==3&&Tc(this)}};N.Ua=function(n){this.g&&(this.response=this.responseText=n,lr(this))};N.Ta=function(n){this.g&&(this.response=n,lr(this))};N.ha=function(){this.g&&lr(this)};function lr(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ui(n)}N.setRequestHeader=function(n,t){this.v.append(n,t)};N.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)e=e.value,n.push(e[0]+": "+e[1]),e=t.next();return n.join(`\r
`)};function Ui(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var rg=B.JSON.parse;function St(n){At.call(this),this.headers=new li,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sc,this.K=this.L=!1}Lt(St,At);var Sc="",sg=/^https?$/i,og=["POST","PUT"];N=St.prototype;N.ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():po.g(),this.C=this.u?Tu(this.u):Tu(po),this.g.onreadystatechange=Nt(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){Cu(this,s);return}n=e||"";const r=new li(this.headers);i&&ca(i,function(s,o){r.set(o,s)}),i=yp(r.T()),e=B.FormData&&n instanceof B.FormData,!(0<=$l(og,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ac(this),0<this.B&&((this.K=ag(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nt(this.pa,this)):this.A=oa(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Cu(this,s)}};function ag(n){return Gn&&Tp()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}function ug(n){return n.toLowerCase()=="content-type"}N.pa=function(){typeof Xo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pt(this,"timeout"),this.abort(8))};function Cu(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,bc(n),hs(n)}function bc(n){n.D||(n.D=!0,Pt(n,"complete"),Pt(n,"error"))}N.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pt(this,"complete"),Pt(this,"abort"),hs(this))};N.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hs(this,!0)),St.Z.M.call(this)};N.Fa=function(){this.s||(this.F||this.v||this.l?Cc(this):this.cb())};N.cb=function(){Cc(this)};function Cc(n){if(n.h&&typeof Xo<"u"&&(!n.C[1]||ke(n)!=4||n.ba()!=2)){if(n.v&&ke(n)==4)oa(n.Fa,0,n);else if(Pt(n,"readystatechange"),ke(n)==4){n.h=!1;try{const a=n.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var e;if(!(e=t)){var i;if(i=a===0){var r=String(n.H).match(dc)[1]||null;if(!r&&B.self&&B.self.location){var s=B.self.location.protocol;r=s.substr(0,s.length-1)}i=!sg.test(r?r.toLowerCase():"")}e=i}if(e)Pt(n,"complete"),Pt(n,"success");else{n.m=6;try{var o=2<ke(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.ba()+"]",bc(n)}}finally{hs(n)}}}}function hs(n,t){if(n.g){Ac(n);const e=n.g,i=n.C[0]?Nr:null;n.g=null,n.C=null,t||Pt(n,"ready");try{e.onreadystatechange=i}catch{}}}function Ac(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(B.clearTimeout(n.A),n.A=null)}function ke(n){return n.g?n.g.readyState:0}N.ba=function(){try{return 2<ke(this)?this.g.status:-1}catch{return-1}};N.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&t.indexOf(n)==0&&(t=t.substring(n.length)),rg(t)}};function Au(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Sc:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}N.Da=function(){return this.m};N.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function lg(n){let t="";return Qo(n,function(e,i){t+=i,t+=":",t+=e,t+=`\r
`}),t}function ga(n,t,e){t:{for(i in e){var i=!1;break t}i=!0}i||(e=lg(e),typeof n=="string"?e!=null&&encodeURIComponent(String(e)):lt(n,t,e))}function mi(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function Ic(n){this.za=0,this.l=[],this.h=new rs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mi("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mi("baseRetryDelayMs",5e3,n),this.$a=mi("retryDelaySeedMs",1e4,n),this.Ya=mi("forwardChannelMaxRetries",2,n),this.ra=mi("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new yc(n&&n.concurrentRequestLimit),this.Ca=new eg,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||n.Xb!==!1}N=Ic.prototype;N.ma=8;N.G=1;function ma(n){if(Dc(n),n.G==3){var t=n.V++,e=Pe(n.F);lt(e,"SID",n.J),lt(e,"RID",t),lt(e,"TYPE","terminate"),cr(n,e),t=new or(n,n.h,t,void 0),t.K=2,t.v=ls(Pe(e)),e=!1,B.navigator&&B.navigator.sendBeacon&&(e=B.navigator.sendBeacon(t.v.toString(),"")),!e&&B.Image&&(new Image().src=t.v,e=!0),e||(t.g=Lc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ar(t)}Pc(n)}N.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}};function fs(n){n.g&&(_a(n),n.g.cancel(),n.g=null)}function Dc(n){fs(n),n.u&&(B.clearTimeout(n.u),n.u=null),$r(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&B.clearTimeout(n.m),n.m=null)}function Vs(n,t){n.l.push(new Zp(n.Za++,t)),n.G==3&&ds(n)}function ds(n){_c(n.i)||n.m||(n.m=!0,ra(n.Ha,n),n.C=0)}function cg(n,t){return vc(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.l=t.D.concat(n.l),!0):n.G==1||n.G==2||n.C>=(n.Xa?0:n.Ya)?!1:(n.m=rr(Nt(n.Ha,n,t),Nc(n,n.C)),n.C++,!0)}N.Ha=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new or(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=zl(s),jl(s,this.P)):s=this.P),this.o===null&&(r.H=s),this.ja)t:{for(var t=0,e=0;e<this.l.length;e++){e:{var i=this.l[e];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break e}i=void 0}if(i===void 0)break;if(t+=i,4096<t){t=e;break t}if(t===4096||e===this.l.length-1){t=e+1;break t}}t=1e3}else t=1e3;t=xc(this,r,t),e=Pe(this.F),lt(e,"RID",n),lt(e,"CVER",22),this.D&&lt(e,"X-HTTP-Session-Id",this.D),cr(this,e),this.o&&s&&ga(e,this.o,s),fa(this.i,r),this.Ra&&lt(e,"TYPE","init"),this.ja?(lt(e,"$req",t),lt(e,"SID","null"),r.$=!0,mo(r,e,null)):mo(r,e,t),this.G=2}}else this.G==3&&(n?Iu(this,n):this.l.length==0||_c(this.i)||Iu(this))};function Iu(n,t){var e;t?e=t.m:e=n.V++;const i=Pe(n.F);lt(i,"SID",n.J),lt(i,"RID",e),lt(i,"AID",n.U),cr(n,i),n.o&&n.s&&ga(i,n.o,n.s),e=new or(n,n.h,e,n.C+1),n.o===null&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=xc(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),fa(n.i,e),mo(e,i,t)}function cr(n,t){n.j&&ca({},function(e,i){lt(t,i,e)})}function xc(n,t,e){e=Math.min(n.l.length,e);var i=n.j?Nt(n.j.Oa,n.j,n):null;t:{var r=n.l;let s=-1;for(;;){const o=["count="+e];s==-1?0<e?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<e;u++){let l=r[u].h;const c=r[u].g;if(l-=s,0>l)s=Math.max(0,r[u].h-100),a=!1;else try{ng(c,o,"req"+l+"_")}catch{i&&i(c)}}if(a){i=o.join("&");break t}}}return n=n.l.splice(0,e),t.D=n,i}function kc(n){n.g||n.u||(n.Y=1,ra(n.Ga,n),n.A=0)}function ya(n){return n.g||n.u||3<=n.A?!1:(n.Y++,n.u=rr(Nt(n.Ga,n),Nc(n,n.A)),n.A++,!0)}N.Ga=function(){if(this.u=null,Rc(this),this.$&&!(this.L||this.g==null||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=rr(Nt(this.bb,this),n)}};N.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qt(10),fs(this),Rc(this))};function _a(n){n.B!=null&&(B.clearTimeout(n.B),n.B=null)}function Rc(n){n.g=new or(n,n.h,"rpc",n.Y),n.o===null&&(n.g.H=n.s),n.g.O=0;var t=Pe(n.oa);lt(t,"RID","rpc"),lt(t,"SID",n.J),lt(t,"CI",n.N?"0":"1"),lt(t,"AID",n.U),cr(n,t),lt(t,"TYPE","xmlhttp"),n.o&&n.s&&ga(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=ls(Pe(t)),e.s=null,e.U=!0,lc(e,n)}N.ab=function(){this.v!=null&&(this.v=null,fs(this),ya(this),qt(19))};function $r(n){n.v!=null&&(B.clearTimeout(n.v),n.v=null)}function Oc(n,t){var e=null;if(n.g==t){$r(n),_a(n),n.g=null;var i=2}else if(_o(n.i,t))e=t.D,wc(n.i,t),i=1;else return;if(n.I=t.N,n.G!=0){if(t.i)if(i==1){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;i=ss(),Pt(i,new sc(i,e)),ds(n)}else kc(n);else if(r=t.o,r==3||r==0&&0<n.I||!(i==1&&cg(n,t)||i==2&&ya(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:hn(n,5);break;case 4:hn(n,10);break;case 3:hn(n,6);break;default:hn(n,2)}}}function Nc(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function hn(n,t){if(n.h.info("Error code "+t),t==2){var e=null;n.j&&(e=null);var i=Nt(n.jb,n);e||(e=new Cn("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||Fr(e,"https"),ls(e)),ig(e.toString(),i)}else qt(2);n.G=0,n.j&&n.j.va(t),Pc(n),Dc(n)}N.jb=function(n){n?(this.h.info("Successfully pinged google.com"),qt(2)):(this.h.info("Failed to ping google.com"),qt(1))};function Pc(n){n.G=0,n.I=-1,n.j&&((Ec(n.i).length!=0||n.l.length!=0)&&(n.i.i.length=0,Yo(n.l),n.l.length=0),n.j.ua())}function Mc(n,t,e){let i=Gp(e);if(i.i!="")t&&Vr(i,t+"."+i.i),Br(i,i.m);else{const r=B.location;i=Hp(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&Qo(n.aa,function(r,s){lt(i,s,r)}),t=n.D,e=n.sa,t&&e&&lt(i,t,e),lt(i,"VER",n.ma),cr(n,i),i}function Lc(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=e&&n.Ba&&!n.qa?new St(new ur({ib:!0})):new St(n.qa),t.L=n.H,t}function Fc(){}N=Fc.prototype;N.xa=function(){};N.wa=function(){};N.va=function(){};N.ua=function(){};N.Oa=function(){};function Ur(){if(Gn&&!(10<=Number(Sp)))throw Error("Environmental error: no available transport.")}Ur.prototype.g=function(n,t){return new oe(n,t)};function oe(n,t){At.call(this),this.g=new Ic(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Pr(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pr(t)&&(this.g.D=t,n=this.h,n!==null&&t in n&&(n=this.h,t in n&&delete n[t])),this.j=new hi(this)}Lt(oe,At);oe.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ra(Nt(n.hb,n,t))),qt(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=Mc(n,null,n.W),ds(n)};oe.prototype.close=function(){ma(this.g)};oe.prototype.u=function(n){if(typeof n=="string"){var t={};t.__data__=n,Vs(this.g,t)}else this.v?(t={},t.__data__=ia(n),Vs(this.g,t)):Vs(this.g,n)};oe.prototype.M=function(){this.g.j=null,delete this.j,ma(this.g),delete this.g,oe.Z.M.call(this)};function Vc(n){ua.call(this);var t=n.__sm__;if(t){t:{for(const e in t){n=e;break t}n=void 0}(this.i=n)&&(n=this.i,t=t!==null&&n in t?t[n]:void 0),this.data=t}else this.data=n}Lt(Vc,ua);function Bc(){la.call(this),this.status=1}Lt(Bc,la);function hi(n){this.g=n}Lt(hi,Fc);hi.prototype.xa=function(){Pt(this.g,"a")};hi.prototype.wa=function(n){Pt(this.g,new Vc(n))};hi.prototype.va=function(n){Pt(this.g,new Bc)};hi.prototype.ua=function(){Pt(this.g,"b")};Ur.prototype.createWebChannel=Ur.prototype.g;oe.prototype.send=oe.prototype.u;oe.prototype.open=oe.prototype.m;oe.prototype.close=oe.prototype.close;os.NO_ERROR=0;os.TIMEOUT=8;os.HTTP_ERROR=6;oc.COMPLETE="complete";ac.EventType=sr;sr.OPEN="a";sr.CLOSE="b";sr.ERROR="c";sr.MESSAGE="d";At.prototype.listen=At.prototype.N;St.prototype.listenOnce=St.prototype.O;St.prototype.getLastError=St.prototype.La;St.prototype.getLastErrorCode=St.prototype.Da;St.prototype.getStatus=St.prototype.ba;St.prototype.getResponseJson=St.prototype.Qa;St.prototype.getResponseText=St.prototype.ga;St.prototype.send=St.prototype.ea;var hg=function(){return new Ur},fg=function(){return ss()},Bs=os,dg=oc,pg=kn,Du={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gg=ur,Er=ac,mg=St;const xu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new Pl("@firebase/firestore");function ku(){return An.logLevel}function M(n,...t){if(An.logLevel<=nt.DEBUG){const e=t.map(va);An.debug(`Firestore (${fi}): ${n}`,...e)}}function Me(n,...t){if(An.logLevel<=nt.ERROR){const e=t.map(va);An.error(`Firestore (${fi}): ${n}`,...e)}}function Ru(n,...t){if(An.logLevel<=nt.WARN){const e=t.map(va);An.warn(`Firestore (${fi}): ${n}`,...e)}}function va(n){if(typeof n=="string")return n;try{return t=n,JSON.stringify(t)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(n="Unexpected state"){const t=`FIRESTORE (${fi}) INTERNAL ASSERTION FAILED: `+n;throw Me(t),new Error(t)}function Tt(n,t){n||H()}function J(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends ui{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _g{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Kt.UNAUTHENTICATED))}shutdown(){}}class vg{constructor(t){this.t=t,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i;const r=u=>this.i!==i?(i=this.i,e(u)):Promise.resolve();let s=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gn,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},a=u=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gn)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string"),new yg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Tt(t===null||typeof t=="string"),new Kt(t)}}class wg{constructor(t,e,i){this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class Eg{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new wg(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tg{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sg{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Tt(typeof e.token=="string"),this.p=e.token,new Tg(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=bg(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function it(n,t){return n<t?-1:n>t?1:0}function Hn(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Yt.fromMillis(Date.now())}static fromDate(t){return Yt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Yt(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?it(this.nanoseconds,t.nanoseconds):it(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.timestamp=t}static fromTimestamp(t){return new G(t)}static min(){return new G(new Yt(0,0))}static max(){return new G(new Yt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,e,i){e===void 0?e=0:e>t.length&&H(),i===void 0?i=t.length-e:i>t.length-e&&H(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return zi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof zi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class dt extends zi{construct(t,e,i){return new dt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new $(O.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new dt(e)}static emptyPath(){return new dt([])}}const Cg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends zi{construct(t,e,i){return new Wt(t,e,i)}static isValidIdentifier(t){return Cg.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(i.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new $(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new $(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wt(e)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.path=t}static fromPath(t){return new L(dt.fromString(t))}static fromName(t){return new L(dt.fromString(t).popFirst(5))}static empty(){return new L(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&dt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return dt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new L(new dt(t.slice()))}}function Ag(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=G.fromTimestamp(i===1e9?new Yt(e+1,0):new Yt(e,i));return new He(r,L.empty(),t)}function Ig(n){return new He(n.readTime,n.key,-1)}class He{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new He(G.min(),L.empty(),-1)}static max(){return new He(G.max(),L.empty(),-1)}}function Dg(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=L.comparator(n.documentKey,t.documentKey),e!==0?e:it(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(n){if(n.code!==O.FAILED_PRECONDITION||n.message!==xg)throw n;M("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new I((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof I?e:I.resolve(e)}catch(e){return I.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):I.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):I.reject(e)}static resolve(t){return new I((e,i)=>{e(t)})}static reject(t){return new I((e,i)=>{i(t)})}static waitFor(t){return new I((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},u=>i(u))}),o=!0,s===r&&e()})}static or(t){let e=I.resolve(!1);for(const i of t)e=e.next(r=>r?I.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new I((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;e(t[l]).next(c=>{o[l]=c,++a,a===s&&i(o)},c=>r(c))}})}static doWhile(t,e){return new I((i,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}}function hr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.it(i),this.rt=i=>e.writeSequenceNumber(i))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ps(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Rg(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ea.ot=-1;class It{constructor(t,e){this.comparator=t,this.root=e||xt.EMPTY}insert(t,e){return new It(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(t){return new It(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Tr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Tr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Tr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Tr(this.root,t,this.comparator,!0)}}class Tr{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xt{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i!=null?i:xt.RED,this.left=r!=null?r:xt.EMPTY,this.right=s!=null?s:xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new xt(t!=null?t:this.key,e!=null?e:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return xt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const t=this.left.check();if(t!==this.right.check())throw H();return t+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(n,t,e,i,r){return this}insert(n,t,e){return new xt(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.comparator=t,this.data=new It(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(t){return new Nu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof bt)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new bt(this.comparator);return e.data=t,e}}class Nu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.fields=t,t.sort(Wt.comparator)}static empty(){return new mn([])}unionWith(t){let e=new bt(Wt.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new mn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Hn(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Mt(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Mt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return it(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const Og=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ke(n){if(Tt(!!n),typeof n=="string"){let t=0;const e=Og.exec(n);if(Tt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kn(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function zc(n){const t=n.mapValue.fields.__previous_value__;return Uc(t)?zc(t):t}function ji(n){const t=Ke(n.mapValue.fields.__local_write_time__.timestampValue);return new Yt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t,e,i,r,s,o,a,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Wn{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Wn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Wn&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n){return n==null}function vo(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function In(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uc(n)?4:Pg(n)?9007199254740991:10:H()}function Ce(n,t){if(n===t)return!0;const e=In(n);if(e!==In(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ji(n).isEqual(ji(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ke(i.timestampValue),o=Ke(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,r){return Kn(i.bytesValue).isEqual(Kn(r.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return vt(i.geoPointValue.latitude)===vt(r.geoPointValue.latitude)&&vt(i.geoPointValue.longitude)===vt(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return vt(i.integerValue)===vt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=vt(i.doubleValue),o=vt(r.doubleValue);return s===o?vo(s)===vo(o):isNaN(s)&&isNaN(o)}return!1}(n,t);case 9:return Hn(n.arrayValue.values||[],t.arrayValue.values||[],Ce);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(Ou(s)!==Ou(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Ce(s[a],o[a])))return!1;return!0}(n,t);default:return H()}}function qi(n,t){return(n.values||[]).find(e=>Ce(e,t))!==void 0}function Xn(n,t){if(n===t)return 0;const e=In(n),i=In(t);if(e!==i)return it(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,t.booleanValue);case 2:return function(r,s){const o=vt(r.integerValue||r.doubleValue),a=vt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,t);case 3:return Pu(n.timestampValue,t.timestampValue);case 4:return Pu(ji(n),ji(t));case 5:return it(n.stringValue,t.stringValue);case 6:return function(r,s){const o=Kn(r),a=Kn(s);return o.compareTo(a)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const l=it(o[u],a[u]);if(l!==0)return l}return it(o.length,a.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const o=it(vt(r.latitude),vt(s.latitude));return o!==0?o:it(vt(r.longitude),vt(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const l=Xn(o[u],a[u]);if(l)return l}return it(o.length,a.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Sr.mapValue&&s===Sr.mapValue)return 0;if(r===Sr.mapValue)return 1;if(s===Sr.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),u=s.fields||{},l=Object.keys(u);a.sort(),l.sort();for(let c=0;c<a.length&&c<l.length;++c){const h=it(a[c],l[c]);if(h!==0)return h;const d=Xn(o[a[c]],u[l[c]]);if(d!==0)return d}return it(a.length,l.length)}(n.mapValue,t.mapValue);default:throw H()}}function Pu(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return it(n,t);const e=Ke(n),i=Ke(t),r=it(e.seconds,i.seconds);return r!==0?r:it(e.nanos,i.nanos)}function $n(n){return wo(n)}function wo(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ke(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Kn(n.bytesValue).toBase64():"referenceValue"in n?(e=n.referenceValue,L.fromName(e).toString()):"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=wo(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${wo(i.fields[a])}`;return s+"}"}(n.mapValue):H();var t,e}function Eo(n){return!!n&&"integerValue"in n}function Ta(n){return!!n&&"arrayValue"in n}function Mu(n){return!!n&&"nullValue"in n}function Lu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $s(n){return!!n&&"mapValue"in n}function Ai(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ps(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Ai(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ai(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Pg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.value=t}static empty(){return new Ee({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!$s(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ai(e)}setAll(t){let e=Wt.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const u=this.getFieldsMap(e);this.applyChanges(u,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=Ai(o):r.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());$s(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ce(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];$s(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){ps(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ee(Ai(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t,e,i,r,s,o){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new kt(t,0,G.min(),G.min(),Ee.empty(),0)}static newFoundDocument(t,e,i){return new kt(t,1,e,G.min(),i,0)}static newNoDocument(t,e){return new kt(t,2,e,G.min(),Ee.empty(),0)}static newUnknownDocument(t,e){return new kt(t,3,e,G.min(),Ee.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ee.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ee.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof kt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function Fu(n,t=null,e=[],i=[],r=null,s=null,o=null){return new Mg(n,t,e,i,r,s,o)}function Sa(n){const t=J(n);if(t.ut===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+$n(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),gs(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>$n(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>$n(i)).join(",")),t.ut=e}return t.ut}function Lg(n){let t=n.path.canonicalString();return n.collectionGroup!==null&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${$n(i.value)}`;var i}).join(", ")}]`),gs(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(e)).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>$n(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>$n(e)).join(",")),`Target(${t})`}function ba(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!qg(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(e=n.filters[r],i=t.filters[r],e.op!==i.op||!e.field.isEqual(i.field)||!Ce(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Bu(n.startAt,t.startAt)&&Bu(n.endAt,t.endAt)}function To(n){return L.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Xt extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.ct(t,e,i):new Fg(t,e,i):e==="array-contains"?new $g(t,i):e==="in"?new Ug(t,i):e==="not-in"?new zg(t,i):e==="array-contains-any"?new jg(t,i):new Xt(t,e,i)}static ct(t,e,i){return e==="in"?new Vg(t,i):new Bg(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.at(Xn(e,this.value)):e!==null&&In(this.value)===In(e)&&this.at(Xn(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return H()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Fg extends Xt{constructor(t,e,i){super(t,e,i),this.key=L.fromName(i.referenceValue)}matches(t){const e=L.comparator(t.key,this.key);return this.at(e)}}class Vg extends Xt{constructor(t,e){super(t,"in",e),this.keys=jc("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Bg extends Xt{constructor(t,e){super(t,"not-in",e),this.keys=jc("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function jc(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>L.fromName(i.referenceValue))}class $g extends Xt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ta(e)&&qi(e.arrayValue,this.value)}}class Ug extends Xt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&qi(this.value.arrayValue,e)}}class zg extends Xt{constructor(t,e){super(t,"not-in",e)}matches(t){if(qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!qi(this.value.arrayValue,e)}}class jg extends Xt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ta(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>qi(this.value.arrayValue,i))}}class zr{constructor(t,e){this.position=t,this.inclusive=e}}class Ii{constructor(t,e="asc"){this.field=t,this.dir=e}}function qg(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function Vu(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],o=n.position[r];if(s.field.isKeyField()?i=L.comparator(L.fromName(o.referenceValue),e.key):i=Xn(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Bu(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ce(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}}function Gg(n,t,e,i,r,s,o,a){return new ms(n,t,e,i,r,s,o,a)}function Ca(n){return new ms(n)}function $u(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Hg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Kg(n){for(const t of n.filters)if(t.ht())return t.field;return null}function Wg(n){return n.collectionGroup!==null}function Gi(n){const t=J(n);if(t.lt===null){t.lt=[];const e=Kg(t),i=Hg(t);if(e!==null&&i===null)e.isKeyField()||t.lt.push(new Ii(e)),t.lt.push(new Ii(Wt.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Ii(Wt.keyField(),s))}}}return t.lt}function Le(n){const t=J(n);if(!t.ft)if(t.limitType==="F")t.ft=Fu(t.path,t.collectionGroup,Gi(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Gi(t)){const o=s.dir==="desc"?"asc":"desc";e.push(new Ii(s.field,o))}const i=t.endAt?new zr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zr(t.startAt.position,t.startAt.inclusive):null;t.ft=Fu(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.ft}function So(n,t,e){return new ms(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ys(n,t){return ba(Le(n),Le(t))&&n.limitType===t.limitType}function qc(n){return`${Sa(Le(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${Lg(Le(n))}; limitType=${n.limitType})`}function Aa(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return e.collectionGroup!==null?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):L.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&function(e,i){return!(e.startAt&&!function(r,s,o){const a=Vu(r,s,o);return r.inclusive?a<=0:a<0}(e.startAt,Gi(e),i)||e.endAt&&!function(r,s,o){const a=Vu(r,s,o);return r.inclusive?a>=0:a>0}(e.endAt,Gi(e),i))}(n,t)}function Xg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gc(n){return(t,e)=>{let i=!1;for(const r of Gi(n)){const s=Yg(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Yg(n,t,e){const i=n.field.isKeyField()?L.comparator(t.key,e.key):function(r,s,o){const a=s.data.field(r),u=o.data.field(r);return a!==null&&u!==null?Xn(a,u):H()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return H()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vo(t)?"-0":t}}function Jg(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this._=void 0}}function Zg(n,t,e){return n instanceof Co?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof jr?Hc(n,t):n instanceof qr?Kc(n,t):function(i,r){const s=em(i,r),o=Uu(s)+Uu(i._t);return Eo(s)&&Eo(i._t)?Jg(o):Qg(i.wt,o)}(n,t)}function tm(n,t,e){return n instanceof jr?Hc(n,t):n instanceof qr?Kc(n,t):e}function em(n,t){return n instanceof Ao?Eo(e=t)||function(i){return!!i&&"doubleValue"in i}(e)?t:{integerValue:0}:null;var e}class Co extends _s{}class jr extends _s{constructor(t){super(),this.elements=t}}function Hc(n,t){const e=Wc(t);for(const i of n.elements)e.some(r=>Ce(r,i))||e.push(i);return{arrayValue:{values:e}}}class qr extends _s{constructor(t){super(),this.elements=t}}function Kc(n,t){let e=Wc(t);for(const i of n.elements)e=e.filter(r=>!Ce(r,i));return{arrayValue:{values:e}}}class Ao extends _s{constructor(t,e){super(),this.wt=t,this._t=e}}function Uu(n){return vt(n.integerValue||n.doubleValue)}function Wc(n){return Ta(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nm(n,t){return n.field.isEqual(t.field)&&function(e,i){return e instanceof jr&&i instanceof jr||e instanceof qr&&i instanceof qr?Hn(e.elements,i.elements,Ce):e instanceof Ao&&i instanceof Ao?Ce(e._t,i._t):e instanceof Co&&i instanceof Co}(n.transform,t.transform)}class yn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new yn}static exists(t){return new yn(void 0,t)}static updateTime(t){return new yn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ir(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ia{}function Xc(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new rm(n.key,yn.none()):new Da(n.key,n.data,yn.none());{const e=n.data,i=Ee.empty();let r=new bt(Wt.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new vs(n.key,i,new mn(r.toArray()),yn.none())}}function im(n,t,e){n instanceof Da?function(i,r,s){const o=i.value.clone(),a=ju(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,t,e):n instanceof vs?function(i,r,s){if(!Ir(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=ju(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(Yc(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function Di(n,t,e,i){return n instanceof Da?function(r,s,o,a){if(!Ir(r.precondition,s))return o;const u=r.value.clone(),l=qu(r.fieldTransforms,a,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof vs?function(r,s,o,a){if(!Ir(r.precondition,s))return o;const u=qu(r.fieldTransforms,a,s),l=s.data;return l.setAll(Yc(r)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(c=>c.field))}(n,t,e,i):function(r,s,o){return Ir(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,t,e)}function zu(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(e,i){return e===void 0&&i===void 0||!(!e||!i)&&Hn(e,i,(r,s)=>nm(r,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Da extends Ia{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vs extends Ia{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Yc(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function ju(n,t,e){const i=new Map;Tt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,tm(o,a,e[r]))}return i}function qu(n,t,e){const i=new Map;for(const r of n){const s=r.transform,o=e.data.field(r.field);i.set(r.field,Zg(s,o,t))}return i}class rm extends Ia{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t){this.count=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,X;function Qc(n){if(n===void 0)return Me("GRPC error has no .code"),O.UNKNOWN;switch(n){case _t.OK:return O.OK;case _t.CANCELLED:return O.CANCELLED;case _t.UNKNOWN:return O.UNKNOWN;case _t.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case _t.INTERNAL:return O.INTERNAL;case _t.UNAVAILABLE:return O.UNAVAILABLE;case _t.UNAUTHENTICATED:return O.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case _t.NOT_FOUND:return O.NOT_FOUND;case _t.ALREADY_EXISTS:return O.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return O.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case _t.ABORTED:return O.ABORTED;case _t.OUT_OF_RANGE:return O.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return O.UNIMPLEMENTED;case _t.DATA_LOSS:return O.DATA_LOSS;default:return H()}}(X=_t||(_t={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ps(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Rg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=new It(L.comparator);function We(){return om}const Jc=new It(L.comparator);function wi(...n){let t=Jc;for(const e of n)t=t.insert(e.key,e);return t}function am(n){let t=Jc;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function fn(){return xi()}function Zc(){return xi()}function xi(){return new di(n=>n.toString(),(n,t)=>n.isEqual(t))}new It(L.comparator);const um=new bt(L.comparator);function Q(...n){let t=um;for(const e of n)t=t.add(e);return t}const lm=new bt(it);function th(){return lm}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,fr.createSynthesizedTargetChangeForCurrentChange(t,e)),new ws(G.min(),i,th(),We(),Q())}}class fr{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new fr(Mt.EMPTY_BYTE_STRING,e,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,e,i,r){this.gt=t,this.removedTargetIds=e,this.key=i,this.yt=r}}class eh{constructor(t,e){this.targetId=t,this.It=e}}class nh{constructor(t,e,i=Mt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class Gu{constructor(){this.Tt=0,this.Et=Ku(),this.At=Mt.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=Q(),e=Q(),i=Q();return this.Et.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:H()}}),new fr(this.At,this.Rt,t,e,i)}Dt(){this.bt=!1,this.Et=Ku()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class cm{constructor(t){this.Ot=t,this.Ft=new Map,this.$t=We(),this.Bt=Hu(),this.Lt=new bt(it)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const i=this.Qt(e);switch(t.state){case 0:this.jt(e)&&i.Vt(t.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(t.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(i.Mt(),i.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),i.Vt(t.resumeToken));break;default:H()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((i,r)=>{this.jt(r)&&e(r)})}zt(t){const e=t.targetId,i=t.It.count,r=this.Ht(e);if(r){const s=r.target;if(To(s))if(i===0){const o=new L(s.path);this.Kt(e,o,kt.newNoDocument(o,G.min()))}else Tt(i===1);else this.Jt(e)!==i&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&To(a.target)){const u=new L(a.target.path);this.$t.get(u)!==null||this.Xt(o,u)||this.Kt(o,u,kt.newNoDocument(u,t))}s.vt&&(e.set(o,s.St()),s.Dt())}});let i=Q();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ht(u);return!l||l.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(t));const r=new ws(t,e,this.Lt,this.$t,i);return this.$t=We(),this.Bt=Hu(),this.Lt=new bt(it),r}qt(t,e){if(!this.jt(t))return;const i=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,i),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,i){if(!this.jt(t))return;const r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),i&&(this.$t=this.$t.insert(e,i))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new Gu,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new bt(it),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=this.Ht(t)!==null;return e||M("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}Wt(t){this.Ft.set(t,new Gu),this.Ot.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}function Hu(){return new It(L.comparator)}function Ku(){return new It(L.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),fm=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class dm{constructor(t,e){this.databaseId=t,this.dt=e}}function pm(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gm(n,t){return n.dt?t.toBase64():t.toUint8Array()}function Hi(n){return Tt(!!n),G.fromTimestamp(function(t){const e=Ke(t);return new Yt(e.seconds,e.nanos)}(n))}function mm(n,t){return function(e){return new dt(["projects",e.projectId,"databases",e.database])}(n).child("documents").child(t).canonicalString()}function ih(n){const t=dt.fromString(n);return Tt(oh(t)),t}function Us(n,t){const e=ih(t);if(e.get(1)!==n.databaseId.projectId)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new L(rh(e))}function Io(n,t){return mm(n.databaseId,t)}function ym(n){const t=ih(n);return t.length===4?dt.emptyPath():rh(t)}function Wu(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rh(n){return Tt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _m(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:H()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(u,l){return u.dt?(Tt(l===void 0||typeof l=="string"),Mt.fromBase64String(l||"")):(Tt(l===void 0||l instanceof Uint8Array),Mt.fromUint8Array(l||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const l=u.code===void 0?O.UNKNOWN:Qc(u.code);return new $(l,u.message||"")}(o);e=new nh(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Us(n,i.document.name),s=Hi(i.document.updateTime),o=new Ee({mapValue:{fields:i.document.fields}}),a=kt.newFoundDocument(r,s,o),u=i.targetIds||[],l=i.removedTargetIds||[];e=new Dr(u,l,a.key,a)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Us(n,i.document),s=i.readTime?Hi(i.readTime):G.min(),o=kt.newNoDocument(r,s),a=i.removedTargetIds||[];e=new Dr([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Us(n,i.document),s=i.removedTargetIds||[];e=new Dr([],s,r,null)}else{if(!("filter"in t))return H();{t.filter;const i=t.filter;i.targetId;const r=i.count||0,s=new sm(r),o=i.targetId;e=new eh(o,s)}}return e}function vm(n,t){return{documents:[Io(n,t.path)]}}function wm(n,t){const e={structuredQuery:{}},i=t.path;t.collectionGroup!==null?(e.parent=Io(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=Io(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(u){if(u.length===0)return;const l=u.map(c=>function(h){if(h.op==="=="){if(Lu(h.value))return{unaryFilter:{field:Nn(h.field),op:"IS_NAN"}};if(Mu(h.value))return{unaryFilter:{field:Nn(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(Lu(h.value))return{unaryFilter:{field:Nn(h.field),op:"IS_NOT_NAN"}};if(Mu(h.value))return{unaryFilter:{field:Nn(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nn(h.field),op:bm(h.op),value:h.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(u){if(u.length!==0)return u.map(l=>function(c){return{field:Nn(c.field),direction:Sm(c.dir)}}(l))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const o=function(u,l){return u.dt||gs(l)?l:{value:l}}(n,t.limit);var a;return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),e}function Em(n){let t=ym(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Tt(i===1);const c=e.from[0];c.allDescendants?r=c.collectionId:t=t.child(c.collectionId)}let s=[];e.where&&(s=sh(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(c=>function(h){return new Ii(Ln(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;e.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,gs(h)?null:h}(e.limit));let u=null;e.startAt&&(u=function(c){const h=!!c.before,d=c.values||[];return new zr(d,h)}(e.startAt));let l=null;return e.endAt&&(l=function(c){const h=!c.before,d=c.values||[];return new zr(d,h)}(e.endAt)),Gg(t,r,o,s,a,"F",u,l)}function Tm(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return H()}}(0,t.purpose);return e==null?null:{"goog-listen-tags":e}}function sh(n){return n?n.unaryFilter!==void 0?[Am(n)]:n.fieldFilter!==void 0?[Cm(n)]:n.compositeFilter!==void 0?n.compositeFilter.filters.map(t=>sh(t)).reduce((t,e)=>t.concat(e)):H():[]}function Sm(n){return hm[n]}function bm(n){return fm[n]}function Nn(n){return{fieldPath:n.canonicalString()}}function Ln(n){return Wt.fromServerFormat(n.fieldPath)}function Cm(n){return Xt.create(Ln(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}function Am(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Ln(n.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Ln(n.unaryFilter.field);return Xt.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ln(n.unaryFilter.field);return Xt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ln(n.unaryFilter.field);return Xt.create(r,"!=",{nullValue:"NULL_VALUE"});default:return H()}}function oh(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&im(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Di(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Di(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=Zc();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;const u=Xc(o,a);u!==null&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(G.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Q())}isEqual(t){return this.batchId===t.batchId&&Hn(this.mutations,t.mutations,(e,i)=>zu(e,i))&&Hn(this.baseMutations,t.baseMutations,(e,i)=>zu(e,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,e,i,r,s=G.min(),o=G.min(),a=Mt.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(t){return new _n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t){this.ne=t}}function km(n){const t=Em({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?So(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.ze=new Om}addToCollectionParentIndex(t,e){return this.ze.add(e),I.resolve()}getCollectionParents(t,e){return I.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return I.resolve()}deleteFieldIndex(t,e){return I.resolve()}getDocumentsMatchingTarget(t,e){return I.resolve(null)}getIndexType(t,e){return I.resolve(0)}getFieldIndexes(t,e){return I.resolve([])}getNextCollectionGroupToUpdate(t){return I.resolve(null)}getMinOffset(t,e){return I.resolve(He.min())}getMinOffsetFromCollectionGroup(t,e){return I.resolve(He.min())}updateCollectionGroup(t,e,i){return I.resolve()}updateIndexEntries(t,e){return I.resolve()}}class Om{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new bt(dt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new bt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new Yn(0)}static Rn(){return new Yn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.changes=new di(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,kt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?I.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(i!==null&&Di(i.mutation,r,mn.empty(),Yt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Q()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Q()){const r=fn();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=wi();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=fn();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Q()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=We();const o=xi(),a=xi();return e.forEach((u,l)=>{const c=i.get(l.key);r.has(l.key)&&(c===void 0||c.mutation instanceof vs)?s=s.insert(l.key,l):c!==void 0&&(o.set(l.key,c.mutation.getFieldMask()),Di(c.mutation,l,c.mutation.getFieldMask(),Yt.now()))}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),e.forEach((l,c)=>{var h;return a.set(l,new Pm(c,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,e){const i=xi();let r=new It((o,a)=>o-a),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=e.get(u);if(l===null)return;let c=i.get(u)||mn.empty();c=a.applyToLocalView(l,c),i.set(u,c);const h=(r.get(a.batchId)||Q()).add(u);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=Zc();c.forEach(d=>{if(!s.has(d)){const f=Xc(e.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return I.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return function(r){return L.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Wg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):I.resolve(fn());let a=-1,u=s;return o.next(l=>I.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?I.resolve():this.getBaseDocument(t,c,h).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Q())).next(c=>({batchId:a,changes:am(c)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new L(e)).next(i=>{let r=wi();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=wi();return this.indexManager.getCollectionParents(t,r).next(o=>I.forEach(o,a=>{const u=function(l,c){return new ms(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e,a.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,i).next(l=>{l.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((a,u)=>{const l=u.getKey();r.get(l)===null&&(r=r.insert(l,kt.newInvalidDocument(l)))});let o=wi();return r.forEach((a,u)=>{const l=s.get(a);l!==void 0&&Di(l.mutation,u,mn.empty(),Yt.now()),Aa(e,u)&&(o=o.insert(a,u))}),o})}getBaseDocument(t,e,i){return i===null||i.mutation.type===1?this.remoteDocumentCache.getEntry(t,e):I.resolve(kt.newInvalidDocument(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return I.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var i;return this.Jn.set(e.id,{id:(i=e).id,version:i.version,createTime:Hi(i.createTime)}),I.resolve()}getNamedQuery(t,e){return I.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,function(i){return{name:i.name,query:km(i.bundledQuery),readTime:Hi(i.readTime)}}(e)),I.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.overlays=new It(L.comparator),this.Xn=new Map}getOverlay(t,e){return I.resolve(this.overlays.get(e))}getOverlays(t,e){const i=fn();return I.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ie(t,e,s)}),I.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Xn.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),I.resolve()}getOverlaysForCollection(t,e,i){const r=fn(),s=e.length+1,o=new L(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!e.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return I.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new It((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===e&&l.largestBatchId>i){let c=s.get(l.largestBatchId);c===null&&(c=fn(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=fn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=r)););return I.resolve(a)}ie(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Dm(e,i));let s=this.Xn.get(e);s===void 0&&(s=Q(),this.Xn.set(e,s)),this.Xn.set(e,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.Zn=new bt(Ct.ts),this.es=new bt(Ct.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const i=new Ct(t,e);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.rs(new Ct(t,e))}os(t,e){t.forEach(i=>this.removeReference(i,e))}us(t){const e=new L(new dt([])),i=new Ct(e,t),r=new Ct(e,t+1),s=[];return this.es.forEachInRange([i,r],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new L(new dt([])),i=new Ct(e,t),r=new Ct(e,t+1);let s=Q();return this.es.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Ct(t,0),i=this.Zn.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Ct{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return L.comparator(t.key,e.key)||it(t.ls,e.ls)}static ns(t,e){return it(t.ls,e.ls)||L.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new bt(Ct.ts)}checkEmpty(t){return I.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Im(s,e,i,r);this.mutationQueue.push(o);for(const a of r)this.ds=this.ds.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(t,e){return I.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ws(i),s=r<0?0:r;return I.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(t){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Ct(e,0),r=new Ct(e,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],o=>{const a=this._s(o.ls);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new bt(it);return e.forEach(r=>{const s=new Ct(r,0),o=new Ct(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{i=i.add(a.ls)})}),I.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;L.isDocumentKey(s)||(s=s.child(""));const o=new Ct(new L(s),0);let a=new bt(it);return this.ds.forEachWhile(u=>{const l=u.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(u.ls)),!0)},o),I.resolve(this.gs(a))}gs(t){const e=[];return t.forEach(i=>{const r=this._s(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Tt(this.ys(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.ds;return I.forEach(e.mutations,r=>{const s=new Ct(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=i})}In(t){}containsKey(t,e){const i=new Ct(e,0),r=this.ds.firstAfterOrEqual(i);return I.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,I.resolve()}ys(t,e){return this.ws(t)}ws(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(t){this.ps=t,this.docs=new It(L.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return I.resolve(i?i.document.mutableCopy():kt.newInvalidDocument(e))}getEntries(t,e){let i=We();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():kt.newInvalidDocument(r))}),I.resolve(i)}getAllFromCollection(t,e,i){let r=We();const s=new L(e.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!e.isPrefixOf(a.path))break;a.path.length>e.length+1||Dg(Ig(u),i)<=0||(r=r.insert(u.key,u.mutableCopy()))}return I.resolve(r)}getAllFromCollectionGroup(t,e,i,r){H()}Is(t,e){return I.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new $m(this)}getSize(t){return I.resolve(this.size)}}class $m extends Nm{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.zn.addEntry(t,r)):this.zn.removeEntry(i)}),I.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t){this.persistence=t,this.Ts=new di(e=>Sa(e),ba),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Es=0,this.As=new xa,this.targetCount=0,this.Rs=Yn.An()}forEachTarget(t,e){return this.Ts.forEach((i,r)=>e(r)),I.resolve()}getLastRemoteSnapshotVersion(t){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return I.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Es&&(this.Es=e),I.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Yn(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,I.resolve()}updateTargetData(t,e){return this.vn(e),I.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,I.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),I.waitFor(s).next(()=>r)}getTargetCount(t){return I.resolve(this.targetCount)}getTargetData(t,e){const i=this.Ts.get(e)||null;return I.resolve(i)}addMatchingKeys(t,e,i){return this.As.ss(e,i),I.resolve()}removeMatchingKeys(t,e,i){this.As.os(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),I.resolve()}getMatchingKeysForTargetId(t,e){const i=this.As.hs(e);return I.resolve(i)}containsKey(t,e){return I.resolve(this.As.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,e){this.bs={},this.overlays={},this.Ps=new Ea(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Um(this),this.indexManager=new Rm,this.remoteDocumentCache=function(i){return new Bm(i)}(i=>this.referenceDelegate.Ss(i)),this.wt=new xm(e),this.Ds=new Lm(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Fm,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.bs[t.toKey()];return i||(i=new Vm(e,this.referenceDelegate),this.bs[t.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,i){M("MemoryPersistence","Starting transaction:",t);const r=new jm(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(t,e){return I.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,e)))}}class jm extends kg{constructor(t){super(),this.currentSequenceNumber=t}}class ka{constructor(t){this.persistence=t,this.ks=new xa,this.Ms=null}static Os(t){return new ka(t)}get Fs(){if(this.Ms)return this.Ms;throw H()}addReference(t,e,i){return this.ks.addReference(i,e),this.Fs.delete(i.toString()),I.resolve()}removeReference(t,e,i){return this.ks.removeReference(i,e),this.Fs.add(i.toString()),I.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),I.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Cs(){this.Ms=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Fs,i=>{const r=L.fromPath(i);return this.$s(t,r).next(s=>{s||e.removeEntry(r,G.min())})}).next(()=>(this.Ms=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(i=>{i?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return I.or([()=>I.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Pi=i,this.vi=r}static Vi(t,e){let i=Q(),r=Q();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ra(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ci(t,e).next(s=>s||this.xi(t,e,r,i)).next(s=>s||this.Ni(t,e))}Ci(t,e){if($u(e))return I.resolve(null);let i=Le(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=So(e,null,"F"),i=Le(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=Q(...s);return this.Di.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(u=>{const l=this.ki(e,a);return this.Mi(e,l,o,u.readTime)?this.Ci(t,So(e,null,"F")):this.Oi(t,l,e,u)}))})))}xi(t,e,i,r){return $u(e)||r.isEqual(G.min())?this.Ni(t,e):this.Di.getDocuments(t,i).next(s=>{const o=this.ki(e,s);return this.Mi(e,o,i,r)?this.Ni(t,e):(ku()<=nt.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),bo(e)),this.Oi(t,o,e,Ag(r,-1)))})}ki(t,e){let i=new bt(Gc(t));return e.forEach((r,s)=>{Aa(t,s)&&(i=i.add(s))}),i}Mi(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(t,e){return ku()<=nt.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",bo(e)),this.Di.getDocumentsMatchingQuery(t,e,He.min())}Oi(t,e,i,r){return this.Di.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,e,i,r){this.persistence=t,this.Fi=e,this.wt=r,this.$i=new It(it),this.Bi=new di(s=>Sa(s),ba),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(i)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Mm(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function Hm(n,t,e,i){return new Gm(n,t,e,i)}async function ah(n,t){const e=J(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let u=Q();for(const l of r){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return e.localDocuments.getDocuments(i,u).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}function uh(n){const t=J(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function Km(n,t){const e=J(n),i=t.snapshotVersion;let r=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.Ui.newChangeBuffer({trackRemovals:!0});r=e.$i;const a=[];t.targetChanges.forEach((c,h)=>{const d=r.get(h);if(!d)return;a.push(e.Vs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>e.Vs.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.has(h)?f=f.withResumeToken(Mt.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,i)),r=r.insert(h,f),function(g,p,m){return g.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(d,f,c)&&a.push(e.Vs.updateTargetData(s,f))});let u=We(),l=Q();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Wm(s,o,t.documentUpdates).next(c=>{u=c.Gi,l=c.Qi})),!i.isEqual(G.min())){const c=e.Vs.getLastRemoteSnapshotVersion(s).next(h=>e.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(c)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(e.$i=r,s))}function Wm(n,t,e){let i=Q(),r=Q();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=We();return e.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),u.isNoDocument()&&u.version.isEqual(G.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Gi:o,Qi:r}})}function Xm(n,t){const e=J(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Vs.getTargetData(i,t).next(s=>s?(r=s,I.resolve(r)):e.Vs.allocateTargetId(i).next(o=>(r=new _n(t,o,0,i.currentSequenceNumber),e.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.$i.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.$i=e.$i.insert(i.targetId,i),e.Bi.set(t,i.targetId)),i})}async function Do(n,t,e){const i=J(n),r=i.$i.get(t),s=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!hr(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.$i=i.$i.remove(t),i.Bi.delete(r.target)}function Xu(n,t,e){const i=J(n);let r=G.min(),s=Q();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,u,l){const c=J(a),h=c.Bi.get(l);return h!==void 0?I.resolve(c.$i.get(h)):c.Vs.getTargetData(u,l)}(i,o,Le(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>i.Fi.getDocumentsMatchingQuery(o,t,e?r:G.min(),e?s:Q())).next(a=>(Ym(i,Xg(t),a),{documents:a,ji:s})))}function Ym(n,t,e){let i=G.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(t,i)}class Yu{constructor(){this.activeTargetIds=th()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qm{constructor(){this.Fr=new Yu,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,i){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new Yu,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{Br(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.so=e+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,i,r,s){const o=this.oo(t,e);M("RestConnection","Sending: ",o,i);const a={};return this.uo(a,r,s),this.co(t,o,a,i).then(u=>(M("RestConnection","Received: ",u),u),u=>{throw Ru("RestConnection",`${t} failed with error: `,u,"url: ",o,"request:",i),u})}ao(t,e,i,r,s,o){return this.ro(t,e,i,r,s)}uo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+fi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}oo(t,e){const i=Zm[t];return`${this.so}/v1/${e}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,i,r){return new Promise((s,o)=>{const a=new mg;a.listenOnce(dg.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Bs.NO_ERROR:const l=a.getResponseJson();M("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Bs.TIMEOUT:M("Connection",'RPC "'+t+'" timed out'),o(new $(O.DEADLINE_EXCEEDED,"Request time out"));break;case Bs.HTTP_ERROR:const c=a.getStatus();if(M("Connection",'RPC "'+t+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const g=f.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(g)>=0?g:O.UNKNOWN}(h.status);o(new $(d,h.message))}else o(new $(O.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new $(O.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{M("Connection",'RPC "'+t+'" completed.')}});const u=JSON.stringify(r);a.send(e,"POST",u,i,15)})}ho(t,e,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=hg(),o=fg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new gg({})),this.uo(a.initMessageHeaders,e,i),zf()||qf()||Gf()||Hf()||Kf()||jf()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=r.join("");M("Connection","Creating WebChannel: "+u,a);const l=s.createWebChannel(u,a);let c=!1,h=!1;const d=new ty({jr:g=>{h?M("Connection","Not sending because WebChannel is closed:",g):(c||(M("Connection","Opening WebChannel transport."),l.open(),c=!0),M("Connection","WebChannel sending:",g),l.send(g))},Wr:()=>l.close()}),f=(g,p,m)=>{g.listen(p,w=>{try{m(w)}catch(T){setTimeout(()=>{throw T},0)}})};return f(l,Er.EventType.OPEN,()=>{h||M("Connection","WebChannel transport opened.")}),f(l,Er.EventType.CLOSE,()=>{h||(h=!0,M("Connection","WebChannel transport closed"),d.eo())}),f(l,Er.EventType.ERROR,g=>{h||(h=!0,Ru("Connection","WebChannel transport errored:",g),d.eo(new $(O.UNAVAILABLE,"The operation could not be completed")))}),f(l,Er.EventType.MESSAGE,g=>{var p;if(!h){const m=g.data[0];Tt(!!m);const w=m,T=w.error||((p=w[0])===null||p===void 0?void 0:p.error);if(T){M("Connection","WebChannel received error:",T);const S=T.status;let C=function(D){const y=_t[D];if(y!==void 0)return Qc(y)}(S),_=T.message;C===void 0&&(C=O.INTERNAL,_="Unknown error status: "+S+" with message "+T.message),h=!0,d.eo(new $(C,_)),l.close()}else M("Connection","WebChannel received:",m),d.no(m)}}),f(o,pg.STAT_EVENT,g=>{g.stat===Du.PROXY?M("Connection","Detected buffering proxy"):g.stat===Du.NOPROXY&&M("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}function zs(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n){return new dm(n,!0)}class ch{constructor(t,e,i=1e3,r=1.5,s=6e4){this.js=t,this.timerId=e,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,e-i);r>0&&M("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,e,i,r,s,o,a,u){this.js=t,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new ch(t,e)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(t){this.Fo(),this.stream.send(t)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(t,e){this.Fo(),this.$o(),this.So.cancel(),this.Po++,t!==4?this.So.reset():e&&e.code===O.RESOURCE_EXHAUSTED?(Me(e.toString()),Me("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):e&&e.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Jr(e)}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===e&&this.Uo(i,r)},i=>{t(()=>{const r=new $(O.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(t,e){const i=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(t){return M("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iy extends ny{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.wt=s}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=_m(this.wt,t),i=function(r){if(!("targetChange"in r))return G.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?G.min():s.readTime?Hi(s.readTime):G.min()}(t);return this.listener.Go(e,i)}Qo(t){const e={};e.database=Wu(this.wt),e.addTarget=function(r,s){let o;const a=s.target;return o=To(a)?{documents:vm(r,a)}:{query:wm(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=gm(r,s.resumeToken):s.snapshotVersion.compareTo(G.min())>0&&(o.readTime=pm(r,s.snapshotVersion.toTimestamp())),o}(this.wt,t);const i=Tm(this.wt,t);i&&(e.labels=i),this.Oo(e)}jo(t){const e={};e.database=Wu(this.wt),e.removeTarget=t,this.Oo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(t,e,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new $(O.UNKNOWN,r.toString())})}ao(t,e,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(t,e,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(O.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class sy{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,t==="Online"&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Me(e),this.su=!1):M("OnlineStateTracker",e)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{i.enqueueAndForget(async()=>{pr(this)&&(M("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=J(a);u.lu.add(4),await dr(u),u._u.set("Unknown"),u.lu.delete(4),await Es(u)}(this))})}),this._u=new sy(i,r)}}async function Es(n){if(pr(n))for(const t of n.fu)await t(!0)}async function dr(n){for(const t of n.fu)await t(!1)}function hh(n,t){const e=J(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),Pa(e)?Na(e):pi(e).Co()&&Oa(e,t))}function fh(n,t){const e=J(n),i=pi(e);e.hu.delete(t),i.Co()&&dh(e,t),e.hu.size===0&&(i.Co()?i.ko():pr(e)&&e._u.set("Unknown"))}function Oa(n,t){n.wu.Nt(t.targetId),pi(n).Qo(t)}function dh(n,t){n.wu.Nt(t),pi(n).jo(t)}function Na(n){n.wu=new cm({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),pi(n).start(),n._u.iu()}function Pa(n){return pr(n)&&!pi(n).Do()&&n.hu.size>0}function pr(n){return J(n).lu.size===0}function ph(n){n.wu=void 0}async function ay(n){n.hu.forEach((t,e)=>{Oa(n,t)})}async function uy(n,t){ph(n),Pa(n)?(n._u.uu(t),Na(n)):n._u.set("Unknown")}async function ly(n,t,e){if(n._u.set("Online"),t instanceof nh&&t.state===2&&t.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.hu.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.hu.delete(o),i.wu.removeTarget(o))}(n,t)}catch(i){M("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Ju(n,i)}else if(t instanceof Dr?n.wu.Ut(t):t instanceof eh?n.wu.zt(t):n.wu.Gt(t),!e.isEqual(G.min()))try{const i=await uh(n.localStore);e.compareTo(i)>=0&&await function(r,s){const o=r.wu.Yt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const l=r.hu.get(u);l&&r.hu.set(u,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=r.hu.get(a);if(!u)return;r.hu.set(a,u.withResumeToken(Mt.EMPTY_BYTE_STRING,u.snapshotVersion)),dh(r,a);const l=new _n(u.target,a,1,u.sequenceNumber);Oa(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(n,e)}catch(i){M("RemoteStore","Failed to raise snapshot:",i),await Ju(n,i)}}async function Ju(n,t,e){if(!hr(t))throw t;n.lu.add(1),await dr(n),n._u.set("Offline"),e||(e=()=>uh(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{M("RemoteStore","Retrying IndexedDB access"),await e(),n.lu.delete(1),await Es(n)})}async function Zu(n,t){const e=J(n);e.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const i=pr(e);e.lu.add(3),await dr(e),i&&e._u.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),await Es(e)}async function cy(n,t){const e=J(n);t?(e.lu.delete(2),await Es(e)):t||(e.lu.add(2),await dr(e),e._u.set("Unknown"))}function pi(n){return n.mu||(n.mu=function(t,e,i){const r=J(t);return r.tu(),new iy(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:ay.bind(null,n),Jr:uy.bind(null,n),Go:ly.bind(null,n)}),n.fu.push(async t=>{t?(n.mu.No(),Pa(n)?Na(n):n._u.set("Unknown")):(await n.mu.stop(),ph(n))})),n.mu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,e,i,r,s){const o=Date.now()+i,a=new Ma(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gh(n,t){if(Me("AsyncQueue",`${t}: ${n}`),hr(n))return new $(O.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this.comparator=t?(e,i)=>t(e,i)||L.comparator(e.key,i.key):(e,i)=>L.comparator(e.key,i.key),this.keyedMap=wi(),this.sortedSet=new It(this.comparator)}static emptySet(t){return new Un(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Un)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Un;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.yu=new It(L.comparator)}track(t){const e=t.doc.key,i=this.yu.get(e);i?t.type!==0&&i.type===3?this.yu=this.yu.insert(e,t):t.type===3&&i.type!==1?this.yu=this.yu.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.yu=this.yu.remove(e):t.type===1&&i.type===2?this.yu=this.yu.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):H():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Qn{constructor(t,e,i,r,s,o,a,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(o=>{s.push({type:0,doc:o})}),new Qn(t,e,Un.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ys(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.Iu=void 0,this.listeners=[]}}class fy{constructor(){this.queries=new di(t=>qc(t),ys),this.onlineState="Unknown",this.Tu=new Set}}async function dy(n,t){const e=J(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new hy),r)try{s.Iu=await e.onListen(i)}catch(o){const a=gh(o,`Initialization of query '${bo(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,s),s.listeners.push(t),t.Eu(e.onlineState),s.Iu&&t.Au(s.Iu)&&La(e)}async function py(n,t){const e=J(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return e.queries.delete(i),e.onUnlisten(i)}function gy(n,t){const e=J(n);let i=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const a of o.listeners)a.Au(r)&&(i=!0);o.Iu=r}}i&&La(e)}function my(n,t,e){const i=J(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function La(n){n.Tu.forEach(t=>{t.next()})}class yy{constructor(t,e,i){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Qn(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){if(!t.fromCache)return!0;const i=e!=="Offline";return(!this.options.Du||!i)&&(!t.docs.isEmpty()||e==="Offline")}vu(t){if(t.docChanges.length>0)return!0;const e=this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Su(t){t=Qn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t){this.key=t}}class yh{constructor(t){this.key=t}}class _y{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=Q(),this.mutatedKeys=Q(),this.Lu=Gc(t),this.Uu=new Un(this.Lu)}get qu(){return this.Fu}Ku(t,e){const i=e?e.Gu:new tl,r=e?e.Uu:this.Uu;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((c,h)=>{const d=r.get(c),f=Aa(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),p=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;d&&f?d.data.isEqual(f.data)?g!==p&&(i.track({type:3,doc:f}),m=!0):this.Qu(d,f)||(i.track({type:2,doc:f}),m=!0,(u&&this.Lu(f,u)>0||l&&this.Lu(f,l)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),m=!0):d&&!f&&(i.track({type:1,doc:d}),m=!0,(u||l)&&(a=!0)),m&&(f?(o=o.add(f),s=p?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),i.track({type:1,doc:c})}return{Uu:o,Gu:i,Mi:a,mutatedKeys:s}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const s=t.Gu.pu();s.sort((l,c)=>function(h,d){const f=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(h)-f(d)}(l.type,c.type)||this.Lu(l.doc,c.doc)),this.ju(i);const o=e?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,u=a!==this.$u;return this.$u=a,s.length!==0||u?{snapshot:new Qn(this.query,t.Uu,r,s,t.mutatedKeys,a===0,u,!1),zu:o}:{zu:o}}Eu(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new tl,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=Q(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const e=[];return t.forEach(i=>{this.Bu.has(i)||e.push(new yh(i))}),this.Bu.forEach(i=>{t.has(i)||e.push(new mh(i))}),e}Ju(t){this.Fu=t.ji,this.Bu=Q();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return Qn.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class vy{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class wy{constructor(t){this.key=t,this.Xu=!1}}class Ey{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new di(a=>qc(a),ys),this.ec=new Map,this.nc=new Set,this.sc=new It(L.comparator),this.ic=new Map,this.rc=new xa,this.oc={},this.uc=new Map,this.cc=Yn.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function Ty(n,t){const e=xy(n);let i,r;const s=e.tc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const o=await Xm(e.localStore,Le(t));e.isPrimaryClient&&hh(e.remoteStore,o);const a=e.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await Sy(e,t,i,a==="current")}return r}async function Sy(n,t,e,i){n.hc=(c,h,d)=>async function(f,g,p,m){let w=g.view.Ku(p);w.Mi&&(w=await Xu(f.localStore,g.query,!1).then(({documents:C})=>g.view.Ku(C,w)));const T=m&&m.targetChanges.get(g.targetId),S=g.view.applyChanges(w,f.isPrimaryClient,T);return nl(f,g.targetId,S.zu),S.snapshot}(n,c,h,d);const r=await Xu(n.localStore,t,!0),s=new _y(t,r.ji),o=s.Ku(r.documents),a=fr.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline"),u=s.applyChanges(o,n.isPrimaryClient,a);nl(n,e,u.zu);const l=new vy(t,e,s);return n.tc.set(t,l),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),u.snapshot}async function by(n,t){const e=J(n),i=e.tc.get(t),r=e.ec.get(i.targetId);if(r.length>1)return e.ec.set(i.targetId,r.filter(s=>!ys(s,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||await Do(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),fh(e.remoteStore,i.targetId),xo(e,i.targetId)}).catch(wa)):(xo(e,i.targetId),await Do(e.localStore,i.targetId,!0))}async function _h(n,t){const e=J(n);try{const i=await Km(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.ic.get(s);o&&(Tt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Xu=!0:r.modifiedDocuments.size>0?Tt(o.Xu):r.removedDocuments.size>0&&(Tt(o.Xu),o.Xu=!1))}),await wh(e,i,t)}catch(i){await wa(i)}}function el(n,t,e){const i=J(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.tc.forEach((s,o)=>{const a=o.view.Eu(t);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=J(s);a.onlineState=o;let u=!1;a.queries.forEach((l,c)=>{for(const h of c.listeners)h.Eu(o)&&(u=!0)}),u&&La(a)}(i.eventManager,t),r.length&&i.Zu.Go(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Cy(n,t,e){const i=J(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ic.get(t),s=r&&r.key;if(s){let o=new It(L.comparator);o=o.insert(s,kt.newNoDocument(s,G.min()));const a=Q().add(s),u=new ws(G.min(),new Map,new bt(it),o,a);await _h(i,u),i.sc=i.sc.remove(s),i.ic.delete(t),Fa(i)}else await Do(i.localStore,t,!1).then(()=>xo(i,t,e)).catch(wa)}function xo(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ec.get(t))n.tc.delete(i),e&&n.Zu.lc(i,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(i=>{n.rc.containsKey(i)||vh(n,i)})}function vh(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);e!==null&&(fh(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),Fa(n))}function nl(n,t,e){for(const i of e)i instanceof mh?(n.rc.addReference(i.key,t),Ay(n,i)):i instanceof yh?(M("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,t),n.rc.containsKey(i.key)||vh(n,i.key)):H()}function Ay(n,t){const e=t.key,i=e.path.canonicalString();n.sc.get(e)||n.nc.has(i)||(M("SyncEngine","New document in limbo: "+e),n.nc.add(i),Fa(n))}function Fa(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new L(dt.fromString(t)),i=n.cc.next();n.ic.set(i,new wy(e)),n.sc=n.sc.insert(e,i),hh(n.remoteStore,new _n(Le(Ca(e.path)),i,2,Ea.ot))}}async function wh(n,t,e){const i=J(n),r=[],s=[],o=[];i.tc.isEmpty()||(i.tc.forEach((a,u)=>{o.push(i.hc(u,t,e).then(l=>{if(l){i.isPrimaryClient&&i.sharedClientState.updateQueryState(u.targetId,l.fromCache?"not-current":"current"),r.push(l);const c=Ra.Vi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),i.Zu.Go(r),await async function(a,u){const l=J(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>I.forEach(u,h=>I.forEach(h.Pi,d=>l.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>I.forEach(h.vi,d=>l.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!hr(c))throw c;M("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const h=c.targetId;if(!c.fromCache){const d=l.$i.get(h),f=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(f);l.$i=l.$i.insert(h,g)}}}(i.localStore,s))}async function Iy(n,t){const e=J(n);if(!e.currentUser.isEqual(t)){M("SyncEngine","User change. New user:",t.toKey());const i=await ah(e.localStore,t);e.currentUser=t,function(r,s){r.uc.forEach(o=>{o.forEach(a=>{a.reject(new $(O.CANCELLED,s))})}),r.uc.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await wh(e,i.Ki)}}function Dy(n,t){const e=J(n),i=e.ic.get(t);if(i&&i.Xu)return Q().add(i.key);{let r=Q();const s=e.ec.get(t);if(!s)return r;for(const o of s){const a=e.tc.get(o);r=r.unionWith(a.view.qu)}return r}}function xy(n){const t=J(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=_h.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cy.bind(null,t),t.Zu.Go=gy.bind(null,t.eventManager),t.Zu.lc=my.bind(null,t.eventManager),t}class ky{constructor(){this.synchronizeTabs=!1}async initialize(t){this.wt=lh(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),await this.persistence.start(),this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore)}mc(t,e){return null}gc(t,e){return null}wc(t){return Hm(this.persistence,new qm,t.initialUser,this.wt)}_c(t){return new zm(ka.Os,this.wt)}dc(t){return new Qm}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ry{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>el(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Iy.bind(null,this.syncEngine),await cy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new fy}createDatastore(t){const e=lh(t.databaseInfo.databaseId),i=(r=t.databaseInfo,new ey(r));var r;return function(s,o,a,u){return new ry(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=a=>el(this.syncEngine,a,0),o=Qu.V()?new Qu:new Jm,new oy(e,i,r,s,o);var e,i,r,s,o}createSyncEngine(t,e){return function(i,r,s,o,a,u,l){const c=new Ey(i,r,s,o,a,u);return l&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=J(t);M("RemoteStore","RemoteStore shutting down."),e.lu.add(5),await dr(e),e.du.shutdown(),e._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):Me("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Kt.UNAUTHENTICATED,this.clientId=$c.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{M("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=gh(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Py(n,t){n.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const e=await n.getConfiguration();await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await ah(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}async function My(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Ly(n);M("FirestoreClient","Initializing OnlineComponentProvider");const i=await n.getConfiguration();await t.initialize(e,i),n.setCredentialChangeListener(r=>Zu(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Zu(t.remoteStore,s)),n.onlineComponents=t}async function Ly(n){return n.offlineComponents||(M("FirestoreClient","Using default OfflineComponentProvider"),await Py(n,new ky)),n.offlineComponents}async function Fy(n){return n.onlineComponents||(M("FirestoreClient","Using default OnlineComponentProvider"),await My(n,new Ry)),n.onlineComponents}async function Vy(n){const t=await Fy(n),e=t.eventManager;return e.onListen=Ty.bind(null,t.syncEngine),e.onUnlisten=by.bind(null,t.syncEngine),e}function By(n,t,e={}){const i=new gn;return n.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,u){const l=new Oy({next:h=>{s.enqueueAndForget(()=>py(r,c));const d=h.docs.has(o);!d&&h.fromCache?u.reject(new $(O.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?u.reject(new $(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),c=new yy(Ca(o.path),l,{includeMetadataChanges:!0,Du:!0});return dy(r,c)}(await Vy(n),n.asyncQueue,t,e,i)),i.promise}const il=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n,t,e){if(!e)throw new $(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Uy(n,t,e,i){if(t===!0&&i===!0)throw new $(O.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function rl(n){if(!L.isDocumentKey(n))throw new $(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":H()}function sl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new $(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=zy(n);throw new $(O.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){var e;if(t.host===void 0){if(t.ssl!==void 0)throw new $(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new $(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Uy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ol({}),this._settingsFrozen=!1,t instanceof Wn?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new $(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wn(r.options.projectId)}(t))}get app(){if(!this._app)throw new $(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new $(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ol(t),t.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new _g;switch(e.type){case"gapi":const i=e.client;return Tt(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new Eg(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new $(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=il.get(t);e&&(M("ComponentProvider","Removing Datastore"),il.delete(t),e.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ne(this.firestore,t,this._key)}}class Va{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Va(this.firestore,t,this._query)}}class Ki extends Va{constructor(t,e,i){super(t,e,Ca(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ne(this.firestore,null,new L(t))}withConverter(t){return new Ki(this.firestore,t,this._path)}}function jy(n,t,...e){if(n=Zf(n),arguments.length===1&&(t=$c.I()),$y("doc","path",t),n instanceof Eh){const i=dt.fromString(t,...e);return rl(i),new Ne(n,null,new L(i))}{if(!(n instanceof Ne||n instanceof Ki))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(t,...e));return rl(i),new Ne(n.firestore,n instanceof Ki?n.converter:null,new L(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new ch(this,"async_queue_retry"),this.Kc=()=>{const e=zs();e&&M("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=zs();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=zs();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new gn;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Oc.push(t),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(t){if(!hr(t))throw t;M("AsyncQueue","Operation failed with retryable error: "+t)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(t){const e=this.Mc.then(()=>(this.Lc=!0,t().catch(i=>{this.Bc=i,this.Lc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw Me("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Lc=!1,i))));return this.Mc=e,e}enqueueAfterDelay(t,e,i){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const r=Ma.createAndSchedule(this,t,e,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&H()}verifyOperationInProgress(){}async zc(){let t;do t=this.Mc,await t;while(t!==this.Mc)}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}class Th extends Eh{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new qy,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Sh(this),this._firestoreClient.terminate()}}function Gy(n=Zd()){return Wd(n,"firestore").getImmediate()}function Hy(n){return n._firestoreClient||Sh(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Sh(n){var t;const e=n._freezeSettings(),i=function(r,s,o,a){return new Ng(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,e);n._firestoreClient=new Ny(n._authCredentials,n._appCheckCredentials,n._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new $(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gr(Mt.fromBase64String(t))}catch(e){throw new $(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Gr(Mt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new $(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new $(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return it(this._lat,t._lat)||it(this._long,t._long)}}const Wy=new RegExp("[~\\*/\\[\\]]");function Xy(n,t,e){if(t.search(Wy)>=0)throw al(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new bh(...t.split("."))._internalPath}catch{throw al(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function al(n,t,e,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new $(O.INVALID_ARGUMENT,a+n+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Yy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ah("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Yy extends Ch{data(){return super.data()}}function Ah(n,t){return typeof t=="string"?Xy(n,t):t instanceof bh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ih extends Ch{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Jy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Ah("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Jy extends Ih{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{convertValue(t,e="none"){switch(In(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw H()}}convertObject(t,e){const i={};return ps(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Ky(vt(t.latitude),vt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=zc(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(ji(t));default:return null}}convertTimestamp(t){const e=Ke(t);return new Yt(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=dt.fromString(t);Tt(oh(i));const r=new Wn(i.get(1),i.get(3)),s=new L(i.popFirst(5));return r.isEqual(e)||Me(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n){n=sl(n,Ne);const t=sl(n.firestore,Th);return By(Hy(t),n._key).then(e=>n_(t,n,e))}class e_ extends Zy{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ne(this.firestore,null,e)}}function n_(n,t,e){const i=e.docs.get(t._key),r=new e_(n);return new Ih(n,r,t._key,i,new Qy(e.hasPendingWrites,e.fromCache),t.converter)}(function(n,t=!0){(function(e){fi=e})(Qd),Or(new Mi("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Th(r,new vg(e.getProvider("auth-internal")),new Sg(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),Bn(xu,"3.4.14",n),Bn(xu,"3.4.14","esm2017")})();function De(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Dh(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}/*!
 * GSAP 3.11.0
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var re={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Jn={duration:.5,overwrite:!1,delay:0},Ba,_e,Et,de=1e8,at=1/de,ko=Math.PI*2,i_=ko/4,r_=0,xh=Math.sqrt,s_=Math.cos,o_=Math.sin,Dt=function(t){return typeof t=="string"},gt=function(t){return typeof t=="function"},Fe=function(t){return typeof t=="number"},$a=function(t){return typeof t>"u"},Ae=function(t){return typeof t=="object"},Qt=function(t){return t!==!1},kh=function(){return typeof window<"u"},br=function(t){return gt(t)||Dt(t)},Rh=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ut=Array.isArray,Ro=/(?:-?\.?\d|\.)+/gi,Oh=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Fn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,js=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Nh=/[+-]=-?[.\d]+/,Ph=/[^,'"\[\]\s]+/gi,a_=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ft,fe,Oo,Ua,ae={},Hr={},Mh,Lh=function(t){return(Hr=Dn(t,ae))&&ue},za=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Kr=function(t,e){return!e&&console.warn(t)},Fh=function(t,e){return t&&(ae[t]=e)&&Hr&&(Hr[t]=e)||ae},Wi=function(){return 0},u_={suppressEvents:!0,isStart:!0},ki={suppressEvents:!0},ja={},qe=[],No={},Vh,ne={},qs={},ul=30,xr=[],qa="",Ga=function(t){var e=t[0],i,r;if(Ae(e)||gt(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(r=xr.length;r--&&!xr[r].targetTest(e););i=xr[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new af(t[r],i)))||t.splice(r,1);return t},vn=function(t){return t._gsap||Ga(pe(t))[0]._gsap},Bh=function(t,e,i){return(i=t[e])&&gt(i)?t[e]():$a(i)&&t.getAttribute&&t.getAttribute(e)||i},Jt=function(t,e){return(t=t.split(",")).forEach(e)||t},yt=function(t){return Math.round(t*1e5)/1e5||0},Rt=function(t){return Math.round(t*1e7)/1e7||0},zn=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},l_=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},Wr=function(){var t=qe.length,e=qe.slice(0),i,r;for(No={},qe.length=0,i=0;i<t;i++)r=e[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},$h=function(t,e,i,r){qe.length&&Wr(),t.render(e,i,r||_e),qe.length&&Wr()},Uh=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Ph).length<2?e:Dt(t)?t.trim():t},zh=function(t){return t},me=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},c_=function(t){return function(e,i){for(var r in i)r in e||r==="duration"&&t||r==="ease"||(e[r]=i[r])}},Dn=function(t,e){for(var i in e)t[i]=e[i];return t},ll=function n(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Ae(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},Xr=function(t,e){var i={},r;for(r in t)r in e||(i[r]=t[r]);return i},Ri=function(t){var e=t.parent||ft,i=t.keyframes?c_(Ut(t.keyframes)):me;if(Qt(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},h_=function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0},jh=function(t,e,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=t[r],a;if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},Ts=function(t,e,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Ve=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},wn=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},f_=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Po=function(t,e,i,r){return t._startAt&&(_e?t._startAt.revert(ki):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},d_=function n(t){return!t||t._ts&&n(t.parent)},cl=function(t){return t._repeat?Zn(t._tTime,t=t.duration()+t._rDelay)*t:0},Zn=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Yr=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ss=function(t){return t._end=Rt(t._start+(t._tDur/Math.abs(t._ts||t._rts||at)||0))},bs=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Rt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ss(t),i._dirty||wn(i,t)),t},qh=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=Yr(t.rawTime(),e),(!e._dur||gr(0,e.totalDuration(),i)-e._tTime>at)&&e.render(i,!0)),wn(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-at}},Te=function(t,e,i,r){return e.parent&&Ve(e),e._start=Rt((Fe(i)?i:i||t!==ft?he(t,i,e):t._time)+e._delay),e._end=Rt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),jh(t,e,"_first","_last",t._sort?"_start":0),Mo(e)||(t._recent=e),r||qh(t,e),t._ts<0&&bs(t,t._tTime),t},Gh=function(t,e){return(ae.ScrollTrigger||za("scrollTrigger",e))&&ae.ScrollTrigger.create(e,t)},Hh=function(t,e,i,r){if(Ka(t,e),!t._initted)return 1;if(!i&&t._pt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Vh!==ie.frame)return qe.push(t),t._lazy=[e,r],1},p_=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},Mo=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},g_=function(t,e,i,r){var s=t.ratio,o=e<0||!e&&(!t._start&&p_(t)&&!(!t._initted&&Mo(t))||(t._ts<0||t._dp._ts<0)&&!Mo(t))?0:1,a=t._rDelay,u=0,l,c,h;if(a&&t._repeat&&(u=gr(0,t._tDur,e),c=Zn(u,a),t._yoyo&&c&1&&(o=1-o),c!==Zn(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||_e||r||t._zTime===at||!e&&t._zTime){if(!t._initted&&Hh(t,e,r,i))return;for(h=t._zTime,t._zTime=e||(i?at:0),i||(i=e&&!h),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,l=t._pt;l;)l.r(o,l.d),l=l._next;e<0&&Po(t,e,i,!0),t._onUpdate&&!i&&ge(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&ge(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Ve(t,1),i||(ge(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},m_=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},ti=function(t,e,i,r){var s=t._repeat,o=Rt(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Rt(o*(s+1)+t._rDelay*s):o,a>0&&!r?bs(t,t._tTime=t._tDur*a):t.parent&&Ss(t),i||wn(t.parent,t),t},hl=function(t){return t instanceof Ot?wn(t):ti(t,t._dur)},y_={_start:0,endTime:Wi,totalDuration:Wi},he=function n(t,e,i){var r=t.labels,s=t._recent||y_,o=t.duration()>=de?s.endTime(!1):t._dur,a,u,l;return Dt(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),l=e.substr(-1)==="%",a=e.indexOf("="),u==="<"||u===">"?(a>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(l?(a<0?s:i).totalDuration()/100:1)):a<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(a-1)+e.substr(a+1)),l&&i&&(u=u/100*(Ut(i)?i[0]:i).totalDuration()),a>1?n(t,e.substr(0,a-1),i)+u:o+u)):e==null?o:+e},Oi=function(t,e,i){var r=Fe(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],a,u;if(r&&(o.duration=e[1]),o.parent=i,t){for(a=o,u=i;u&&!("immediateRender"in a);)a=u.vars.defaults||{},u=Qt(u.vars.inherit)&&u.parent;o.immediateRender=Qt(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new wt(e[0],o,e[s+1])},rn=function(t,e){return t||t===0?e(t):e},gr=function(t,e,i){return i<t?t:i>e?e:i},Bt=function(t,e){return!Dt(t)||!(e=a_.exec(t))?"":e[1]},__=function(t,e,i){return rn(i,function(r){return gr(t,e,r)})},Lo=[].slice,Kh=function(t,e){return t&&Ae(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ae(t[0]))&&!t.nodeType&&t!==fe},v_=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(r){var s;return Dt(r)&&!e||Kh(r,1)?(s=i).push.apply(s,pe(r)):i.push(r)})||i},pe=function(t,e,i){return Et&&!e&&Et.selector?Et.selector(t):Dt(t)&&!i&&(Oo||!ei())?Lo.call((e||Ua).querySelectorAll(t),0):Ut(t)?v_(t,i):Kh(t)?Lo.call(t,0):t?[t]:[]},Fo=function(t){return t=pe(t)[0]||Kr("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return pe(e,i.querySelectorAll?i:i===t?Kr("Invalid scope")||Ua.createElement("div"):t)}},Wh=function(t){return t.sort(function(){return .5-Math.random()})},Xh=function(t){if(gt(t))return t;var e=Ae(t)?t:{each:t},i=En(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},a=r>0&&r<1,u=isNaN(r)||a,l=e.axis,c=r,h=r;return Dt(r)?c=h={center:.5,edges:.5,end:1}[r]||0:!a&&u&&(c=r[0],h=r[1]),function(d,f,g){var p=(g||e).length,m=o[p],w,T,S,C,_,D,y,v,b;if(!m){if(b=e.grid==="auto"?0:(e.grid||[1,de])[1],!b){for(y=-de;y<(y=g[b++].getBoundingClientRect().left)&&b<p;);b--}for(m=o[p]=[],w=u?Math.min(b,p)*c-.5:r%b,T=b===de?0:u?p*h/b-.5:r/b|0,y=0,v=de,D=0;D<p;D++)S=D%b-w,C=T-(D/b|0),m[D]=_=l?Math.abs(l==="y"?C:S):xh(S*S+C*C),_>y&&(y=_),_<v&&(v=_);r==="random"&&Wh(m),m.max=y-v,m.min=v,m.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(b>p?p-1:l?l==="y"?p/b:b:Math.max(b,p/b))||0)*(r==="edges"?-1:1),m.b=p<0?s-p:s,m.u=Bt(e.amount||e.each)||0,i=i&&p<0?rf(i):i}return p=(m[d]-m.min)/m.max||0,Rt(m.b+(i?i(p):p)*m.v)+m.u}},Vo=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=Rt(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(Fe(i)?0:Bt(i))}},Yh=function(t,e){var i=Ut(t),r,s;return!i&&Ae(t)&&(r=i=t.radius||de,t.values?(t=pe(t.values),(s=!Fe(t[0]))&&(r*=r)):t=Vo(t.increment)),rn(e,i?gt(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),l=de,c=0,h=t.length,d,f;h--;)s?(d=t[h].x-a,f=t[h].y-u,d=d*d+f*f):d=Math.abs(t[h]-a),d<l&&(l=d,c=h);return c=!r||l<=r?t[c]:o,s||c===o||Fe(o)?c:c+Bt(o)}:Vo(t))},Qh=function(t,e,i,r){return rn(Ut(t)?!e:i===!0?!!(i=0):!r,function(){return Ut(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*r)/r})},w_=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduce(function(s,o){return o(s)},r)}},E_=function(t,e){return function(i){return t(parseFloat(i))+(e||Bt(i))}},T_=function(t,e,i){return Zh(t,e,0,1,i)},Jh=function(t,e,i){return rn(i,function(r){return t[~~e(r)]})},S_=function n(t,e,i){var r=e-t;return Ut(t)?Jh(t,n(0,t.length),e):rn(i,function(s){return(r+(s-t)%r)%r+t})},b_=function n(t,e,i){var r=e-t,s=r*2;return Ut(t)?Jh(t,n(0,t.length-1),e):rn(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Xi=function(t){for(var e=0,i="",r,s,o,a;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),a=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(a?Ph:Ro),i+=t.substr(e,r-e)+Qh(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},Zh=function(t,e,i,r,s){var o=e-t,a=r-i;return rn(s,function(u){return i+((u-t)/o*a||0)})},C_=function n(t,e,i,r){var s=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!s){var o=Dt(t),a={},u,l,c,h,d;if(i===!0&&(r=1)&&(i=null),o)t={p:t},e={p:e};else if(Ut(t)&&!Ut(e)){for(c=[],h=t.length,d=h-2,l=1;l<h;l++)c.push(n(t[l-1],t[l]));h--,s=function(g){g*=h;var p=Math.min(d,~~g);return c[p](g-p)},i=e}else r||(t=Dn(Ut(t)?[]:{},t));if(!c){for(u in e)Ha.call(a,t,u,"get",e[u]);s=function(g){return Ya(g,a)||(o?t.p:t)}}}return rn(i,s)},fl=function(t,e,i){var r=t.labels,s=de,o,a,u;for(o in r)a=r[o]-e,a<0==!!i&&a&&s>(a=Math.abs(a))&&(u=o,s=a);return u},ge=function(t,e,i){var r=t.vars,s=r[e],o=Et,a=t._ctx,u,l,c;if(!!s)return u=r[e+"Params"],l=r.callbackScope||t,i&&qe.length&&Wr(),a&&(Et=a),c=u?s.apply(l,u):s.call(l),Et=o,c},Ei=function(t){return Ve(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&ge(t,"onInterrupt"),t},Vn,A_=function(t){t=!t.name&&t.default||t;var e=t.name,i=gt(t),r=e&&!i&&t.init?function(){this._props=[]}:t,s={init:Wi,render:Ya,add:Ha,kill:z_,modifier:U_,rawVars:0},o={targetTest:0,get:0,getSetter:Xa,aliases:{},register:0};if(ei(),t!==r){if(ne[e])return;me(r,me(Xr(t,s),o)),Dn(r.prototype,Dn(s,Xr(t,o))),ne[r.prop=e]=r,t.targetTest&&(xr.push(r),ja[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Fh(e,r),t.register&&t.register(ue,r,Zt)},ot=255,Ti={aqua:[0,ot,ot],lime:[0,ot,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ot],navy:[0,0,128],white:[ot,ot,ot],olive:[128,128,0],yellow:[ot,ot,0],orange:[ot,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ot,0,0],pink:[ot,192,203],cyan:[0,ot,ot],transparent:[ot,ot,ot,0]},Gs=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*ot+.5|0},tf=function(t,e,i){var r=t?Fe(t)?[t>>16,t>>8&ot,t&ot]:0:Ti.black,s,o,a,u,l,c,h,d,f,g;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ti[t])r=Ti[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&ot,r&ot,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&ot,t&ot]}else if(t.substr(0,3)==="hsl"){if(r=g=t.match(Ro),!e)u=+r[0]%360/360,l=+r[1]/100,c=+r[2]/100,o=c<=.5?c*(l+1):c+l-c*l,s=c*2-o,r.length>3&&(r[3]*=1),r[0]=Gs(u+1/3,s,o),r[1]=Gs(u,s,o),r[2]=Gs(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(Oh),i&&r.length<4&&(r[3]=1),r}else r=t.match(Ro)||Ti.transparent;r=r.map(Number)}return e&&!g&&(s=r[0]/ot,o=r[1]/ot,a=r[2]/ot,h=Math.max(s,o,a),d=Math.min(s,o,a),c=(h+d)/2,h===d?u=l=0:(f=h-d,l=c>.5?f/(2-h-d):f/(h+d),u=h===s?(o-a)/f+(o<a?6:0):h===o?(a-s)/f+2:(s-o)/f+4,u*=60),r[0]=~~(u+.5),r[1]=~~(l*100+.5),r[2]=~~(c*100+.5)),i&&r.length<4&&(r[3]=1),r},ef=function(t){var e=[],i=[],r=-1;return t.split(Ge).forEach(function(s){var o=s.match(Fn)||[];e.push.apply(e,o),i.push(r+=o.length+1)}),e.c=i,e},dl=function(t,e,i){var r="",s=(t+r).match(Ge),o=e?"hsla(":"rgba(",a=0,u,l,c,h;if(!s)return t;if(s=s.map(function(d){return(d=tf(d,e,1))&&o+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(c=ef(t),u=i.c,u.join(r)!==c.c.join(r)))for(l=t.replace(Ge,"1").split(Fn),h=l.length-1;a<h;a++)r+=l[a]+(~u.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:i).shift());if(!l)for(l=t.split(Ge),h=l.length-1;a<h;a++)r+=l[a]+s[a];return r+l[h]},Ge=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ti)n+="|"+t+"\\b";return new RegExp(n+")","gi")}(),I_=/hsl[a]?\(/,nf=function(t){var e=t.join(" "),i;if(Ge.lastIndex=0,Ge.test(e))return i=I_.test(e),t[1]=dl(t[1],i),t[0]=dl(t[0],i,ef(t[1])),!0},Yi,ie=function(){var n=Date.now,t=500,e=33,i=n(),r=i,s=1e3/240,o=s,a=[],u,l,c,h,d,f,g=function p(m){var w=n()-r,T=m===!0,S,C,_,D;if(w>t&&(i+=w-e),r+=w,_=r-i,S=_-o,(S>0||T)&&(D=++h.frame,d=_-h.time*1e3,h.time=_=_/1e3,o+=S+(S>=s?4:s-S),C=1),T||(u=l(p)),C)for(f=0;f<a.length;f++)a[f](_,d,D,m)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(m){return d/(1e3/(m||60))},wake:function(){Mh&&(!Oo&&kh()&&(fe=Oo=window,Ua=fe.document||{},ae.gsap=ue,(fe.gsapVersions||(fe.gsapVersions=[])).push(ue.version),Lh(Hr||fe.GreenSockGlobals||!fe.gsap&&fe||{}),c=fe.requestAnimationFrame),u&&h.sleep(),l=c||function(m){return setTimeout(m,o-h.time*1e3+1|0)},Yi=1,g(2))},sleep:function(){(c?fe.cancelAnimationFrame:clearTimeout)(u),Yi=0,l=Wi},lagSmoothing:function(m,w){t=m||1/at,e=Math.min(w,t,0)},fps:function(m){s=1e3/(m||240),o=h.time*1e3+s},add:function(m,w,T){var S=w?function(C,_,D,y){m(C,_,D,y),h.remove(S)}:m;return h.remove(m),a[T?"unshift":"push"](S),ei(),S},remove:function(m,w){~(w=a.indexOf(m))&&a.splice(w,1)&&f>=w&&f--},_listeners:a},h}(),ei=function(){return!Yi&&ie.wake()},K={},D_=/^[\d.\-M][\d.\-,\s]/,x_=/["']/g,k_=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),r=i[0],s=1,o=i.length,a,u,l;s<o;s++)u=i[s],a=s!==o-1?u.lastIndexOf(","):u.length,l=u.substr(0,a),e[r]=isNaN(l)?l.replace(x_,"").trim():+l,r=u.substr(a+1).trim();return e},R_=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)},O_=function(t){var e=(t+"").split("("),i=K[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[k_(e[1])]:R_(t).split(",").map(Uh)):K._CE&&D_.test(t)?K._CE("",t):i},rf=function(t){return function(e){return 1-t(1-e)}},sf=function n(t,e){for(var i=t._first,r;i;)i instanceof Ot?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=e)),i=i._next},En=function(t,e){return t&&(gt(t)?t:K[t]||O_(t))||e},Rn=function(t,e,i,r){i===void 0&&(i=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:r},o;return Jt(t,function(a){K[a]=ae[a]=s,K[o=a.toLowerCase()]=i;for(var u in s)K[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=K[a+"."+u]=s[u]}),s},of=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Hs=function n(t,e,i){var r=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/ko*(Math.asin(1/r)||0),a=function(c){return c===1?1:r*Math.pow(2,-10*c)*o_((c-o)*s)+1},u=t==="out"?a:t==="in"?function(l){return 1-a(1-l)}:of(a);return s=ko/s,u.config=function(l,c){return n(t,l,c)},u},Ks=function n(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:of(i);return r.config=function(s){return n(t,s)},r};Jt("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;Rn(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});K.Linear.easeNone=K.none=K.Linear.easeIn;Rn("Elastic",Hs("in"),Hs("out"),Hs());(function(n,t){var e=1/t,i=2*e,r=2.5*e,s=function(a){return a<e?n*a*a:a<i?n*Math.pow(a-1.5/t,2)+.75:a<r?n*(a-=2.25/t)*a+.9375:n*Math.pow(a-2.625/t,2)+.984375};Rn("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Rn("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Rn("Circ",function(n){return-(xh(1-n*n)-1)});Rn("Sine",function(n){return n===1?1:-s_(n*i_)+1});Rn("Back",Ks("in"),Ks("out"),Ks());K.SteppedEase=K.steps=ae.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,r=t+(e?0:1),s=e?1:0,o=1-at;return function(a){return((r*gr(0,o,a)|0)+s)*i}}};Jn.ease=K["quad.out"];Jt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return qa+=n+","+n+"Params,"});var af=function(t,e){this.id=r_++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Bh,this.set=e?e.getSetter:Xa},ni=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ti(this,+e.duration,1,1),this.data=e.data,Et&&(this._ctx=Et,Et.data.push(this)),Yi||ie.wake()}var t=n.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,ti(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(ei(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(bs(this,i),!s._dp||s.parent||qh(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Te(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===at||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),$h(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+cl(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+cl(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Zn(this._tTime,s)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-at?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Yr(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-at?0:this._rts,this.totalTime(gr(-this._delay,this._tDur,r),!0),Ss(this),f_(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ei(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==at&&(this._tTime-=at)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Te(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Qt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Yr(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=ki);var r=_e;return _e=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),this.data!=="nested"&&Ve(this),_e=r,this},t.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,hl(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,hl(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(he(this,i),Qt(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Qt(r))},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-at:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-at,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-at)},t.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},t.then=function(i){var r=this;return new Promise(function(s){var o=gt(i)?i:zh,a=function(){var l=r.then;r.then=null,gt(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),s(o),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){Ei(this)},n}();me(ni.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-at,_prom:0,_ps:!1,_rts:1});var Ot=function(n){Dh(t,n);function t(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Qt(i.sortChildren),ft&&Te(i.parent||ft,De(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Gh(De(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Oi(0,arguments,this),this},e.from=function(r,s,o){return Oi(1,arguments,this),this},e.fromTo=function(r,s,o,a){return Oi(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,Ri(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new wt(r,s,he(this,o),1),this},e.call=function(r,s,o){return Te(this,wt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,a,u,l,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=c,o.parent=this,new wt(r,o,he(this,u)),this},e.staggerFrom=function(r,s,o,a,u,l,c){return o.runBackwards=1,Ri(o).immediateRender=Qt(o.immediateRender),this.staggerTo(r,s,o,a,u,l,c)},e.staggerFromTo=function(r,s,o,a,u,l,c,h){return a.startAt=o,Ri(a).immediateRender=Qt(a.immediateRender),this.staggerTo(r,s,a,u,l,c,h)},e.render=function(r,s,o){var a=this._time,u=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=r<=0?0:Rt(r),h=this._zTime<0!=r<0&&(this._initted||!l),d,f,g,p,m,w,T,S,C,_,D,y;if(this!==ft&&c>u&&r>=0&&(c=u),c!==this._tTime||o||h){if(a!==this._time&&l&&(c+=this._time-a,r+=this._time-a),d=c,C=this._start,S=this._ts,w=!S,h&&(l||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(D=this._yoyo,m=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(m*100+r,s,o);if(d=Rt(c%m),c===u?(p=this._repeat,d=l):(p=~~(c/m),p&&p===c/m&&(d=l,p--),d>l&&(d=l)),_=Zn(this._tTime,m),!a&&this._tTime&&_!==p&&(_=p),D&&p&1&&(d=l-d,y=1),p!==_&&!this._lock){var v=D&&_&1,b=v===(D&&p&1);if(p<_&&(v=!v),a=v?0:l,this._lock=1,this.render(a||(y?0:Rt(p*m)),s,!l)._lock=0,this._tTime=c,!s&&this.parent&&ge(this,"onRepeat"),this.vars.repeatRefresh&&!y&&(this.invalidate()._lock=1),a&&a!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,u=this._tDur,b&&(this._lock=2,a=v?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!y&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;sf(this,y)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=m_(this,Rt(a),Rt(d)),T&&(c-=d-(d=T._start))),this._tTime=c,this._time=d,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&(ge(this,"onStart"),this._tTime!==c))return this;if(d>=a&&r>=0)for(f=this._first;f;){if(g=f._next,(f._act||d>=f._start)&&f._ts&&T!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!w){T=0,g&&(c+=this._zTime=-at);break}}f=g}else{o=o||_e,f=this._last;for(var P=r<0?r:d;f;){if(g=f._prev,(f._act||P<=f._end)&&f._ts&&T!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(P-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(P-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!w){T=0,g&&(c+=this._zTime=P?-at:at);break}}f=g}}if(T&&!s&&(this.pause(),T.render(d>=a?0:-at)._zTime=d>=a?1:-1,this._ts))return this._start=C,Ss(this),this.render(r,s,o);this._onUpdate&&!s&&ge(this,"onUpdate",!0),(c===u&&this._tTime>=this.totalDuration()||!c&&a)&&(C===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(c===u&&this._ts>0||!c&&this._ts<0)&&Ve(this,1),!s&&!(r<0&&!a)&&(c||a||!u)&&(ge(this,c===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(Fe(s)||(s=he(this,s,r)),!(r instanceof ni)){if(Ut(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Dt(r))return this.addLabel(r,s);if(gt(r))r=wt.delayedCall(0,r);else return this}return this!==r?Te(this,r,s):this},e.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-de);for(var u=[],l=this._first;l;)l._start>=a&&(l instanceof wt?s&&u.push(l):(o&&u.push(l),r&&u.push.apply(u,l.getChildren(!0,s,o)))),l=l._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return Dt(r)?this.removeLabel(r):gt(r)?this.killTweensOf(r):(Ts(this,r),r===this._recent&&(this._recent=this._last),wn(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Rt(ie.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=he(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var a=wt.delayedCall(0,s||Wi,o);return a.data="isPause",this._hasPause=1,Te(this,a,he(this,r))},e.removePause=function(r){var s=this._first;for(r=he(this,r);s;)s._start===r&&s.data==="isPause"&&Ve(s),s=s._next},e.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),u=a.length;u--;)$e!==a[u]&&a[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],a=pe(r),u=this._first,l=Fe(s),c;u;)u instanceof wt?l_(u._targets,a)&&(l?(!$e||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(c=u.getTweensOf(a,s)).length&&o.push.apply(o,c),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,a=he(o,r),u=s,l=u.startAt,c=u.onStart,h=u.onStartParams,d=u.immediateRender,f,g=wt.to(o,me({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||at,onStart:function(){if(o.pause(),!f){var m=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());g._dur!==m&&ti(g,m,0,1).render(g._time,!0,!0),f=1}c&&c.apply(g,h||[])}},s));return d?g.render(0):g},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,me({startAt:{time:he(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),fl(this,he(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),fl(this,he(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+at)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,u=this.labels,l;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(l in u)u[l]>=o&&(u[l]+=r);return wn(this)},e.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),wn(this)},e.totalDuration=function(r){var s=0,o=this,a=o._last,u=de,l,c,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>u&&o._sort&&a._ts&&!o._lock?(o._lock=1,Te(o,a,c-a._delay,1)._lock=0):u=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),u=0),a._end>s&&a._ts&&(s=a._end),a=l;ti(o,o===ft&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(ft._ts&&($h(ft,Yr(r,ft)),Vh=ie.frame),ie.frame>=ul){ul+=re.autoSleep||120;var s=ft._first;if((!s||!s._ts)&&re.autoSleep&&ie._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ie.sleep()}}},t}(ni);me(Ot.prototype,{_lock:0,_hasPause:0,_forcing:0});var N_=function(t,e,i,r,s,o,a){var u=new Zt(this._pt,t,e,0,1,df,null,s),l=0,c=0,h,d,f,g,p,m,w,T;for(u.b=i,u.e=r,i+="",r+="",(w=~r.indexOf("random("))&&(r=Xi(r)),o&&(T=[i,r],o(T,t,e),i=T[0],r=T[1]),d=i.match(js)||[];h=js.exec(r);)g=h[0],p=r.substring(l,h.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),g!==d[c++]&&(m=parseFloat(d[c-1])||0,u._pt={_next:u._pt,p:p||c===1?p:",",s:m,c:g.charAt(1)==="="?zn(m,g)-m:parseFloat(g)-m,m:f&&f<4?Math.round:0},l=js.lastIndex);return u.c=l<r.length?r.substring(l,r.length):"",u.fp=a,(Nh.test(r)||w)&&(u.e=0),this._pt=u,u},Ha=function(t,e,i,r,s,o,a,u,l,c){gt(r)&&(r=r(s||0,t,o));var h=t[e],d=i!=="get"?i:gt(h)?l?t[e.indexOf("set")||!gt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():h,f=gt(h)?l?V_:hf:Wa,g;if(Dt(r)&&(~r.indexOf("random(")&&(r=Xi(r)),r.charAt(1)==="="&&(g=zn(d,r)+(Bt(d)||0),(g||g===0)&&(r=g))),!c||d!==r||Bo)return!isNaN(d*r)&&r!==""?(g=new Zt(this._pt,t,e,+d||0,r-(d||0),typeof h=="boolean"?$_:ff,0,f),l&&(g.fp=l),a&&g.modifier(a,this,t),this._pt=g):(!h&&!(e in t)&&za(e,r),N_.call(this,t,e,d,r,f,u||re.stringFilter,l))},P_=function(t,e,i,r,s){if(gt(t)&&(t=Ni(t,s,e,i,r)),!Ae(t)||t.style&&t.nodeType||Ut(t)||Rh(t))return Dt(t)?Ni(t,s,e,i,r):t;var o={},a;for(a in t)o[a]=Ni(t[a],s,e,i,r);return o},uf=function(t,e,i,r,s,o){var a,u,l,c;if(ne[t]&&(a=new ne[t]).init(s,a.rawVars?e[t]:P_(e[t],r,s,o,i),i,r,o)!==!1&&(i._pt=u=new Zt(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==Vn))for(l=i._ptLookup[i._targets.indexOf(s)],c=a._props.length;c--;)l[a._props[c]]=u;return a},$e,Bo,Ka=function n(t,e){var i=t.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,u=i.onUpdate,l=i.onUpdateParams,c=i.callbackScope,h=i.runBackwards,d=i.yoyoEase,f=i.keyframes,g=i.autoRevert,p=t._dur,m=t._startAt,w=t._targets,T=t.parent,S=T&&T.data==="nested"?T.parent._targets:w,C=t._overwrite==="auto"&&!Ba,_=t.timeline,D,y,v,b,P,V,q,W,tt,st,ct,x,F;if(_&&(!f||!r)&&(r="none"),t._ease=En(r,Jn.ease),t._yEase=d?rf(En(d===!0?r:d,Jn.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!_&&!!i.runBackwards,!_||f&&!i.stagger){if(W=w[0]?vn(w[0]).harness:0,x=W&&i[W.prop],D=Xr(i,ja),m&&(m.revert(h&&p?ki:u_),m._lazy=0),s){if(Ve(t._startAt=wt.set(w,me({data:"isStart",overwrite:!1,parent:T,immediateRender:!0,lazy:Qt(a),startAt:null,delay:0,onUpdate:u,onUpdateParams:l,callbackScope:c,stagger:0},s))),e<0&&(_e||!o&&!g)&&t._startAt.revert(ki),o&&p&&e<=0){e&&(t._zTime=e);return}}else if(h&&p&&!m){if(e&&(o=!1),v=me({overwrite:!1,data:"isFromStart",lazy:o&&Qt(a),immediateRender:o,stagger:0,parent:T},D),x&&(v[W.prop]=x),Ve(t._startAt=wt.set(w,v)),e<0&&(_e?t._startAt.revert(ki):t._startAt.render(-1,!0)),t._zTime=e,!o)n(t._startAt,at);else if(!e)return}for(t._pt=t._ptCache=0,a=p&&Qt(a)||a&&!p,y=0;y<w.length;y++){if(P=w[y],q=P._gsap||Ga(w)[y]._gsap,t._ptLookup[y]=st={},No[q.id]&&qe.length&&Wr(),ct=S===w?y:S.indexOf(P),W&&(tt=new W).init(P,x||D,t,ct,S)!==!1&&(t._pt=b=new Zt(t._pt,P,tt.name,0,1,tt.render,tt,0,tt.priority),tt._props.forEach(function(A){st[A]=b}),tt.priority&&(V=1)),!W||x)for(v in D)ne[v]&&(tt=uf(v,D,t,ct,P,S))?tt.priority&&(V=1):st[v]=b=Ha.call(t,P,v,"get",D[v],ct,S,0,i.stringFilter);t._op&&t._op[y]&&t.kill(P,t._op[y]),C&&t._pt&&($e=t,ft.killTweensOf(P,st,t.globalTime(e)),F=!t.parent,$e=0),t._pt&&a&&(No[q.id]=1)}V&&pf(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!F,f&&e<=0&&_.render(de,!0,!0)},M_=function(t,e,i,r,s,o,a){var u=(t._pt&&t._ptCache||(t._ptCache={}))[e],l,c,h,d;if(!u)for(u=t._ptCache[e]=[],h=t._ptLookup,d=t._targets.length;d--;){if(l=h[d][e],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return Bo=1,t.vars[e]="+=0",Ka(t,a),Bo=0,1;u.push(l)}for(d=u.length;d--;)c=u[d],l=c._pt||c,l.s=(r||r===0)&&!s?r:l.s+(r||0)+o*l.c,l.c=i-l.s,c.e&&(c.e=yt(i)+Bt(c.e)),c.b&&(c.b=l.s+Bt(c.b))},L_=function(t,e){var i=t[0]?vn(t[0]).harness:0,r=i&&i.aliases,s,o,a,u;if(!r)return e;s=Dn({},e);for(o in r)if(o in s)for(u=r[o].split(","),a=u.length;a--;)s[u[a]]=s[o];return s},F_=function(t,e,i,r){var s=e.ease||r||"power1.inOut",o,a;if(Ut(e))a=i[t]||(i[t]=[]),e.forEach(function(u,l){return a.push({t:l/(e.length-1)*100,v:u,e:s})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:s})},Ni=function(t,e,i,r,s){return gt(t)?t.call(e,i,r,s):Dt(t)&&~t.indexOf("random(")?Xi(t):t},lf=qa+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cf={};Jt(lf+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return cf[n]=1});var wt=function(n){Dh(t,n);function t(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Ri(r))||this;var u=a.vars,l=u.duration,c=u.delay,h=u.immediateRender,d=u.stagger,f=u.overwrite,g=u.keyframes,p=u.defaults,m=u.scrollTrigger,w=u.yoyoEase,T=r.parent||ft,S=(Ut(i)||Rh(i)?Fe(i[0]):"length"in r)?[i]:pe(i),C,_,D,y,v,b,P,V;if(a._targets=S.length?Ga(S):Kr("GSAP target "+i+" not found. https://greensock.com",!re.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||d||br(l)||br(c)){if(r=a.vars,C=a.timeline=new Ot({data:"nested",defaults:p||{}}),C.kill(),C.parent=C._dp=De(a),C._start=0,d||br(l)||br(c)){if(y=S.length,P=d&&Xh(d),Ae(d))for(v in d)~lf.indexOf(v)&&(V||(V={}),V[v]=d[v]);for(_=0;_<y;_++)D=Xr(r,cf),D.stagger=0,w&&(D.yoyoEase=w),V&&Dn(D,V),b=S[_],D.duration=+Ni(l,De(a),_,b,S),D.delay=(+Ni(c,De(a),_,b,S)||0)-a._delay,!d&&y===1&&D.delay&&(a._delay=c=D.delay,a._start+=c,D.delay=0),C.to(b,D,P?P(_,b,S):0),C._ease=K.none;C.duration()?l=c=0:a.timeline=0}else if(g){Ri(me(C.vars.defaults,{ease:"none"})),C._ease=En(g.ease||r.ease||"none");var q=0,W,tt,st;if(Ut(g))g.forEach(function(ct){return C.to(S,ct,">")}),C.duration();else{D={};for(v in g)v==="ease"||v==="easeEach"||F_(v,g[v],D,g.easeEach);for(v in D)for(W=D[v].sort(function(ct,x){return ct.t-x.t}),q=0,_=0;_<W.length;_++)tt=W[_],st={ease:tt.e,duration:(tt.t-(_?W[_-1].t:0))/100*l},st[v]=tt.v,C.to(S,st,q),q+=st.duration;C.duration()<l&&C.to({},{duration:l-C.duration()})}}l||a.duration(l=C.duration())}else a.timeline=0;return f===!0&&!Ba&&($e=De(a),ft.killTweensOf(S),$e=0),Te(T,De(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!l&&!g&&a._start===Rt(T._time)&&Qt(h)&&d_(De(a))&&T.data!=="nested")&&(a._tTime=-at,a.render(Math.max(0,-c))),m&&Gh(De(a),m),a}var e=t.prototype;return e.render=function(r,s,o){var a=this._time,u=this._tDur,l=this._dur,c=r<0,h=r>u-at&&!c?u:r<at?0:r,d,f,g,p,m,w,T,S,C;if(!l)g_(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=h,S=this.timeline,this._repeat){if(p=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+r,s,o);if(d=Rt(h%p),h===u?(g=this._repeat,d=l):(g=~~(h/p),g&&g===h/p&&(d=l,g--),d>l&&(d=l)),w=this._yoyo&&g&1,w&&(C=this._yEase,d=l-d),m=Zn(this._tTime,p),d===a&&!o&&this._initted)return this._tTime=h,this;g!==m&&(S&&this._yEase&&sf(S,w),this.vars.repeatRefresh&&!w&&!this._lock&&(this._lock=o=1,this.render(Rt(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(Hh(this,c?r:d,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(C||this._ease)(d/l),this._from&&(this.ratio=T=1-T),d&&!a&&!s&&(ge(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(T,f.d),f=f._next;S&&S.render(r<0?r:!d&&w?-at:S._dur*S._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(c&&Po(this,r,s,o),ge(this,"onUpdate")),this._repeat&&g!==m&&this.vars.onRepeat&&!s&&this.parent&&ge(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&Po(this,r,!0,!0),(r||!l)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ve(this,1),!s&&!(c&&!a)&&(h||a)&&(ge(this,h===u?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},e.resetTo=function(r,s,o,a){Yi||ie.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||Ka(this,u),l=this._ease(u/this._dur),M_(this,r,s,o,a,l,u)?this.resetTo(r,s,o,a):(bs(this,0),this.parent||jh(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ei(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,$e&&$e.vars.overwrite!==!0)._first||Ei(this),this.parent&&o!==this.timeline.totalDuration()&&ti(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,u=r?pe(r):a,l=this._ptLookup,c=this._pt,h,d,f,g,p,m,w;if((!s||s==="all")&&h_(a,u))return s==="all"&&(this._pt=0),Ei(this);for(h=this._op=this._op||[],s!=="all"&&(Dt(s)&&(p={},Jt(s,function(T){return p[T]=1}),s=p),s=L_(a,s)),w=a.length;w--;)if(~u.indexOf(a[w])){d=l[w],s==="all"?(h[w]=s,g=d,f={}):(f=h[w]=h[w]||{},g=s);for(p in g)m=d&&d[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&Ts(this,m,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&c&&Ei(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Oi(1,arguments)},t.delayedCall=function(r,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(r,s,o){return Oi(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return ft.killTweensOf(r,s,o)},t}(ni);me(wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Jt("staggerTo,staggerFrom,staggerFromTo",function(n){wt[n]=function(){var t=new Ot,e=Lo.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),t[n].apply(t,e)}});var Wa=function(t,e,i){return t[e]=i},hf=function(t,e,i){return t[e](i)},V_=function(t,e,i,r){return t[e](r.fp,i)},B_=function(t,e,i){return t.setAttribute(e,i)},Xa=function(t,e){return gt(t[e])?hf:$a(t[e])&&t.setAttribute?B_:Wa},ff=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},$_=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},df=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},Ya=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},U_=function(t,e,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,i),s=o},z_=function(t){for(var e=this._pt,i,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?Ts(this,e,"_pt"):e.dep||(i=1),e=r;return!i},j_=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},pf=function(t){for(var e=t._pt,i,r,s,o;e;){for(i=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=i}t._pt=s},Zt=function(){function n(e,i,r,s,o,a,u,l,c){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||ff,this.d=u||this,this.set=l||Wa,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=n.prototype;return t.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=j_,this.m=i,this.mt=s,this.tween=r},n}();Jt(qa+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return ja[n]=1});ae.TweenMax=ae.TweenLite=wt;ae.TimelineLite=ae.TimelineMax=Ot;ft=new Ot({sortChildren:!1,defaults:Jn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});re.stringFilter=nf;var ii=[],kr={},q_=[],pl=0,Ws=function(t){return(kr[t]||q_).map(function(e){return e()})},$o=function(){var t=Date.now(),e=[];t-pl>2&&(Ws("matchMediaInit"),ii.forEach(function(i){var r=i.queries,s=i.conditions,o,a,u,l;for(a in r)o=fe.matchMedia(r[a]).matches,o&&(u=1),o!==s[a]&&(s[a]=o,l=1);l&&(i.revert(),u&&e.push(i))}),Ws("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i)}),pl=t,Ws("matchMedia"))},gf=function(){function n(e,i){this.selector=i&&Fo(i),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=n.prototype;return t.add=function(i,r,s){gt(i)&&(s=r,r=i,i=gt);var o=this,a=function(){var l=Et,c=o.selector,h;return l&&l.data.push(o),s&&(o.selector=Fo(s)),Et=o,h=r.apply(o,arguments),gt(h)&&o._r.push(h),Et=l,o.selector=c,o.isReverted=!1,h};return o.last=a,i===gt?a(o):i?o[i]=a:a},t.ignore=function(i){var r=Et;Et=null,i(this),Et=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof wt&&r._targets[0]!==r.vars.onComplete&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,u){return u.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof ni)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=ii.indexOf(this);~o&&ii.splice(o,1)}},t.revert=function(i){this.kill(i||{})},n}(),G_=function(){function n(e){this.contexts=[],this.scope=e}var t=n.prototype;return t.add=function(i,r,s){Ae(i)||(i={matches:i});var o=new gf(0,s||this.scope),a=o.conditions={},u,l,c;this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(l in i)l==="all"?c=1:(u=fe.matchMedia(i[l]),u&&(ii.indexOf(o)<0&&ii.push(o),(a[l]=u.matches)&&(c=1),u.addListener?u.addListener($o):u.addEventListener("change",$o)));return c&&r(o),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),Qr={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(r){return A_(r)})},timeline:function(t){return new Ot(t)},getTweensOf:function(t,e){return ft.getTweensOf(t,e)},getProperty:function(t,e,i,r){Dt(t)&&(t=pe(t)[0]);var s=vn(t||{}).get,o=i?zh:Uh;return i==="native"&&(i=""),t&&(e?o((ne[e]&&ne[e].get||s)(t,e,i,r)):function(a,u,l){return o((ne[a]&&ne[a].get||s)(t,a,u,l))})},quickSetter:function(t,e,i){if(t=pe(t),t.length>1){var r=t.map(function(c){return ue.quickSetter(c,e,i)}),s=r.length;return function(c){for(var h=s;h--;)r[h](c)}}t=t[0]||{};var o=ne[e],a=vn(t),u=a.harness&&(a.harness.aliases||{})[e]||e,l=o?function(c){var h=new o;Vn._pt=0,h.init(t,i?c+i:c,Vn,0,[t]),h.render(1,h),Vn._pt&&Ya(1,Vn)}:a.set(t,u);return o?l:function(c){return l(t,u,i?c+i:c,a,1)}},quickTo:function(t,e,i){var r,s=ue.to(t,Dn((r={},r[e]="+=0.1",r.paused=!0,r),i||{})),o=function(u,l,c){return s.resetTo(e,u,l,c)};return o.tween=s,o},isTweening:function(t){return ft.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=En(t.ease,Jn.ease)),ll(Jn,t||{})},config:function(t){return ll(re,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!ne[a]&&!ae[a]&&Kr(e+" effect requires "+a+" plugin.")}),qs[e]=function(a,u,l){return i(pe(a),me(u||{},s),l)},o&&(Ot.prototype[e]=function(a,u,l){return this.add(qs[e](a,Ae(u)?u:(l=u)&&{},this),l)})},registerEase:function(t,e){K[t]=En(e)},parseEase:function(t,e){return arguments.length?En(t,e):K},getById:function(t){return ft.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new Ot(t),r,s;for(i.smoothChildTiming=Qt(t.smoothChildTiming),ft.remove(i),i._dp=0,i._time=i._tTime=ft._time,r=ft._first;r;)s=r._next,(e||!(!r._dur&&r instanceof wt&&r.vars.onComplete===r._targets[0]))&&Te(i,r,r._start-r._delay),r=s;return Te(ft,i,0),i},context:function(t,e){return t?new gf(t,e):Et},matchMedia:function(t){return new G_(t)},matchMediaRefresh:function(){return ii.forEach(function(t){var e=t.conditions,i,r;for(r in e)e[r]&&(e[r]=!1,i=1);i&&t.revert()})||$o()},addEventListener:function(t,e){var i=kr[t]||(kr[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=kr[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:S_,wrapYoyo:b_,distribute:Xh,random:Qh,snap:Yh,normalize:T_,getUnit:Bt,clamp:__,splitColor:tf,toArray:pe,selector:Fo,mapRange:Zh,pipe:w_,unitize:E_,interpolate:C_,shuffle:Wh},install:Lh,effects:qs,ticker:ie,updateRoot:Ot.updateRoot,plugins:ne,globalTimeline:ft,core:{PropTween:Zt,globals:Fh,Tween:wt,Timeline:Ot,Animation:ni,getCache:vn,_removeLinkedListItem:Ts,reverting:function(){return _e},context:function(t){return t&&Et&&(Et.data.push(t),t._ctx=Et),Et},suppressOverwrites:function(t){return Ba=t}}};Jt("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Qr[n]=wt[n]});ie.add(Ot.updateRoot);Vn=Qr.to({},{duration:0});var H_=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},K_=function(t,e){var i=t._targets,r,s,o;for(r in e)for(s=i.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=H_(o,r)),o&&o.modifier&&o.modifier(e[r],t,i[s],r))},Xs=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(a){var u,l;if(Dt(s)&&(u={},Jt(s,function(c){return u[c]=1}),s=u),e){u={};for(l in s)u[l]=e(s[l]);s=u}K_(a,s)}}}},ue=Qr.registerPlugin({name:"attr",init:function(t,e,i,r,s){var o,a,u;this.tween=i;for(o in e)u=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),a.op=o,a.b=u,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)_e?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Xs("roundProps",Vo),Xs("modifiers"),Xs("snap",Yh))||Qr;wt.version=Ot.version=ue.version="3.11.0";Mh=1;kh()&&ei();K.Power0;K.Power1;K.Power2;K.Power3;K.Power4;K.Linear;K.Quad;K.Cubic;K.Quart;K.Quint;K.Strong;K.Elastic;K.Back;K.SteppedEase;K.Bounce;K.Sine;K.Expo;K.Circ;/*!
 * CSSPlugin 3.11.0
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gl,Ue,jn,Qa,dn,ml,Ja,W_=function(){return typeof window<"u"},Be={},un=180/Math.PI,qn=Math.PI/180,Pn=Math.atan2,yl=1e8,Za=/([A-Z])/g,X_=/(left|right|width|margin|padding|x)/i,Y_=/[\s,\(]\S/,Re={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Uo=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Q_=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},J_=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Z_=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},mf=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},yf=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},t0=function(t,e,i){return t.style[e]=i},e0=function(t,e,i){return t.style.setProperty(e,i)},n0=function(t,e,i){return t._gsap[e]=i},i0=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},r0=function(t,e,i,r,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},s0=function(t,e,i,r,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},pt="transform",Se=pt+"Origin",o0=function(t){var e=this,i=this.target,r=i.style;if(t in Be){if(this.tfm=this.tfm||{},t!=="transform"&&(t=Re[t]||t,~t.indexOf(",")?t.split(",").forEach(function(s){return e.tfm[s]=xe(i,s)}):this.tfm[t]=i._gsap.x?i._gsap[t]:xe(i,t)),i._gsap.svg&&(this.svg=i.getAttribute(t)||""),this.props.indexOf(pt)>=0)return;t=pt}r&&this.props.push(t,r[t])},_f=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},a0=function(){var t=this.props,e=this.target,i=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=2)t[s+1]?i[t[s]]=t[s+1]:i.removeProperty(t[s].replace(Za,"-$1").toLowerCase());if(this.tfm){r.svg&&e.setAttribute("transform",this.svg||"");for(o in this.tfm)r[o]=this.tfm[o];s=Ja(),s&&!s.isStart&&!i[pt]&&(_f(i),r.uncache=1)}},vf=function(t,e){var i={target:t,props:[],revert:a0,save:o0};return e&&e.split(",").forEach(function(r){return i.save(r)}),i},wf,zo=function(t,e){var i=Ue.createElementNS?Ue.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Ue.createElement(t);return i.style?i:Ue.createElement(t)},be=function n(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Za,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&n(t,ri(e)||e,1)||""},_l="O,Moz,ms,Ms,Webkit".split(","),ri=function(t,e,i){var r=e||dn,s=r.style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(_l[o]+t in s););return o<0?null:(o===3?"ms":o>=0?_l[o]:"")+t},jo=function(){W_()&&window.document&&(gl=window,Ue=gl.document,jn=Ue.documentElement,dn=zo("div")||{style:{}},zo("div"),pt=ri(pt),Se=pt+"Origin",dn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",wf=!!ri("perspective"),Ja=ue.core.reverting,Qa=1)},Ys=function n(t){var e=zo("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(jn.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),jn.removeChild(e),this.style.cssText=s,o},vl=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Ef=function(t){var e;try{e=t.getBBox()}catch{e=Ys.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Ys||(e=Ys.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+vl(t,["x","cx","x1"])||0,y:+vl(t,["y","cy","y1"])||0,width:0,height:0}:e},Tf=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Ef(t))},Qi=function(t,e){if(e){var i=t.style;e in Be&&e!==Se&&(e=pt),i.removeProperty?((e.substr(0,2)==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(e.replace(Za,"-$1").toLowerCase())):i.removeAttribute(e)}},ze=function(t,e,i,r,s,o){var a=new Zt(t._pt,e,i,0,1,o?yf:mf);return t._pt=a,a.b=r,a.e=s,t._props.push(i),a},wl={deg:1,rad:1,turn:1},u0={grid:1,flex:1},Xe=function n(t,e,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=dn.style,u=X_.test(e),l=t.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(u?"Width":"Height"),h=100,d=r==="px",f=r==="%",g,p,m,w;return r===o||!s||wl[r]||wl[o]?s:(o!=="px"&&!d&&(s=n(t,e,i,"px")),w=t.getCTM&&Tf(t),(f||o==="%")&&(Be[e]||~e.indexOf("adius"))?(g=w?t.getBBox()[u?"width":"height"]:t[c],yt(f?s/g*h:s/100*g)):(a[u?"width":"height"]=h+(d?o:r),p=~e.indexOf("adius")||r==="em"&&t.appendChild&&!l?t:t.parentNode,w&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===Ue||!p.appendChild)&&(p=Ue.body),m=p._gsap,m&&f&&m.width&&u&&m.time===ie.time&&!m.uncache?yt(s/m.width*h):((f||o==="%")&&!u0[be(p,"display")]&&(a.position=be(t,"position")),p===t&&(a.position="static"),p.appendChild(dn),g=dn[c],p.removeChild(dn),a.position="absolute",u&&f&&(m=vn(p),m.time=ie.time,m.width=p[c]),yt(d?g*s/h:g&&s?h/g*s:0))))},xe=function(t,e,i,r){var s;return Qa||jo(),e in Re&&e!=="transform"&&(e=Re[e],~e.indexOf(",")&&(e=e.split(",")[0])),Be[e]&&e!=="transform"?(s=Zi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Zr(be(t,Se))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Jr[e]&&Jr[e](t,e,i)||be(t,e)||Bh(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Xe(t,e,s,i)+i:s},l0=function(t,e,i,r){if(!i||i==="none"){var s=ri(e,t,1),o=s&&be(t,s,1);o&&o!==i?(e=s,i=o):e==="borderColor"&&(i=be(t,"borderTopColor"))}var a=new Zt(this._pt,t.style,e,0,1,df),u=0,l=0,c,h,d,f,g,p,m,w,T,S,C,_;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(t.style[e]=r,r=be(t,e)||r,t.style[e]=i),c=[i,r],nf(c),i=c[0],r=c[1],d=i.match(Fn)||[],_=r.match(Fn)||[],_.length){for(;h=Fn.exec(r);)m=h[0],T=r.substring(u,h.index),g?g=(g+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(g=1),m!==(p=d[l++]||"")&&(f=parseFloat(p)||0,C=p.substr((f+"").length),m.charAt(1)==="="&&(m=zn(f,m)+C),w=parseFloat(m),S=m.substr((w+"").length),u=Fn.lastIndex-S.length,S||(S=S||re.units[e]||C,u===r.length&&(r+=S,a.e+=S)),C!==S&&(f=Xe(t,e,p,S)||0),a._pt={_next:a._pt,p:T||l===1?T:",",s:f,c:w-f,m:g&&g<4||e==="zIndex"?Math.round:0});a.c=u<r.length?r.substring(u,r.length):""}else a.r=e==="display"&&r==="none"?yf:mf;return Nh.test(r)&&(a.e=0),this._pt=a,a},El={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},c0=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),e[0]=El[i]||i,e[1]=El[r]||r,e.join(" ")},h0=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,r=i.style,s=e.u,o=i._gsap,a,u,l;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),l=s.length;--l>-1;)a=s[l],Be[a]&&(u=1,a=a==="transformOrigin"?Se:pt),Qi(i,a);u&&(Qi(i,pt),o&&(o.svg&&i.removeAttribute("transform"),Zi(i,1),o.uncache=1,_f(r)))}},Jr={clearProps:function(t,e,i,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Zt(t._pt,e,i,0,0,h0);return o.u=r,o.pr=-10,o.tween=s,t._props.push(i),1}}},Ji=[1,0,0,1,0,0],Sf={},bf=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Tl=function(t){var e=be(t,pt);return bf(e)?Ji:e.substr(7).match(Oh).map(yt)},tu=function(t,e){var i=t._gsap||vn(t),r=t.style,s=Tl(t),o,a,u,l;return i.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?Ji:s):(s===Ji&&!t.offsetParent&&t!==jn&&!i.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(l=1,a=t.nextElementSibling,jn.appendChild(t)),s=Tl(t),u?r.display=u:Qi(t,"display"),l&&(a?o.insertBefore(t,a):o?o.appendChild(t):jn.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},qo=function(t,e,i,r,s,o){var a=t._gsap,u=s||tu(t,!0),l=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=u[0],g=u[1],p=u[2],m=u[3],w=u[4],T=u[5],S=e.split(" "),C=parseFloat(S[0])||0,_=parseFloat(S[1])||0,D,y,v,b;i?u!==Ji&&(y=f*m-g*p)&&(v=C*(m/y)+_*(-p/y)+(p*T-m*w)/y,b=C*(-g/y)+_*(f/y)-(f*T-g*w)/y,C=v,_=b):(D=Ef(t),C=D.x+(~S[0].indexOf("%")?C/100*D.width:C),_=D.y+(~(S[1]||S[0]).indexOf("%")?_/100*D.height:_)),r||r!==!1&&a.smooth?(w=C-l,T=_-c,a.xOffset=h+(w*f+T*p)-w,a.yOffset=d+(w*g+T*m)-T):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=_,a.smooth=!!r,a.origin=e,a.originIsAbsolute=!!i,t.style[Se]="0px 0px",o&&(ze(o,a,"xOrigin",l,C),ze(o,a,"yOrigin",c,_),ze(o,a,"xOffset",h,a.xOffset),ze(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",C+" "+_)},Zi=function(t,e){var i=t._gsap||new af(t);if("x"in i&&!e&&!i.uncache)return i;var r=t.style,s=i.scaleX<0,o="px",a="deg",u=getComputedStyle(t),l=be(t,Se)||"0",c,h,d,f,g,p,m,w,T,S,C,_,D,y,v,b,P,V,q,W,tt,st,ct,x,F,A,U,rt,mt,le,Ft,te;return c=h=d=p=m=w=T=S=C=0,f=g=1,i.svg=!!(t.getCTM&&Tf(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[pt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+u[pt]),r.scale=r.rotate=r.translate="none"),y=tu(t,i.svg),i.svg&&(x=(!i.uncache||l==="0px 0px")&&!e&&t.getAttribute("data-svg-origin"),qo(t,x||l,!!x||i.originIsAbsolute,i.smooth!==!1,y)),_=i.xOrigin||0,D=i.yOrigin||0,y!==Ji&&(V=y[0],q=y[1],W=y[2],tt=y[3],c=st=y[4],h=ct=y[5],y.length===6?(f=Math.sqrt(V*V+q*q),g=Math.sqrt(tt*tt+W*W),p=V||q?Pn(q,V)*un:0,T=W||tt?Pn(W,tt)*un+p:0,T&&(g*=Math.abs(Math.cos(T*qn))),i.svg&&(c-=_-(_*V+D*W),h-=D-(_*q+D*tt))):(te=y[6],le=y[7],U=y[8],rt=y[9],mt=y[10],Ft=y[11],c=y[12],h=y[13],d=y[14],v=Pn(te,mt),m=v*un,v&&(b=Math.cos(-v),P=Math.sin(-v),x=st*b+U*P,F=ct*b+rt*P,A=te*b+mt*P,U=st*-P+U*b,rt=ct*-P+rt*b,mt=te*-P+mt*b,Ft=le*-P+Ft*b,st=x,ct=F,te=A),v=Pn(-W,mt),w=v*un,v&&(b=Math.cos(-v),P=Math.sin(-v),x=V*b-U*P,F=q*b-rt*P,A=W*b-mt*P,Ft=tt*P+Ft*b,V=x,q=F,W=A),v=Pn(q,V),p=v*un,v&&(b=Math.cos(v),P=Math.sin(v),x=V*b+q*P,F=st*b+ct*P,q=q*b-V*P,ct=ct*b-st*P,V=x,st=F),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,w=180-w),f=yt(Math.sqrt(V*V+q*q+W*W)),g=yt(Math.sqrt(ct*ct+te*te)),v=Pn(st,ct),T=Math.abs(v)>2e-4?v*un:0,C=Ft?1/(Ft<0?-Ft:Ft):0),i.svg&&(x=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!bf(be(t,pt)),x&&t.setAttribute("transform",x))),Math.abs(T)>90&&Math.abs(T)<270&&(s?(f*=-1,T+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,T+=T<=0?180:-180)),e=e||i.uncache,i.x=c-((i.xPercent=c&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=yt(f),i.scaleY=yt(g),i.rotation=yt(p)+a,i.rotationX=yt(m)+a,i.rotationY=yt(w)+a,i.skewX=T+a,i.skewY=S+a,i.transformPerspective=C+o,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(r[Se]=Zr(l)),i.xOffset=i.yOffset=0,i.force3D=re.force3D,i.renderTransform=i.svg?d0:wf?Cf:f0,i.uncache=0,i},Zr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Qs=function(t,e,i){var r=Bt(e);return yt(parseFloat(e)+parseFloat(Xe(t,"x",i+"px",r)))+r},f0=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Cf(t,e)},sn="0deg",yi="0px",on=") ",Cf=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,u=i.z,l=i.rotation,c=i.rotationY,h=i.rotationX,d=i.skewX,f=i.skewY,g=i.scaleX,p=i.scaleY,m=i.transformPerspective,w=i.force3D,T=i.target,S=i.zOrigin,C="",_=w==="auto"&&t&&t!==1||w===!0;if(S&&(h!==sn||c!==sn)){var D=parseFloat(c)*qn,y=Math.sin(D),v=Math.cos(D),b;D=parseFloat(h)*qn,b=Math.cos(D),o=Qs(T,o,y*b*-S),a=Qs(T,a,-Math.sin(D)*-S),u=Qs(T,u,v*b*-S+S)}m!==yi&&(C+="perspective("+m+on),(r||s)&&(C+="translate("+r+"%, "+s+"%) "),(_||o!==yi||a!==yi||u!==yi)&&(C+=u!==yi||_?"translate3d("+o+", "+a+", "+u+") ":"translate("+o+", "+a+on),l!==sn&&(C+="rotate("+l+on),c!==sn&&(C+="rotateY("+c+on),h!==sn&&(C+="rotateX("+h+on),(d!==sn||f!==sn)&&(C+="skew("+d+", "+f+on),(g!==1||p!==1)&&(C+="scale("+g+", "+p+on),T.style[pt]=C||"translate(0, 0)"},d0=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,u=i.rotation,l=i.skewX,c=i.skewY,h=i.scaleX,d=i.scaleY,f=i.target,g=i.xOrigin,p=i.yOrigin,m=i.xOffset,w=i.yOffset,T=i.forceCSS,S=parseFloat(o),C=parseFloat(a),_,D,y,v,b;u=parseFloat(u),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,u+=c),u||l?(u*=qn,l*=qn,_=Math.cos(u)*h,D=Math.sin(u)*h,y=Math.sin(u-l)*-d,v=Math.cos(u-l)*d,l&&(c*=qn,b=Math.tan(l-c),b=Math.sqrt(1+b*b),y*=b,v*=b,c&&(b=Math.tan(c),b=Math.sqrt(1+b*b),_*=b,D*=b)),_=yt(_),D=yt(D),y=yt(y),v=yt(v)):(_=h,v=d,D=y=0),(S&&!~(o+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(S=Xe(f,"x",o,"px"),C=Xe(f,"y",a,"px")),(g||p||m||w)&&(S=yt(S+g-(g*_+p*y)+m),C=yt(C+p-(g*D+p*v)+w)),(r||s)&&(b=f.getBBox(),S=yt(S+r/100*b.width),C=yt(C+s/100*b.height)),b="matrix("+_+","+D+","+y+","+v+","+S+","+C+")",f.setAttribute("transform",b),T&&(f.style[pt]=b)},p0=function(t,e,i,r,s){var o=360,a=Dt(s),u=parseFloat(s)*(a&&~s.indexOf("rad")?un:1),l=u-r,c=r+l+"deg",h,d;return a&&(h=s.split("_")[1],h==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),h==="cw"&&l<0?l=(l+o*yl)%o-~~(l/o)*o:h==="ccw"&&l>0&&(l=(l-o*yl)%o-~~(l/o)*o)),t._pt=d=new Zt(t._pt,e,i,r,l,Q_),d.e=c,d.u="deg",t._props.push(i),d},Sl=function(t,e){for(var i in e)t[i]=e[i];return t},g0=function(t,e,i){var r=Sl({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,u,l,c,h,d,f,g;r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[pt]=e,a=Zi(i,1),Qi(i,pt),i.setAttribute("transform",l)):(l=getComputedStyle(i)[pt],o[pt]=e,a=Zi(i,1),o[pt]=l);for(u in Be)l=r[u],c=a[u],l!==c&&s.indexOf(u)<0&&(f=Bt(l),g=Bt(c),h=f!==g?Xe(i,u,l,g):parseFloat(l),d=parseFloat(c),t._pt=new Zt(t._pt,a,u,h,d-h,Uo),t._pt.u=g||0,t._props.push(u));Sl(a,r)};Jt("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",r="Bottom",s="Left",o=(t<3?[e,i,r,s]:[e+s,e+i,r+i,r+s]).map(function(a){return t<2?n+a:"border"+a+n});Jr[t>1?"border"+n:n]=function(a,u,l,c,h){var d,f;if(arguments.length<4)return d=o.map(function(g){return xe(a,g,l)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},o.forEach(function(g,p){return f[g]=d[p]=d[p]||d[(p-1)/2|0]}),a.init(u,f,h)}});var Af={name:"css",register:jo,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,s){var o=this._props,a=t.style,u=i.vars.startAt,l,c,h,d,f,g,p,m,w,T,S,C,_,D,y,v;Qa||jo(),this.styles=this.styles||vf(t),v=this.styles.props,this.tween=i;for(p in e)if(p!=="autoRound"&&(c=e[p],!(ne[p]&&uf(p,e,i,r,t,s)))){if(f=typeof c,g=Jr[p],f==="function"&&(c=c.call(i,r,t,s),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=Xi(c)),g)g(this,t,p,c,i)&&(y=1);else if(p.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(p)+"").trim(),c+="",Ge.lastIndex=0,Ge.test(l)||(m=Bt(l),w=Bt(c)),w?m!==w&&(l=Xe(t,p,l,w)+w):m&&(c+=m),this.add(a,"setProperty",l,c,r,s,0,0,p),o.push(p),v.push(p,a[p]);else if(f!=="undefined"){if(u&&p in u?(l=typeof u[p]=="function"?u[p].call(i,r,t,s):u[p],Dt(l)&&~l.indexOf("random(")&&(l=Xi(l)),Bt(l+"")||(l+=re.units[p]||Bt(xe(t,p))||""),(l+"").charAt(1)==="="&&(l=xe(t,p))):l=xe(t,p),d=parseFloat(l),T=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),T&&(c=c.substr(2)),h=parseFloat(c),p in Re&&(p==="autoAlpha"&&(d===1&&xe(t,"visibility")==="hidden"&&h&&(d=0),v.push("visibility",a.visibility),ze(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Re[p],~p.indexOf(",")&&(p=p.split(",")[0]))),S=p in Be,S){if(this.styles.save(p),C||(_=t._gsap,_.renderTransform&&!e.parseTransform||Zi(t,e.parseTransform),D=e.smoothOrigin!==!1&&_.smooth,C=this._pt=new Zt(this._pt,a,pt,0,1,_.renderTransform,_,0,-1),C.dep=1),p==="scale")this._pt=new Zt(this._pt,_,"scaleY",_.scaleY,(T?zn(_.scaleY,T+h):h)-_.scaleY||0,Uo),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){v.push(Se,a[Se]),c=c0(c),_.svg?qo(t,c,0,D,0,this):(w=parseFloat(c.split(" ")[2])||0,w!==_.zOrigin&&ze(this,_,"zOrigin",_.zOrigin,w),ze(this,a,p,Zr(l),Zr(c)));continue}else if(p==="svgOrigin"){qo(t,c,1,D,0,this);continue}else if(p in Sf){p0(this,_,p,d,T?zn(d,T+c):c);continue}else if(p==="smoothOrigin"){ze(this,_,"smooth",_.smooth,c);continue}else if(p==="force3D"){_[p]=c;continue}else if(p==="transform"){g0(this,c,t);continue}}else p in a||(p=ri(p)||p);if(S||(h||h===0)&&(d||d===0)&&!Y_.test(c)&&p in a)m=(l+"").substr((d+"").length),h||(h=0),w=Bt(c)||(p in re.units?re.units[p]:m),m!==w&&(d=Xe(t,p,l,w)),this._pt=new Zt(this._pt,S?_:a,p,d,(T?zn(d,T+h):h)-d,!S&&(w==="px"||p==="zIndex")&&e.autoRound!==!1?Z_:Uo),this._pt.u=w||0,m!==w&&w!=="%"&&(this._pt.b=l,this._pt.r=J_);else if(p in a)l0.call(this,t,p,l,T?T+c:c);else if(p in t)this.add(t,p,l||t[p],T?T+c:c,r,s);else{za(p,c);continue}S||v.push(p,a[p]),o.push(p)}}y&&pf(this)},render:function(t,e){if(e.tween._time||!Ja())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:xe,aliases:Re,getSetter:function(t,e,i){var r=Re[e];return r&&r.indexOf(",")<0&&(e=r),e in Be&&e!==Se&&(t._gsap.x||xe(t,"x"))?i&&ml===i?e==="scale"?i0:n0:(ml=i||{})&&(e==="scale"?r0:s0):t.style&&!$a(t.style[e])?t0:~e.indexOf("-")?e0:Xa(t,e)},core:{_removeProperty:Qi,_getMatrix:tu}};ue.utils.checkPrefix=ri;ue.core.getStyleSaver=vf;(function(n,t,e,i){var r=Jt(n+","+t+","+e,function(s){Be[s]=1});Jt(t,function(s){re.units[s]="deg",Sf[s]=1}),Re[r[13]]=n+","+t,Jt(i,function(s){var o=s.split(":");Re[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Jt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){re.units[n]="px"});ue.registerPlugin(Af);var m0=ue.registerPlugin(Af)||ue;m0.core.Tween;function y0(n){let t,e,i;return{c(){t=ut("div"),e=ut("h1"),i=ye(n[0]),R(e,"class","scroll svelte-1unxehl"),R(e,"data-final-opacity","0"),R(e,"data-final-scale","0.5"),R(t,"data-animation",""),R(t,"class","animation")},m(r,s){Ie(r,t,s),Y(t,e),Y(e,i)},p(r,[s]){s&1&&Oe(i,r[0])},i:Gt,o:Gt,d(r){r&&ve(t)}}}function _0(n,t,e){let{title:i}=t;return Go(()=>{new Ot().to(".scroll",1,{scale:"1",opacity:"1",ease:Power2.easeOut})}),n.$$set=r=>{"title"in r&&e(0,i=r.title)},[i]}class v0 extends tn{constructor(t){super(),Ze(this,t,_0,y0,Ye,{title:0})}}function w0(n){let t,e,i,r,s,o,a,u;return{c(){t=ut("div"),e=ut("div"),i=ut("div"),r=ut("h1"),s=ye(n[0]),o=pn(),a=ut("img"),R(r,"class","title-large svelte-plixti"),R(r,"data-scale","1"),R(r,"data-opacity","1"),R(r,"data-x","0"),R(r,"data-x-delay","20"),R(r,"data-x-duration","15"),iu(a.src,u=n[1])||R(a,"src",u),R(a,"class","profile svelte-plixti"),R(a,"alt","intro"),R(a,"data-opacity","1"),R(a,"data-x","0"),R(i,"class","horizontal svelte-plixti"),R(e,"class","animation"),R(e,"data-final-y","-80%"),R(e,"data-final-y-duration","80"),R(t,"data-animation","true"),R(t,"class","animation intro")},m(l,c){Ie(l,t,c),Y(t,e),Y(e,i),Y(i,r),Y(r,s),Y(i,o),Y(i,a)},p(l,[c]){c&1&&Oe(s,l[0]),c&2&&!iu(a.src,u=l[1])&&R(a,"src",u)},i:Gt,o:Gt,d(l){l&&ve(t)}}}function E0(n,t,e){let{introduction:i}=t,{image:r}=t;return n.$$set=s=>{"introduction"in s&&e(0,i=s.introduction),"image"in s&&e(1,r=s.image)},[i,r]}class T0 extends tn{constructor(t){super(),Ze(this,t,E0,w0,Ye,{introduction:0,image:1})}}function S0(n){let t,e,i,r,s,o,a,u;return{c(){t=ut("div"),e=ut("div"),i=ut("div"),r=ut("h1"),s=ye(n[0]),o=pn(),a=ut("p"),u=ye(n[1]),R(r,"class","title-large svelte-19i85ea"),R(r,"data-scale","1"),R(r,"data-scale-duration","30"),R(r,"data-opacity","1"),R(r,"data-opacity-duration","30"),R(r,"data-y","-50"),R(r,"data-y-delay","20"),R(r,"data-y-duration","30"),R(a,"class","description svelte-19i85ea"),R(a,"data-opacity","1"),R(a,"data-y","-50"),R(a,"data-y-delay","35"),R(a,"data-y-duration","30"),R(i,"class","vertical"),R(e,"class","animation"),R(e,"data-final-opacity","0"),R(t,"data-animation","true"),R(t,"class","animation")},m(l,c){Ie(l,t,c),Y(t,e),Y(e,i),Y(i,r),Y(r,s),Y(i,o),Y(i,a),Y(a,u)},p(l,[c]){c&1&&Oe(s,l[0]),c&2&&Oe(u,l[1])},i:Gt,o:Gt,d(l){l&&ve(t)}}}function b0(n,t,e){let{title:i}=t,{description:r}=t;return n.$$set=s=>{"title"in s&&e(0,i=s.title),"description"in s&&e(1,r=s.description)},[i,r]}class C0 extends tn{constructor(t){super(),Ze(this,t,b0,S0,Ye,{title:0,description:1})}}function bl(n,t,e){const i=n.slice();return i[2]=t[e],i}function Cl(n){let t,e,i,r=n[2].title+"",s,o,a,u=n[2].year+"",l,c,h,d=n[2].description+"",f,g;return{c(){t=ut("div"),e=ut("h2"),i=ut("span"),s=ye(r),o=pn(),a=ut("span"),l=ye(u),c=pn(),h=ut("p"),f=ye(d),g=pn(),R(i,"class","school"),R(a,"class","year"),R(t,"class","item svelte-1vwm8h3"),R(t,"data-opacity","1"),R(t,"data-y","0")},m(p,m){Ie(p,t,m),Y(t,e),Y(e,i),Y(i,s),Y(e,o),Y(e,a),Y(a,l),Y(t,c),Y(t,h),Y(h,f),Y(t,g)},p(p,m){m&2&&r!==(r=p[2].title+"")&&Oe(s,r),m&2&&u!==(u=p[2].year+"")&&Oe(l,u),m&2&&d!==(d=p[2].description+"")&&Oe(f,d)},d(p){p&&ve(t)}}}function A0(n){let t,e,i,r,s,o,a=n[1],u=[];for(let l=0;l<a.length;l+=1)u[l]=Cl(bl(n,a,l));return{c(){t=ut("div"),e=ut("div"),i=ut("h1"),r=ye(n[0]),s=pn(),o=ut("div");for(let l=0;l<u.length;l+=1)u[l].c();R(i,"class","title svelte-1vwm8h3"),R(i,"data-scale","1"),R(i,"data-opacity","1"),R(i,"data-y","0"),R(i,"data-y-duration","30"),R(e,"class","animation vertical education"),R(e,"data-final-y","-60%"),R(e,"data-final-y-duration","60"),R(e,"data-final-opacity","0"),R(e,"data-final-opacity-duration","60"),R(t,"data-animation","true"),R(t,"class","animation")},m(l,c){Ie(l,t,c),Y(t,e),Y(e,i),Y(i,r),Y(e,s),Y(e,o);for(let h=0;h<u.length;h+=1)u[h].m(o,null)},p(l,[c]){if(c&1&&Oe(r,l[0]),c&2){a=l[1];let h;for(h=0;h<a.length;h+=1){const d=bl(l,a,h);u[h]?u[h].p(d,c):(u[h]=Cl(d),u[h].c(),u[h].m(o,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}},i:Gt,o:Gt,d(l){l&&ve(t),xl(u,l)}}}function I0(n,t,e){let{title:i}=t,{items:r}=t;return n.$$set=s=>{"title"in s&&e(0,i=s.title),"items"in s&&e(1,r=s.items)},[i,r]}class D0 extends tn{constructor(t){super(),Ze(this,t,I0,A0,Ye,{title:0,items:1})}}function x0(n){let t,e,i;return{c(){t=ut("div"),e=ut("h1"),i=ye(n[0]),R(e,"class","title svelte-1m95k9h"),R(e,"data-scale","1"),R(e,"data-opacity","1"),R(e,"data-final-y","-200"),R(e,"data-final-opacity","0"),R(e,"data-final-y-duration","40"),R(e,"data-final-opacity-duration","40"),R(t,"data-animation","true"),R(t,"class","animation vertical")},m(r,s){Ie(r,t,s),Y(t,e),Y(e,i)},p(r,[s]){s&1&&Oe(i,r[0])},i:Gt,o:Gt,d(r){r&&ve(t)}}}function k0(n,t,e){let{title:i}=t;return n.$$set=r=>{"title"in r&&e(0,i=r.title)},[i]}class R0 extends tn{constructor(t){super(),Ze(this,t,k0,x0,Ye,{title:0})}}function O0(n){let t,e;const i=[n[1]];let r={};for(let s=0;s<i.length;s+=1)r=si(r,i[s]);return t=new R0({props:r}),{c(){xn(t.$$.fragment)},m(s,o){Qe(t,s,o),e=!0},p(s,o){const a=o&2?oi(i,[ai(s[1])]):{};t.$set(a)},i(s){e||(Ht(t.$$.fragment,s),e=!0)},o(s){se(t.$$.fragment,s),e=!1},d(s){Je(t,s)}}}function N0(n){let t,e;const i=[n[1]];let r={};for(let s=0;s<i.length;s+=1)r=si(r,i[s]);return t=new D0({props:r}),{c(){xn(t.$$.fragment)},m(s,o){Qe(t,s,o),e=!0},p(s,o){const a=o&2?oi(i,[ai(s[1])]):{};t.$set(a)},i(s){e||(Ht(t.$$.fragment,s),e=!0)},o(s){se(t.$$.fragment,s),e=!1},d(s){Je(t,s)}}}function P0(n){let t,e;const i=[n[1]];let r={};for(let s=0;s<i.length;s+=1)r=si(r,i[s]);return t=new C0({props:r}),{c(){xn(t.$$.fragment)},m(s,o){Qe(t,s,o),e=!0},p(s,o){const a=o&2?oi(i,[ai(s[1])]):{};t.$set(a)},i(s){e||(Ht(t.$$.fragment,s),e=!0)},o(s){se(t.$$.fragment,s),e=!1},d(s){Je(t,s)}}}function M0(n){let t,e;const i=[n[1]];let r={};for(let s=0;s<i.length;s+=1)r=si(r,i[s]);return t=new T0({props:r}),{c(){xn(t.$$.fragment)},m(s,o){Qe(t,s,o),e=!0},p(s,o){const a=o&2?oi(i,[ai(s[1])]):{};t.$set(a)},i(s){e||(Ht(t.$$.fragment,s),e=!0)},o(s){se(t.$$.fragment,s),e=!1},d(s){Je(t,s)}}}function L0(n){let t,e;const i=[n[1]];let r={};for(let s=0;s<i.length;s+=1)r=si(r,i[s]);return t=new v0({props:r}),{c(){xn(t.$$.fragment)},m(s,o){Qe(t,s,o),e=!0},p(s,o){const a=o&2?oi(i,[ai(s[1])]):{};t.$set(a)},i(s){e||(Ht(t.$$.fragment,s),e=!0)},o(s){se(t.$$.fragment,s),e=!1},d(s){Je(t,s)}}}function F0(n){let t,e,i,r;const s=[L0,M0,P0,N0,O0],o=[];function a(u,l){return u[0]==="ScrollDown"?0:u[0]==="Intro"?1:u[0]==="About"?2:u[0]==="Education"?3:u[0]==="Statement"?4:-1}return~(e=a(n))&&(i=o[e]=s[e](n)),{c(){t=ut("div"),i&&i.c()},m(u,l){Ie(u,t,l),~e&&o[e].m(t,null),r=!0},p(u,[l]){let c=e;e=a(u),e===c?~e&&o[e].p(u,l):(i&&(Ho(),se(o[c],1,1,()=>{o[c]=null}),Ko()),~e?(i=o[e],i?i.p(u,l):(i=o[e]=s[e](u),i.c()),Ht(i,1),i.m(t,null)):i=null)},i(u){r||(Ht(i),r=!0)},o(u){se(i),r=!1},d(u){u&&ve(t),~e&&o[e].d()}}}function V0(n,t,e){let{layout:i}=t,{content:r}=t;return n.$$set=s=>{"layout"in s&&e(0,i=s.layout),"content"in s&&e(1,r=s.content)},[i,r]}class B0 extends tn{constructor(t){super(),Ze(this,t,V0,F0,Ye,{layout:0,content:1})}}var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={exports:{}};/*!
 * ScrollMagic v2.0.8 (2020-08-14)
 * The javascript library for magical scroll interactions.
 * (c) 2020 Jan Paepke (@janpaepke)
 * Project Website: http://scrollmagic.io
 * 
 * @version 2.0.8
 * @license Dual licensed under MIT license and GPL.
 * @author Jan Paepke - e-mail@janpaepke.de
 *
 * @file ScrollMagic main library.
 */(function(n,t){(function(e,i){n.exports=i()})($0,function(){var e=function(){o.log(2,"(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use 'new ScrollMagic.Controller()' to create a new controller instance. Use 'new ScrollMagic.Scene()' to instance a scene.")};e.version="2.0.8",typeof window<"u"&&window.addEventListener("mousewheel",void 0);var i="data-scrollmagic-pin-spacer";e.Controller=function(a){var u="ScrollMagic.Controller",l="FORWARD",c="REVERSE",h="PAUSED",d=r.defaults,f=this,g=o.extend({},d,a),p=[],m=!1,w=0,T=h,S=!0,C=0,_=!0,D,y,v=function(){for(var A in g)d.hasOwnProperty(A)||(x(2,'WARNING: Unknown option "'+A+'"'),delete g[A]);if(g.container=o.get.elements(g.container)[0],!g.container)throw x(1,"ERROR creating object "+u+": No valid scroll container supplied"),u+" init failed.";S=g.container===window||g.container===document.body||!document.body.contains(g.container),S&&(g.container=window),C=V(),g.container.addEventListener("resize",st),g.container.addEventListener("scroll",st);var U=parseInt(g.refreshInterval,10);g.refreshInterval=o.type.Number(U)?U:d.refreshInterval,b(),x(3,"added new "+u+" controller (v"+e.version+")")},b=function(){g.refreshInterval>0&&(y=window.setTimeout(ct,g.refreshInterval))},P=function(){return g.vertical?o.get.scrollTop(g.container):o.get.scrollLeft(g.container)},V=function(){return g.vertical?o.get.height(g.container):o.get.width(g.container)},q=this._setScrollPos=function(A){g.vertical?S?window.scrollTo(o.get.scrollLeft(),A):g.container.scrollTop=A:S?window.scrollTo(A,o.get.scrollTop()):g.container.scrollLeft=A},W=function(){if(_&&m){var A=o.type.Array(m)?m:p.slice(0);m=!1;var U=w;w=f.scrollPos();var rt=w-U;rt!==0&&(T=rt>0?l:c),T===c&&A.reverse(),A.forEach(function(mt,le){x(3,"updating Scene "+(le+1)+"/"+A.length+" ("+p.length+" total)"),mt.update(!0)}),A.length===0&&g.loglevel>=3&&x(3,"updating 0 Scenes (nothing added to controller)")}},tt=function(){D=o.rAF(W)},st=function(A){x(3,"event fired causing an update:",A.type),A.type=="resize"&&(C=V(),T=h),m!==!0&&(m=!0,tt())},ct=function(){if(!S&&C!=V()){var A;try{A=new Event("resize",{bubbles:!1,cancelable:!1})}catch{A=document.createEvent("Event"),A.initEvent("resize",!1,!1)}g.container.dispatchEvent(A)}p.forEach(function(U,rt){U.refresh()}),b()},x=this._log=function(A,U){g.loglevel>=A&&(Array.prototype.splice.call(arguments,1,0,"("+u+") ->"),o.log.apply(window,arguments))};this._options=g;var F=function(A){if(A.length<=1)return A;var U=A.slice(0);return U.sort(function(rt,mt){return rt.scrollOffset()>mt.scrollOffset()?1:-1}),U};return this.addScene=function(A){if(o.type.Array(A))A.forEach(function(rt,mt){f.addScene(rt)});else if(A instanceof e.Scene){if(A.controller()!==f)A.addTo(f);else if(p.indexOf(A)<0){p.push(A),p=F(p),A.on("shift.controller_sort",function(){p=F(p)});for(var U in g.globalSceneOptions)A[U]&&A[U].call(A,g.globalSceneOptions[U]);x(3,"adding Scene (now "+p.length+" total)")}}else x(1,"ERROR: invalid argument supplied for '.addScene()'");return f},this.removeScene=function(A){if(o.type.Array(A))A.forEach(function(rt,mt){f.removeScene(rt)});else{var U=p.indexOf(A);U>-1&&(A.off("shift.controller_sort"),p.splice(U,1),x(3,"removing Scene (now "+p.length+" left)"),A.remove())}return f},this.updateScene=function(A,U){return o.type.Array(A)?A.forEach(function(rt,mt){f.updateScene(rt,U)}):U?A.update(!0):m!==!0&&A instanceof e.Scene&&(m=m||[],m.indexOf(A)==-1&&m.push(A),m=F(m),tt()),f},this.update=function(A){return st({type:"resize"}),A&&W(),f},this.scrollTo=function(A,U){if(o.type.Number(A))q.call(g.container,A,U);else if(A instanceof e.Scene)A.controller()===f?f.scrollTo(A.scrollOffset(),U):x(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",A);else if(o.type.Function(A))q=A;else{var rt=o.get.elements(A)[0];if(rt){for(;rt.parentNode.hasAttribute(i);)rt=rt.parentNode;var mt=g.vertical?"top":"left",le=o.get.offset(g.container),Ft=o.get.offset(rt);S||(le[mt]-=f.scrollPos()),f.scrollTo(Ft[mt]-le[mt],U)}else x(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",A)}return f},this.scrollPos=function(A){if(arguments.length)o.type.Function(A)?P=A:x(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'.");else return P.call(f);return f},this.info=function(A){var U={size:C,vertical:g.vertical,scrollPos:w,scrollDirection:T,container:g.container,isDocument:S};if(arguments.length){if(U[A]!==void 0)return U[A];x(1,'ERROR: option "'+A+'" is not available');return}else return U},this.loglevel=function(A){if(arguments.length)g.loglevel!=A&&(g.loglevel=A);else return g.loglevel;return f},this.enabled=function(A){if(arguments.length)_!=A&&(_=!!A,f.updateScene(p,!0));else return _;return f},this.destroy=function(A){window.clearTimeout(y);for(var U=p.length;U--;)p[U].destroy(A);return g.container.removeEventListener("resize",st),g.container.removeEventListener("scroll",st),o.cAF(D),x(3,"destroyed "+u+" (reset: "+(A?"true":"false")+")"),null},v(),f};var r={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(a,u){r.defaults[a]=u},e.Controller.extend=function(a){var u=this;e.Controller=function(){return u.apply(this,arguments),this.$super=o.extend({},this),a.apply(this,arguments)||this},o.extend(e.Controller,u),e.Controller.prototype=u.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(a){var u="ScrollMagic.Scene",l="BEFORE",c="DURING",h="AFTER",d=s.defaults,f=this,g=o.extend({},d,a),p=l,m=0,w={start:0,end:0},T=0,S=!0,C,_,D=function(){for(var E in g)d.hasOwnProperty(E)||(v(2,'WARNING: Unknown option "'+E+'"'),delete g[E]);for(var k in d)ct(k);tt()},y={};this.on=function(E,k){return o.type.Function(k)?(E=E.trim().split(" "),E.forEach(function(z){var Z=z.split("."),j=Z[0],et=Z[1];j!="*"&&(y[j]||(y[j]=[]),y[j].push({namespace:et||"",callback:k}))})):v(1,"ERROR when calling '.on()': Supplied callback for '"+E+"' is not a valid function!"),f},this.off=function(E,k){return E?(E=E.trim().split(" "),E.forEach(function(z,Z){var j=z.split("."),et=j[0],ht=j[1]||"",ee=et==="*"?Object.keys(y):[et];ee.forEach(function(we){for(var ce=y[we]||[],On=ce.length;On--;){var gi=ce[On];gi&&(ht===gi.namespace||ht==="*")&&(!k||k==gi.callback)&&ce.splice(On,1)}ce.length||delete y[we]})}),f):(v(1,"ERROR: Invalid event name supplied."),f)},this.trigger=function(E,k){if(E){var z=E.trim().split("."),Z=z[0],j=z[1],et=y[Z];v(3,"event fired:",Z,k?"->":"",k||""),et&&et.forEach(function(ht,ee){(!j||j===ht.namespace)&&ht.callback.call(f,new e.Event(Z,ht.namespace,f,k))})}else v(1,"ERROR: Invalid event name supplied.");return f},f.on("change.internal",function(E){E.what!=="loglevel"&&E.what!=="tweenChanges"&&(E.what==="triggerElement"?V():E.what==="reverse"&&f.update())}).on("shift.internal",function(E){b(),f.update()});var v=this._log=function(E,k){g.loglevel>=E&&(Array.prototype.splice.call(arguments,1,0,"("+u+") ->"),o.log.apply(window,arguments))};this.addTo=function(E){return E instanceof e.Controller?_!=E&&(_&&_.removeScene(f),_=E,tt(),P(!0),V(!0),b(),_.info("container").addEventListener("resize",q),E.addScene(f),f.trigger("add",{controller:_}),v(3,"added "+u+" to controller"),f.update()):v(1,"ERROR: supplied argument of 'addTo()' is not a valid ScrollMagic Controller"),f},this.enabled=function(E){if(arguments.length)S!=E&&(S=!!E,f.update(!0));else return S;return f},this.remove=function(){if(_){_.info("container").removeEventListener("resize",q);var E=_;_=void 0,E.removeScene(f),f.trigger("remove"),v(3,"removed "+u+" from controller")}return f},this.destroy=function(E){return f.trigger("destroy",{reset:E}),f.remove(),f.off("*.*"),v(3,"destroyed "+u+" (reset: "+(E?"true":"false")+")"),null},this.update=function(E){if(_)if(E)if(_.enabled()&&S){var k=_.info("scrollPos"),z;g.duration>0?z=(k-w.start)/(w.end-w.start):z=k>=w.start?1:0,f.trigger("update",{startPos:w.start,endPos:w.end,scrollPos:k}),f.progress(z)}else x&&p===c&&A(!0);else _.updateScene(f,!1);return f},this.refresh=function(){return P(),V(),f},this.progress=function(E){if(arguments.length){var k=!1,z=p,Z=_?_.info("scrollDirection"):"PAUSED",j=g.reverse||E>=m;if(g.duration===0?(k=m!=E,m=E<1&&j?0:1,p=m===0?l:c):E<0&&p!==l&&j?(m=0,p=l,k=!0):E>=0&&E<1&&j?(m=E,p=c,k=!0):E>=1&&p!==h?(m=1,p=h,k=!0):p===c&&!j&&A(),k){var et={progress:m,state:p,scrollDirection:Z},ht=p!=z,ee=function(we){f.trigger(we,et)};ht&&z!==c&&(ee("enter"),ee(z===l?"start":"end")),ee("progress"),ht&&p!==c&&(ee(p===l?"start":"end"),ee("leave"))}return f}else return m};var b=function(){w={start:T+g.offset},_&&g.triggerElement&&(w.start-=_.info("size")*g.triggerHook),w.end=w.start+g.duration},P=function(E){if(C){var k="duration";st(k,C.call(f))&&!E&&(f.trigger("change",{what:k,newval:g[k]}),f.trigger("shift",{reason:k}))}},V=function(E){var k=0,z=g.triggerElement;if(_&&(z||T>0)){if(z)if(z.parentNode){for(var Z=_.info(),j=o.get.offset(Z.container),et=Z.vertical?"top":"left";z.parentNode.hasAttribute(i);)z=z.parentNode;var ht=o.get.offset(z);Z.isDocument||(j[et]-=_.scrollPos()),k=ht[et]-j[et]}else v(2,"WARNING: triggerElement was removed from DOM and will be reset to",void 0),f.triggerElement(void 0);var ee=k!=T;T=k,ee&&!E&&f.trigger("shift",{reason:"triggerElementPosition"})}},q=function(E){g.triggerHook>0&&f.trigger("shift",{reason:"containerResize"})},W=o.extend(s.validate,{duration:function(E){if(o.type.String(E)&&E.match(/^(\.|\d)*\d+%$/)){var k=parseFloat(E)/100;E=function(){return _?_.info("size")*k:0}}if(o.type.Function(E)){C=E;try{E=parseFloat(C.call(f))}catch{E=-1}}if(E=parseFloat(E),!o.type.Number(E)||E<0)throw C?(C=void 0,['Invalid return value of supplied function for option "duration":',E]):['Invalid value for option "duration":',E];return E}}),tt=function(E){E=arguments.length?[E]:Object.keys(W),E.forEach(function(k,z){var Z;if(W[k])try{Z=W[k](g[k])}catch(et){Z=d[k];var j=o.type.String(et)?[et]:et;o.type.Array(j)?(j[0]="ERROR: "+j[0],j.unshift(1),v.apply(this,j)):v(1,"ERROR: Problem executing validation callback for option '"+k+"':",et.message)}finally{g[k]=Z}})},st=function(E,k){var z=!1,Z=g[E];return g[E]!=k&&(g[E]=k,tt(E),z=Z!=g[E]),z},ct=function(E){f[E]||(f[E]=function(k){if(arguments.length)E==="duration"&&(C=void 0),st(E,k)&&(f.trigger("change",{what:E,newval:g[E]}),s.shifts.indexOf(E)>-1&&f.trigger("shift",{reason:E}));else return g[E];return f})};this.controller=function(){return _},this.state=function(){return p},this.scrollOffset=function(){return w.start},this.triggerPosition=function(){var E=g.offset;return _&&(g.triggerElement?E+=T:E+=_.info("size")*f.triggerHook()),E};var x,F;f.on("shift.internal",function(E){var k=E.reason==="duration";(p===h&&k||p===c&&g.duration===0)&&A(),k&&U()}).on("progress.internal",function(E){A()}).on("add.internal",function(E){U()}).on("destroy.internal",function(E){f.removePin(E.reset)});var A=function(E){if(x&&_){var k=_.info(),z=F.spacer.firstChild;if(!E&&p===c){o.css(z,"position")!="fixed"&&(o.css(z,{position:"fixed"}),U());var Z=o.get.offset(F.spacer,!0),j=g.reverse||g.duration===0?k.scrollPos-w.start:Math.round(m*g.duration*10)/10;Z[k.vertical?"top":"left"]+=j,o.css(F.spacer.firstChild,{top:Z.top,left:Z.left})}else{var et={position:F.inFlow?"relative":"absolute",top:0,left:0},ht=o.css(z,"position")!=et.position;F.pushFollowers?g.duration>0&&(p===h&&parseFloat(o.css(F.spacer,"padding-top"))===0||p===l&&parseFloat(o.css(F.spacer,"padding-bottom"))===0)&&(ht=!0):et[k.vertical?"top":"left"]=g.duration*m,o.css(z,et),ht&&U()}}},U=function(){if(x&&_&&F.inFlow){var E=p===c,k=_.info("vertical"),z=F.spacer.firstChild,Z=o.isMarginCollapseType(o.css(F.spacer,"display")),j={};F.relSize.width||F.relSize.autoFullWidth?E?o.css(x,{width:o.get.width(F.spacer)}):o.css(x,{width:"100%"}):(j["min-width"]=o.get.width(k?x:z,!0,!0),j.width=E?j["min-width"]:"auto"),F.relSize.height?E?o.css(x,{height:o.get.height(F.spacer)-(F.pushFollowers?g.duration:0)}):o.css(x,{height:"100%"}):(j["min-height"]=o.get.height(k?z:x,!0,!Z),j.height=E?j["min-height"]:"auto"),F.pushFollowers&&(j["padding"+(k?"Top":"Left")]=g.duration*m,j["padding"+(k?"Bottom":"Right")]=g.duration*(1-m)),o.css(F.spacer,j)}},rt=function(){_&&x&&p===c&&!_.info("isDocument")&&A()},mt=function(){_&&x&&p===c&&((F.relSize.width||F.relSize.autoFullWidth)&&o.get.width(window)!=o.get.width(F.spacer.parentNode)||F.relSize.height&&o.get.height(window)!=o.get.height(F.spacer.parentNode))&&U()},le=function(E){_&&x&&p===c&&!_.info("isDocument")&&(E.preventDefault(),_._setScrollPos(_.info("scrollPos")-((E.wheelDelta||E[_.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||-E.detail*30)))};this.setPin=function(E,k){var z={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},Z=k&&k.hasOwnProperty("pushFollowers");if(k=o.extend({},z,k),E=o.get.elements(E)[0],E){if(o.css(E,"position")==="fixed")return v(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'."),f}else return v(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),f;if(x){if(x===E)return f;f.removePin()}x=E;var j=x.parentNode.style.display,et=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];x.parentNode.style.display="none";var ht=o.css(x,"position")!="absolute",ee=o.css(x,et.concat(["display"])),we=o.css(x,["width","height"]);x.parentNode.style.display=j,!ht&&k.pushFollowers&&(v(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),k.pushFollowers=!1),window.setTimeout(function(){x&&g.duration===0&&Z&&k.pushFollowers&&v(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")},0);var ce=x.parentNode.insertBefore(document.createElement("div"),x),On=o.extend(ee,{position:ht?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(ht||o.extend(On,o.css(x,["width","height"])),o.css(ce,On),ce.setAttribute(i,""),o.addClass(ce,k.spacerClass),F={spacer:ce,relSize:{width:we.width.slice(-1)==="%",height:we.height.slice(-1)==="%",autoFullWidth:we.width==="auto"&&ht&&o.isMarginCollapseType(ee.display)},pushFollowers:k.pushFollowers,inFlow:ht},!x.___origStyle){x.___origStyle={};var gi=x.style,If=et.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);If.forEach(function(eu){x.___origStyle[eu]=gi[eu]||""})}return F.relSize.width&&o.css(ce,{width:we.width}),F.relSize.height&&o.css(ce,{height:we.height}),ce.appendChild(x),o.css(x,{position:ht?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(F.relSize.width||F.relSize.autoFullWidth)&&o.css(x,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",rt),window.addEventListener("resize",rt),window.addEventListener("resize",mt),x.addEventListener("mousewheel",le),x.addEventListener("DOMMouseScroll",le),v(3,"added pin"),A(),f},this.removePin=function(E){if(x){if(p===c&&A(!0),E||!_){var k=F.spacer.firstChild;if(k.hasAttribute(i)){var z=F.spacer.style,Z=["margin","marginLeft","marginRight","marginTop","marginBottom"],j={};Z.forEach(function(et){j[et]=z[et]||""}),o.css(k,j)}F.spacer.parentNode.insertBefore(k,F.spacer),F.spacer.parentNode.removeChild(F.spacer),x.parentNode.hasAttribute(i)||(o.css(x,x.___origStyle),delete x.___origStyle)}window.removeEventListener("scroll",rt),window.removeEventListener("resize",rt),window.removeEventListener("resize",mt),x.removeEventListener("mousewheel",le),x.removeEventListener("DOMMouseScroll",le),x=void 0,v(3,"removed pin (reset: "+(E?"true":"false")+")")}return f};var Ft,te=[];return f.on("destroy.internal",function(E){f.removeClassToggle(E.reset)}),this.setClassToggle=function(E,k){var z=o.get.elements(E);return z.length===0||!o.type.String(k)?(v(1,"ERROR calling method 'setClassToggle()': Invalid "+(z.length===0?"element":"classes")+" supplied."),f):(te.length>0&&f.removeClassToggle(),Ft=k,te=z,f.on("enter.internal_class leave.internal_class",function(Z){var j=Z.type==="enter"?o.addClass:o.removeClass;te.forEach(function(et,ht){j(et,Ft)})}),f)},this.removeClassToggle=function(E){return E&&te.forEach(function(k,z){o.removeClass(k,Ft)}),f.off("start.internal_class end.internal_class"),Ft=void 0,te=[],f},D(),f};var s={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(a){if(a=parseFloat(a),!o.type.Number(a))throw['Invalid value for option "offset":',a];return a},triggerElement:function(a){if(a=a||void 0,a){var u=o.get.elements(a)[0];if(u&&u.parentNode)a=u;else throw['Element defined in option "triggerElement" was not found:',a]}return a},triggerHook:function(a){var u={onCenter:.5,onEnter:1,onLeave:0};if(o.type.Number(a))a=Math.max(0,Math.min(parseFloat(a),1));else if(a in u)a=u[a];else throw['Invalid value for option "triggerHook": ',a];return a},reverse:function(a){return!!a},loglevel:function(a){if(a=parseInt(a),!o.type.Number(a)||a<0||a>3)throw['Invalid value for option "loglevel":',a];return a}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(a,u,l,c){a in s.defaults?e._util.log(1,"[static] ScrollMagic.Scene -> Cannot add Scene option '"+a+"', because it already exists."):(s.defaults[a]=u,s.validate[a]=l,c&&s.shifts.push(a))},e.Scene.extend=function(a){var u=this;e.Scene=function(){return u.apply(this,arguments),this.$super=o.extend({},this),a.apply(this,arguments)||this},o.extend(e.Scene,u),e.Scene.prototype=u.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(a,u,l,c){c=c||{};for(var h in c)this[h]=c[h];return this.type=a,this.target=this.currentTarget=l,this.namespace=u||"",this.timeStamp=this.timestamp=Date.now(),this};var o=e._util=function(a){var u={},l,c=function(y){return parseFloat(y)||0},h=function(y){return y.currentStyle?y.currentStyle:a.getComputedStyle(y)},d=function(y,v,b,P){if(v=v===document?a:v,v===a)P=!1;else if(!_.DomElement(v))return 0;y=y.charAt(0).toUpperCase()+y.substr(1).toLowerCase();var V=(b?v["offset"+y]||v["outer"+y]:v["client"+y]||v["inner"+y])||0;if(b&&P){var q=h(v);V+=y==="Height"?c(q.marginTop)+c(q.marginBottom):c(q.marginLeft)+c(q.marginRight)}return V},f=function(y){return y.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(v){return v[1].toUpperCase()})};u.extend=function(y){for(y=y||{},l=1;l<arguments.length;l++)if(!!arguments[l])for(var v in arguments[l])arguments[l].hasOwnProperty(v)&&(y[v]=arguments[l][v]);return y},u.isMarginCollapseType=function(y){return["block","flex","list-item","table","-webkit-box"].indexOf(y)>-1};var g=0,p=["ms","moz","webkit","o"],m=a.requestAnimationFrame,w=a.cancelAnimationFrame;for(l=0;!m&&l<p.length;++l)m=a[p[l]+"RequestAnimationFrame"],w=a[p[l]+"CancelAnimationFrame"]||a[p[l]+"CancelRequestAnimationFrame"];m||(m=function(y){var v=new Date().getTime(),b=Math.max(0,16-(v-g)),P=a.setTimeout(function(){y(v+b)},b);return g=v+b,P}),w||(w=function(y){a.clearTimeout(y)}),u.rAF=m.bind(a),u.cAF=w.bind(a);var T=["error","warn","log"],S=a.console||{};for(S.log=S.log||function(){},l=0;l<T.length;l++){var C=T[l];S[C]||(S[C]=S.log)}u.log=function(y){(y>T.length||y<=0)&&(y=T.length);var v=new Date,b=("0"+v.getHours()).slice(-2)+":"+("0"+v.getMinutes()).slice(-2)+":"+("0"+v.getSeconds()).slice(-2)+":"+("00"+v.getMilliseconds()).slice(-3),P=T[y-1],V=Array.prototype.splice.call(arguments,1),q=Function.prototype.bind.call(S[P],S);V.unshift(b),q.apply(S,V)};var _=u.type=function(y){return Object.prototype.toString.call(y).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};_.String=function(y){return _(y)==="string"},_.Function=function(y){return _(y)==="function"},_.Array=function(y){return Array.isArray(y)},_.Number=function(y){return!_.Array(y)&&y-parseFloat(y)+1>=0},_.DomElement=function(y){return typeof HTMLElement=="object"||typeof HTMLElement=="function"?y instanceof HTMLElement||y instanceof SVGElement:y&&typeof y=="object"&&y!==null&&y.nodeType===1&&typeof y.nodeName=="string"};var D=u.get={};return D.elements=function(y){var v=[];if(_.String(y))try{y=document.querySelectorAll(y)}catch{return v}if(_(y)==="nodelist"||_.Array(y)||y instanceof NodeList)for(var b=0,P=v.length=y.length;b<P;b++){var V=y[b];v[b]=_.DomElement(V)?V:D.elements(V)}else(_.DomElement(y)||y===document||y===a)&&(v=[y]);return v},D.scrollTop=function(y){return y&&typeof y.scrollTop=="number"?y.scrollTop:a.pageYOffset||0},D.scrollLeft=function(y){return y&&typeof y.scrollLeft=="number"?y.scrollLeft:a.pageXOffset||0},D.width=function(y,v,b){return d("width",y,v,b)},D.height=function(y,v,b){return d("height",y,v,b)},D.offset=function(y,v){var b={top:0,left:0};if(y&&y.getBoundingClientRect){var P=y.getBoundingClientRect();b.top=P.top,b.left=P.left,v||(b.top+=D.scrollTop(),b.left+=D.scrollLeft())}return b},u.addClass=function(y,v){v&&(y.classList?y.classList.add(v):y.className+=" "+v)},u.removeClass=function(y,v){v&&(y.classList?y.classList.remove(v):y.className=y.className.replace(new RegExp("(^|\\b)"+v.split(" ").join("|")+"(\\b|$)","gi")," "))},u.css=function(y,v){if(_.String(v))return h(y)[f(v)];if(_.Array(v)){var b={},P=h(y);return v.forEach(function(W,tt){b[W]=P[f(W)]}),b}else for(var V in v){var q=v[V];q==parseFloat(q)&&(q+="px"),y.style[f(V)]=q}},u}(window||{});return e.Scene.prototype.addIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.removeIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.setTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.removeTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.setVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e.Scene.prototype.removeVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e})})(tr);const U0=tr.exports,z0=Df({__proto__:null,default:U0},[tr.exports]);/*!
 * @file ScrollMagic GSAP Animation Plugin.
 *
 * requires: GSAP ~1.14
 * Powered by the Greensock Animation Platform (GSAP): http://www.greensock.com/js
 * Greensock License info at http://www.greensock.com/licensing/
 */var j0=function(n,t,e){var i=t,r="animation.gsap",s=window.console||{},o=Function.prototype.bind.call(s.error||s.log||function(){},s);n||o("("+r+") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs."),i||o("("+r+") -> ERROR: TweenLite or TweenMax could not be found. Please make sure GSAP is loaded before ScrollMagic or use an asynchronous loader like requirejs."),n.Scene.addOption("tweenChanges",!1,function(a){return!!a}),n.Scene.extend(function(){var a=this,u,l=function(){a._log&&(Array.prototype.splice.call(arguments,1,0,"("+r+")","->"),a._log.apply(this,arguments))};a.on("progress.plugin_gsap",function(){c()}),a.on("destroy.plugin_gsap",function(h){a.removeTween(h.reset)});var c=function(){if(u){var h=a.progress(),d=a.state();u.repeat&&u.repeat()===-1?d==="DURING"&&u.paused()?u.play():d!=="DURING"&&!u.paused()&&u.pause():h!=u.progress()&&(a.duration()===0?h>0?u.play():u.reverse():a.tweenChanges()&&u.tweenTo?u.tweenTo(h*u.duration()):u.progress(h).pause())}};a.setTween=function(h,d,f){var g;arguments.length>1&&(arguments.length<3&&(f=d,d=1),h=i.to(h,d,f));try{e?g=new e({smoothChildTiming:!0}).add(h):g=h,g.pause()}catch{return l(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject"),a}if(u&&a.removeTween(),u=g,h.repeat&&h.repeat()===-1&&(u.repeat(-1),u.yoyo(h.yoyo())),a.tweenChanges()&&!u.tweenTo&&l(2,"WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic."),u&&a.controller()&&a.triggerElement()&&a.loglevel()>=2){var p=i.getTweensOf(a.triggerElement()),m=a.controller().info("vertical");p.forEach(function(D,y){var v=D.vars.css||D.vars,b=m?v.top!==void 0||v.bottom!==void 0:v.left!==void 0||v.right!==void 0;if(b)return l(2,"WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!"),!1})}if(parseFloat(i.version)>=1.14)for(var w=u.getChildren?u.getChildren(!0,!0,!1):[u],T=function(){l(2,"WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another")},S=0,C,_;S<w.length;S++)C=w[S],_!==T&&(_=C.vars.onOverwrite,C.vars.onOverwrite=function(){_&&_.apply(this,arguments),T.apply(this,arguments)});return l(3,"added tween"),c(),a},a.removeTween=function(h){return u&&(h&&u.progress(0).pause(),u.kill(),u=void 0,l(3,"removed tween (reset: "+(h?"true":"false")+")")),a}})},q0={ScrollMagicPluginGsap:j0};function Al(n,t,e){const i=n.slice();return i[1]=t[e],i}function Il(n){let t,e;const i=[n[1]];let r={};for(let s=0;s<i.length;s+=1)r=si(r,i[s]);return t=new B0({props:r}),{c(){xn(t.$$.fragment)},m(s,o){Qe(t,s,o),e=!0},p(s,o){const a=o&1?oi(i,[ai(s[1])]):{};t.$set(a)},i(s){e||(Ht(t.$$.fragment,s),e=!0)},o(s){se(t.$$.fragment,s),e=!1},d(s){Je(t,s)}}}function G0(n){let t,e,i,r,s=n[0].slides,o=[];for(let u=0;u<s.length;u+=1)o[u]=Il(Al(n,s,u));const a=u=>se(o[u],1,1,()=>{o[u]=null});return{c(){t=ut("main"),e=ut("div"),i=pn();for(let u=0;u<o.length;u+=1)o[u].c();R(e,"class","animation-trigger"),Cs(e,"background-color","transparent"),Cs(t,"--font-family",n[0].theme.font),R(t,"class","svelte-88v119"),Vt(t,"warm",n[0].theme.theme==="warm"),Vt(t,"dark",n[0].theme.theme==="dark"),Vt(t,"light",n[0].theme.theme==="light"),Vt(t,"cool",n[0].theme.theme==="cool"),Vt(t,"dream",n[0].theme.theme==="dream"),Vt(t,"solid",n[0].theme.background.type==="solid"),Vt(t,"gradient",n[0].theme.background.type==="gradient"),Vt(t,"animated",n[0].theme.background.type==="animated")},m(u,l){Ie(u,t,l),Y(t,e),Y(t,i);for(let c=0;c<o.length;c+=1)o[c].m(t,null);r=!0},p(u,[l]){if(l&1){s=u[0].slides;let c;for(c=0;c<s.length;c+=1){const h=Al(u,s,c);o[c]?(o[c].p(h,l),Ht(o[c],1)):(o[c]=Il(h),o[c].c(),Ht(o[c],1),o[c].m(t,null))}for(Ho(),c=s.length;c<o.length;c+=1)a(c);Ko()}(!r||l&1)&&Cs(t,"--font-family",u[0].theme.font),l&1&&Vt(t,"warm",u[0].theme.theme==="warm"),l&1&&Vt(t,"dark",u[0].theme.theme==="dark"),l&1&&Vt(t,"light",u[0].theme.theme==="light"),l&1&&Vt(t,"cool",u[0].theme.theme==="cool"),l&1&&Vt(t,"dream",u[0].theme.theme==="dream"),l&1&&Vt(t,"solid",u[0].theme.background.type==="solid"),l&1&&Vt(t,"gradient",u[0].theme.background.type==="gradient"),l&1&&Vt(t,"animated",u[0].theme.background.type==="animated")},i(u){if(!r){for(let l=0;l<s.length;l+=1)Ht(o[l]);r=!0}},o(u){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)se(o[l]);r=!1},d(u){u&&ve(t),xl(o,u)}}}const Js=600;function H0(n,t,e){let{data:i}=t;return Go(()=>{document.querySelector(".animation-trigger").style.height=Js+100+"vh",document.querySelector("main").style.height=Js+100+"vh",q0.ScrollMagicPluginGsap(z0,wt,Ot);const r=new tr.exports.Controller,s=["scale","opacity","x","y","backgroundImage"];function o(h,d,f,g){new tr.exports.Scene({triggerElement:".animation-trigger",triggerHook:f,offset:g,duration:Js+"%"}).setTween(d).setPin(h).addTo(r)}function a(h,d,f){var g=0;s.forEach(p=>{var m=p;f&&(m="final"+m.charAt(0).toUpperCase()+m.slice(1));const w=h.dataset[m];if(w!==void 0){const S=parseInt(h.dataset[`${m}Duration`])||15;var T=g-(parseInt(h.dataset[`${m}Delay`])||0);d.to(h,S,{[p]:w,ease:Power1.easeInOut,force3D:!1},T<0?`+=${T}`:`-=${T}`),g=S+T}}),Array.from(h.children).length>0&&Array.from(h.children).forEach(p=>{a(p,d,f)})}function u(h,d){Array.from(h.children).forEach(f=>{a(f,d,!1)})}function l(h,d){Array.from(h.children).forEach(f=>{a(f,d,!0)})}const c=new Ot;document.querySelectorAll("[data-animation]").forEach(h=>{if(u(h,c),l(h,c),h instanceof HTMLElement){console.log(h);const d=parseFloat(h.dataset.triggerHook)||0,f=parseFloat(h.dataset.offset)||0;o(h,c,d,f)}})}),n.$$set=r=>{"data"in r&&e(0,i=r.data)},n.$$.update=()=>{if(n.$$.dirty&1){const r=document.querySelector("#gradient-canvas");if(i.theme.background.type==="animated"){r.classList.add("visible"),r.classList.add(i.theme.theme);const s=document.createElement("script");s.innerHTML='new Gradient().initGradient("#gradient-canvas");',document.body.appendChild(s)}}},[i]}class K0 extends tn{constructor(t){super(),Ze(this,t,H0,G0,Ye,{data:0})}}function W0(n){let t,e;return t=new K0({props:{data:n[0]}}),{c(){xn(t.$$.fragment)},m(i,r){Qe(t,i,r),e=!0},p(i,r){const s={};r&1&&(s.data=i[0]),t.$set(s)},i(i){e||(Ht(t.$$.fragment,i),e=!0)},o(i){se(t.$$.fragment,i),e=!1},d(i){Je(t,i)}}}function X0(n){let t;return{c(){t=ut("div"),t.textContent="Loading..."},m(e,i){Ie(e,t,i)},p:Gt,i:Gt,o:Gt,d(e){e&&ve(t)}}}function Y0(n){let t,e,i,r;const s=[X0,W0],o=[];function a(u,l){return u[0]===void 0?0:1}return t=a(n),e=o[t]=s[t](n),{c(){e.c(),i=Rf()},m(u,l){o[t].m(u,l),Ie(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?o[t].p(u,l):(Ho(),se(o[c],1,1,()=>{o[c]=null}),Ko(),e=o[t],e?e.p(u,l):(e=o[t]=s[t](u),e.c()),Ht(e,1),e.m(i.parentNode,i))},i(u){r||(Ht(e),r=!0)},o(u){se(e),r=!1},d(u){o[t].d(u),u&&ve(i)}}}function Q0(n,t,e){var i;Go(()=>{Jd({apiKey:"AIzaSyDDQUbmvtIFT3CzKQUImmvIWB0G6WpyZDU",authDomain:"spheres-871e8.firebaseapp.com",projectId:"spheres-871e8",storageBucket:"spheres-871e8.appspot.com",messagingSenderId:"730895180518",appId:"1:730895180518:web:0e69c4d3c6a338e17ed127",measurementId:"G-H48Y1L29G0"});const o=Gy(),a=window.location.hostname.split(".")[0];document.title=a.charAt(0).toUpperCase()+a.slice(1),r(o,a)});async function r(s,o){const a=await jy(s,"domains",o),u=await t_(a);u.exists()?e(0,i=u.data().data):console.log("Page not found")}return[i]}class J0 extends tn{constructor(t){super(),Ze(this,t,Q0,Y0,Ye,{})}}new J0({target:document.getElementById("app")});
